{"version":3,"sources":["components/audioControls.js","components/drawingCanvas.js","components/whereModal.js","components/introModal.js","components/marquee.js","components/drawingTools.js","components/settingsMenu.js","components/glVis.js","components/responseDisplay.js","components/infoOverlay.js","components/colourPicker.js","components/videoPlayer.js","components/videoStreamPlayer.js","components/desktopApp.js","components/mobileApp.js","App.js","index.js","content/media/slowdiscpixel.gif"],"names":["AudioControls","props","useState","savedVol","setSavedVol","isMuted","setIsMuted","volNotchGen","Array","fill","isMouseDown","document","addEventListener","VolumeNotches","map","nothing","index","className","id","onMouseDown","clickVolumeNotch","onMouseEnter","e","style","height","length","onClick","audioGain","gain","setValueAtTime","audioCtx","currentTime","MuteIconOff","MuteIconOn","stopPropagation","clickedID","parseInt","target","notches","getElementsByClassName","notch","classList","remove","add","newVolume","width","viewBox","xmlns","transform","d","stroke","strokeLinecap","strokeWidth","opacity","DrawingCanvas","canvas","setCanvas","canvasRef","useRef","useEffect","current","newCanvas","fabric","Canvas","isDrawingMode","canvasWrapper","getElementById","setWidth","offsetWidth","setHeight","offsetHeight","freeDrawingBrush","color","brushColour","brushSize","freeDrawingCursor","getCustomCursor","on","setIsDrawing","loadFromJSON","toDatalessJSON","window","updateCanvasDimensions","setDrawingCanvas","setCurrentCanvasState","circle","btoa","youlat","youlong","WhereAreYou","whereTerritories","getTerritories","isChecking","setIsChecking","isLoading","setIsLoading","display","flexDirection","alignItems","WhereThrobber","getPotentialLocations","then","data","a","getLocationDataFromIp","ipData","href","rel","getTerritoriesFromLngLat","territories","properties","description","Name","commonName","fetch","response","json","latLng","loc","locArray","split","parseFloat","extractLngLat","extractLocationString","x","y","res","catch","console","error","city","region","strings","push","country","join","x1","y1","x2","y2","offset","stopColor","cx","cy","r","attributeName","begin","dur","type","from","to","repeatCount","IntroModal","container","dialog","A11yDialog","show","setIntroModal","secretKey","modalPages","textAlign","fontSize","padding","justifyContent","nextModalPage","toggleModal","mobileModalPages","gap","src","alt","role","mobile","currentModalPage","setCurrentModalPage","scrollTop","removeEventListener","key","Marquee","require","default","currentArtist","DrawingTools","setCurrentColours","colours","position","top","name","min","max","defaultValue","onInput","setBrushSize","value","toggleEraser","EraserIcon","strokeColour","undoDrawing","UndoIcon","redoDrawing","RedoIcon","BrushUpIcon","BrushDownIcon","markerWidth","markerHeight","refX","refY","orient","points","markerEnd","strokeLinejoin","SettingsMenu","setDisplay","toggleFocus","displayMode","shaders","Shaders","create","onecolour","frag","GLSL","GLVis","state","timer","this","shader","ignoreUnusedUniforms","uniforms","startTimer","stopTimer","myInterval","setInterval","setState","prevState","clearInterval","Component","ResponseDisplay","responsesToDisplay","setResponsesToDisplay","responsesToDisplayRef","displayNextResponse","responseData","newResponseList","concat","newResponse","shift","createTextResponseDisplay","createImageResponseDisplay","setTimeout","imageResponse","newResponseBox","createElement","collision","xRandom","Math","random","yRandom","appendChild","responseBoxDimensions","getBoundingClientRect","left","colliding","colliderArray","i","detect2DBoxCollision","requestAnimationFrame","responseFadeInOut","textResponse","innerHTML","responseElement","transition","responseFadeTime","box1","box2","right","bottom","InfoOverlay","overlayToggle","ColourPicker","colourInputChange","selectors","cl","contains","setSelectedColour","oldCol","colourSwap","SwapIcon","colNum","charAt","documentElement","setProperty","newColours","updateCanvasBrush","VideoPlayer","audioContext","audioSource","videoRef","React","playerRef","fft","setFft","options","onReady","remapEnergy","energyInput","floor","ceiling","ref","setup","p5","canvasParentRef","createCanvas","parent","getAudioContext","setAudioCtx","createMediaElementSource","newGain","createGain","setAudioGain","connect","destination","newFft","constructor","FFT","setInput","videoElement","player","videojs","draw","analysing","analyze","mid","getEnergy","treble","videoJsOptions","autoplay","controls","sources","pictureInPictureToggle","VideoStreamPlayer","DesktopApp","showOverlay","setShowOverlay","modalIsOpen","currentPrompt","changeColourOrder","changeColours","placeholder","submitResponse","title","MobileApp","flexGrow","overflow","App","onMobile","matchMedia","matches","innerWidth","innerHeight","windowSize","setWindowSize","setModalIsOpen","modalIsOpenRef","introModal","setCurrentArtist","currentArtistRef","setCurrentPrompt","currentPromptRef","inputIsDraw","setInputIsDraw","setResponseData","lastResponseID","setLastResponseID","lastResponseIDRef","currentColours","selectedColour","selectedColourRef","isDrawing","isDrawingRef","isEraser","setIsEraser","savedBrush","setSavedBrush","drawingCanvas","drawingCanvasRef","currentCanvasState","currentCanvasStateRef","undoStack","setUndoStack","redoStack","setRedoStack","undoStackRef","redoStackRef","focusMode","setFocusMode","setAnalysing","setColliding","collidingRef","cycleInterval","colourCycleTimer","setColourCycleTimer","colourCycleTimerRef","isCountdown","setIsCountdown","isCountdownRef","newPrompt","setNewPrompt","newPromptRef","responseTime","saveCanvasState","liveMobileUpdate","liveUpdate","textResponseRule","getCSSRule","imageResponseRule","backgroundColor","border","hide","headers","method","mode","body","JSON","stringify","serverResponse","animation","colourCycle","startPromptCountdown","returnedResponses","forEach","RESPONSE","RESPONSE_TYPE","updateFromServerResponse","updateFromMobileServerResponse","prev","promptTimer","children","promptTimerOverlay","countdown","textInput","imageInput","dataURL","toDataURL","format","formData","FormData","imageFile","dataurl","filename","arr","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","dataURLtoFile","clear","append","Date","now","responseSubmittedAnim","responseText","reflection","subButton","firstChild","changeToDraw","getCustomEraserCursor","EraserBrush","newUndoStack","reloadState","log","newCanvasState","newRedoStack","splice","newState","pop","ruleName","toLowerCase","result","find","prototype","call","styleSheets","styleSheet","cssRules","cssRule","CSSStyleRule","selectorText","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.df46399a.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\nexport default function AudioControls(props){\r\n\r\n  const [savedVol, setSavedVol] = useState(1.);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n\r\n  const notchNumber = 12;\r\n\r\n  let volNotchGen = Array(notchNumber).fill('');\r\n\r\n  /* keep track of mouse down for volume drag event */\r\n  var isMouseDown = false;\r\n  document.addEventListener(\"mouseup\", () => {isMouseDown = false});\r\n\r\n  const VolumeNotches = volNotchGen.map((nothing, index) =>\r\n    <button className='VolumeNotch VolumeActive' id={index}\r\n        key={index+nothing} \r\n        onMouseDown={clickVolumeNotch}\r\n        onMouseEnter={(e) => {if(isMouseDown){clickVolumeNotch(e)}}}\r\n        style={{height: 100/volNotchGen.length + \"%\"}} />\r\n  );\r\n\r\n  return (\r\n    <>              \r\n      <button id=\"mute-button\" onClick={muteAudio}>\r\n        {isMuted\r\n          ? <MuteIconOff />\r\n          : <MuteIconOn />\r\n        }          \r\n        </button>\r\n      <div id=\"volume-wrapper\">\r\n        {VolumeNotches}\r\n      </div>\r\n    </> \r\n  )\r\n\r\n  function clickVolumeNotch(e){\r\n    e.stopPropagation();\r\n    isMouseDown = true;\r\n    let clickedID = parseInt(e.target.id);\r\n    /* set classes for active notch */\r\n    let notches = document.getElementsByClassName(\"VolumeNotch\");\r\n    for (let notch of notches){\r\n      if(notch.id < clickedID){\r\n        notch.classList.remove(\"VolumeActive\");\r\n      } else {\r\n        notch.classList.add(\"VolumeActive\");\r\n      }  \r\n    }\r\n    /* set new volume */\r\n    let newVolume = 1 - (1/notchNumber) * clickedID;\r\n    setSavedVol(newVolume);\r\n    if(props.audioCtx){\r\n      props.audioGain.gain.setValueAtTime(newVolume, props.audioCtx.currentTime);      \r\n      setIsMuted(false);\r\n    }  \r\n  }\r\n\r\n  function muteAudio(){\r\n    if(isMuted){\r\n      props.audioGain.gain.setValueAtTime(savedVol, props.audioCtx.currentTime);\r\n      setIsMuted(false);\r\n    } else {\r\n      props.audioGain.gain.setValueAtTime(0, props.audioCtx.currentTime);\r\n      setIsMuted(true);\r\n    }\r\n  }\r\n}\r\n\r\nfunction MuteIconOn(props){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\">\r\n        {/* Speaker */}\r\n        <path id=\"mute-speaker\"\r\n              d=\" M 10,42\r\n              A 2,2 90 0 1 12,40\r\n              L 15,40 30,15 35,15\r\n              Q 38,50 35,85 \r\n              L 30,85 15,60 12,60\r\n              A 2,2 90 0 1 10,58\r\n              Z              \r\n        \" />\r\n        {/* Volume Lines */}\r\n        <path fill=\"none\" stroke=\"black\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 45,35\r\n                  Q 55,50 45,65\" />\r\n        <path fill=\"none\" stroke=\"black\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 55,22.5\r\n                  Q 77.33,50 55,77.5\" />\r\n        <path fill=\"none\" stroke=\"black\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 65,10\r\n                  Q 101.66,50 65,90\" />\r\n    </svg>\r\n  )\r\n}\r\nfunction MuteIconOff(props){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      opacity=\"50%\">\r\n        {/* Speaker */}\r\n        <path id=\"mute-speaker\"\r\n              d=\" M 10,42\r\n              A 2,2 90 0 1 12,40\r\n              L 15,40 30,15 35,15\r\n              Q 38,50 35,85 \r\n              L 30,85 15,60 12,60\r\n              A 2,2 90 0 1 10,58\r\n              Z              \r\n        \" />\r\n        <path fill=\"none\" stroke=\"black\" strokeWidth=\"6\"\r\n              d=\" M 50, 35\r\n                  L 80, 65\r\n              \" />\r\n        <path fill=\"none\" stroke=\"black\" strokeWidth=\"6\" \r\n              d=\" M 80, 35\r\n                  L 50, 65\r\n              \" />\r\n    </svg>\r\n  )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nexport default function DrawingCanvas(props){\r\n\r\n  \r\n  const [canvas, setCanvas] = useState(null);\r\n  let canvasRef = useRef(null);\r\n  useEffect(() => {canvasRef.current = canvas}, [canvas]);\r\n\r\n  useEffect(() => {\r\n    let newCanvas = new fabric.Canvas('drawing-canvas', { isDrawingMode: true });\r\n    let canvasWrapper = document.getElementById(\"drawing-canvas-wrapper\"); \r\n    newCanvas.setWidth(canvasWrapper.offsetWidth);\r\n    newCanvas.setHeight(canvasWrapper.offsetHeight);\r\n    newCanvas.freeDrawingBrush.color = props.brushColour;    \r\n    newCanvas.freeDrawingBrush.width = props.brushSize;\r\n    newCanvas.freeDrawingCursor = getCustomCursor();\r\n    newCanvas.on('mouse:down', () => props.setIsDrawing(true));\r\n    newCanvas.on('path:created', () => newCanvas.loadFromJSON(newCanvas.toDatalessJSON()));\r\n    setCanvas(newCanvas);\r\n    window.addEventListener('resize', updateCanvasDimensions);\r\n    props.setDrawingCanvas(newCanvas);\r\n    props.setCurrentCanvasState(newCanvas.toDatalessJSON());\r\n  }, [setCanvas]);\r\n\r\n  useEffect(() => {\r\n    if(canvasRef.current){\r\n      canvasRef.current.freeDrawingBrush.color = props.brushColour;\r\n      canvasRef.current.freeDrawingCursor = getCustomCursor();\r\n    }    \r\n  }, [props.brushColour]);\r\n\r\n  useEffect(() => {\r\n    if(canvasRef.current){\r\n      canvasRef.current.freeDrawingBrush.width = props.brushSize;\r\n      canvasRef.current.freeDrawingCursor = getCustomCursor();\r\n    }    \r\n  }, [props.brushSize]);\r\n\r\n  return (\r\n    <div id=\"drawing-canvas-wrapper\">\r\n      <canvas id=\"drawing-canvas\" />\r\n    </div>\r\n  )\r\n\r\n  function updateCanvasDimensions() {\r\n    let canvasWrapper = document.getElementById(\"drawing-canvas-wrapper\");\r\n    canvasRef.current.setWidth(canvasWrapper.offsetWidth);\r\n    canvasRef.current.setHeight(canvasWrapper.offsetHeight);    \r\n  }\r\n\r\n  function getCustomCursor() {\r\n    const circle = \r\n      `<svg height=\"${props.brushSize}\"\r\n            fill=\"${props.brushColour}\"\r\n            viewBox=\"0 0 ${props.brushSize * 2} ${props.brushSize * 2}\"\r\n            width=\"${props.brushSize}\"\r\n            xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"50%\"\r\n                cy=\"50%\"\r\n                r=\"${props.brushSize}\" />\r\n      </svg>`;      \r\n    return `url(data:image/svg+xml;base64,${window.btoa(circle)}) ${props.brushSize / 2} ${props.brushSize / 2}, move`;\r\n  }\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nconst IP_API = 'https://ipinfo.io/json?token=9f90c3a3f131ff' \r\nconst NATIVE_LAND_API = 'https://native-land.ca/api/index.php'\r\nvar youlat;\r\nvar youlong; \r\n\r\nexport default function WhereAreYou () {\r\n  const [whereTerritories, getTerritories] = useState([]);\r\n  \r\n  const [isChecking, setIsChecking] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  return (<div style={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\r\n    <p>Where are you visiting from?</p>    \r\n    {isChecking\r\n      ?<>{isLoading\r\n        ? <WhereThrobber />\r\n        : <>{whereTerritories}</> \r\n        }</>\r\n      :<button id=\"ip-check-button\" onClick={() => runCheck()}>Check with my IP</button>      \r\n    }    \r\n  </div>)\r\n\r\n  function runCheck(){\r\n    setIsChecking(true);\r\n    getPotentialLocations()\r\n    .then(data => {\r\n      setIsLoading(false);\r\n      getTerritories(data);\r\n    }      \r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nasync function getPotentialLocations() {  \r\n  const ipData = await getLocationDataFromIp();\r\n  if (!ipData) return <>\r\n  <span>We couldn't access your IP, and couldn't find information information about indigenous nations at your location, but this does not mean that there aren't any.\r\n    Do you know whose land you're on?*\r\n  </span>\r\n  <br />\r\n  <span className=\"ModalTextSmall\">\r\n  <span className=\"astrix\">*</span> \r\n    The information presented here is derived from the maps at <a href=\"https://native-land.ca/\" target=\"_blank\" rel=\"noreferrer\">Native Land Digital</a>, cross-referenced with data from <a href=\"https://ipinfo.io/\" target=\"_blank\" rel=\"noreferrer\">ipinfo.io</a>. \r\n    Note that this is based on your internet service provider's location, and may be incorrect for your actual physical location. \r\n    This is not authoritative or representative and should be approached critically.\r\n    Code is adapted from <i>Where Are We</i>, which you can learn more about on <a href=\"https://github.com/e-e-e/where-are-we\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Your IP data is not stored.\r\n  </span>\r\n  </>\r\n  const territories = await getTerritoriesFromLngLat(youlat, youlong)\r\n\r\n  if (territories.length === 1) {\r\n    return (\r\n    <>\r\n    <span>Your IP suggests that you may be on <a href={territories[0].properties.description} target='_blank' rel=\"noreferrer\">{territories[0].properties.Name}</a> country, otherwise known as {ipData.commonName}.*</span>\r\n    <br />\r\n    <span className=\"ModalTextSmall\">\r\n    <span className=\"astrix\">*</span> \r\n    The information presented here is derived from the maps at <a href=\"https://native-land.ca/\" target=\"_blank\" rel=\"noreferrer\">Native Land Digital</a>, cross-referenced with data from <a href=\"https://ipinfo.io/\" target=\"_blank\" rel=\"noreferrer\">ipinfo.io</a>. \r\n    Note that this is based on your internet service provider's location, and may be incorrect for your actual physical location. \r\n    This is not authoritative or representative and should be approached critically.\r\n    Code is adapted from <i>Where Are We</i>, which you can learn more about on <a href=\"https://github.com/e-e-e/where-are-we\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Your IP data is not stored.\r\n    </span>\r\n    </>\r\n    )\r\n  } else if (territories.length > 1) {\r\n    return <>\r\n    <span>Your IP suggests that you may be on <a href={territories[0].properties.description} target='_blank' rel=\"noreferrer\"> {territories[0].properties.Name}</a> and/or <a href={territories[1].properties.description} target='_blank' rel=\"noreferrer\"> {territories[1].properties.Name}</a> country, otherwise known as {ipData.commonName}.*</span>\r\n    <br />\r\n    <span className=\"ModalTextSmall\">\r\n    <span className=\"astrix\">*</span> \r\n    The information presented here is derived from the maps at <a href=\"https://native-land.ca/\" target=\"_blank\" rel=\"noreferrer\">Native Land Digital</a>, cross-referenced with data from <a href=\"https://ipinfo.io/\" target=\"_blank\" rel=\"noreferrer\">ipinfo.io</a>. \r\n    Note that this is based on your internet service provider's location, and may be incorrect for your actual physical location. \r\n    This is not authoritative or representative and should be approached critically.\r\n    Code is adapted from <i>Where Are We</i>, which you can learn more about on <a href=\"https://github.com/e-e-e/where-are-we\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Your IP data is not stored.\r\n    </span>\r\n    </>\r\n  } else {\r\n    return <>\r\n    <span>Your IP suggests that you may be in {ipData.commonName}. We cannot find information about indigenous nations at this location, but this does not mean that there aren't any. Do you know whose land you're on?*</span>\r\n    <br />\r\n    <span className=\"ModalTextSmall\">\r\n    <span className=\"astrix\">*</span> \r\n    The information presented here is derived from the maps at <a href=\"https://native-land.ca/\" target=\"_blank\" rel=\"noreferrer\">Native Land Digital</a>, cross-referenced with data from <a href=\"https://ipinfo.io/\" target=\"_blank\" rel=\"noreferrer\">ipinfo.io</a>. \r\n    Note that this is based on your internet service provider's location, and may be incorrect for your actual physical location. \r\n    This is not authoritative or representative and should be approached critically.\r\n    Code is adapted from <i>Where Are We</i>, which you can learn more about on <a href=\"https://github.com/e-e-e/where-are-we\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Your IP data is not stored.\r\n    </span>\r\n    </>\r\n  }\r\n  \r\n  }\r\n  \r\n  function getLocationDataFromIp() {\r\n    \r\n  return fetch(IP_API)\r\n  .then((response) => response.json())\r\n  .then((data) => {\r\n  const latLng = extractLngLat(data)\r\n  return latLng\r\n    ? {\r\n        ...latLng,\r\n        commonName: extractLocationString(data) ?? '',\r\n      }\r\n    : null\r\n  })\r\n  }\r\n  \r\n  function extractLngLat(data) {\r\n  if (!data) return null\r\n  if (!data.loc || typeof data.loc !== 'string') return null\r\n  const locArray = data.loc.split(',')\r\n  if (locArray.length !== 2) return null\r\n  youlat = parseFloat(locArray[0])\r\n  youlong = parseFloat(locArray[1])\r\n  \r\n  if (youlat == null || youlong == null) return null\r\n  return {\r\n  youlat,\r\n  youlong,\r\n  }\r\n  }\r\n  \r\n  function getTerritoriesFromLngLat(x, y) {\r\n  return fetch(\r\n  `${NATIVE_LAND_API}?maps=territories&position=${x},${y}`\r\n  )\r\n  .then((res) => res.json())\r\n  .catch((e) => {\r\n  console.error(e)\r\n  return []\r\n  })\r\n  }\r\n\r\n  /* function toTerritoryInfo(features) {\r\n    return features\r\n      .map((feature) => {\r\n        const name = feature.properties.Name\r\n        const link = feature.properties.description\r\n        return name\r\n          ? {\r\n              name,\r\n              link,\r\n            }\r\n          : undefined\r\n      })\r\n  } */\r\n  \r\n  \r\n  function extractLocationString(data) {\r\n  if (!data) return null\r\n  if (!data.city && !data.region) return null\r\n  const strings = []\r\n  data.city && strings.push(data.city)\r\n  data.region && strings.push(data.region)\r\n  data.country && strings.push(data.country)\r\n  return strings.join(', ')\r\n  }\r\n\r\n  function WhereThrobber(){\r\n    return (\r\n      <div id=\"modal-throbber\">\r\n        <svg\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          viewBox=\"0 0 100 100\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          transform=\"\">\r\n            <defs>\r\n              <linearGradient id=\"grad1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                <stop offset=\"0%\" stopColor=\"#b5e877\"/>\r\n                <stop offset=\"100%\" stopColor=\"#5252ff\"/>\r\n              </linearGradient>\r\n            </defs>\r\n            \r\n            <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"url(#grad1)\" strokeWidth=\"10\" fill=\"transparent\">\r\n              <animateTransform\r\n                attributeName=\"transform\"\r\n                begin=\"0s\"\r\n                dur=\"1s\"\r\n                type=\"rotate\"\r\n                from=\"0 50 50\"\r\n                to=\"360 50 50\"\r\n                repeatCount=\"indefinite\"\r\n              />\r\n            </circle>                \r\n        </svg>\r\n      </div>\r\n      \r\n    )\r\n  }\r\n","import React, { useEffect } from 'react';\r\nimport A11yDialog from 'a11y-dialog';\r\nimport WhereAreYou from './whereModal';\r\n\r\nexport default function IntroModal(props) {\r\n  \r\n  // run init on load\r\n  useEffect(() => {\r\n    const container = document.getElementById(\"AOC-modal\");\r\n    const dialog = new A11yDialog(container);\r\n    dialog.show();\r\n    props.setIntroModal(dialog);\r\n    window.addEventListener(\"keydown\", secretKey);\r\n  },[]);\r\n\r\n  let modalPages = [\r\n    //page 1 Logo - no continue button on this one if the site needs to get closed\r\n    <div id=\"logo-wrapper\">\r\n      <div id=\"text-logo\">\r\n        <pre id=\"pre-logo-wrapper\">\r\n          <div id=\"logo-line-1\">__________________________________________________________________<u className=\"text-gradient-1\">/\\\\\\\\\\\\\\\\\\</u>_____        <br/></div>\r\n          <div id=\"logo-line-2\">&nbsp;________________________________________________________________<u className=\"text-gradient-2\">/\\\\\\///////\\\\\\</u>___       <br/></div>\r\n          <div id=\"logo-line-3\">&nbsp;&nbsp;_______________________________________________________________<u className=\"text-gradient-3\">\\///</u>______<u className=\"text-gradient-3\">\\//\\\\\\</u>__      <br/></div>\r\n          <div id=\"logo-line-4\">&nbsp;&nbsp;&nbsp;__<u className=\"text-gradient-4\">/\\\\/\\\\\\\\\\\\\\</u>______<u className=\"text-gradient-4\">/\\\\\\\\\\</u>________<u className=\"text-gradient-4\">/\\\\\\\\\\</u>_______<u className=\"text-gradient-4\">/\\\\\\\\\\</u>__<u className=\"text-gradient-4\">/\\\\\\\\\\</u>_____________<u className=\"text-gradient-4\">/\\\\\\/</u>___     <br/></div>\r\n          <div id=\"logo-line-5\">&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-5\">\\/\\\\\\/////\\\\\\</u>___<u className=\"text-gradient-5\">/\\\\\\///\\\\\\</u>____<u className=\"text-gradient-5\">/\\\\\\///\\\\\\</u>___<u className=\"text-gradient-5\">/\\\\\\///\\\\\\\\\\///\\\\\\</u>________<u className=\"text-gradient-5\">/\\\\\\//</u>_____    <br/></div>\r\n          <div id=\"logo-line-6\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-6\">\\/\\\\\\</u>___<u className=\"text-gradient-6\">\\///</u>___<u className=\"text-gradient-6\">/\\\\\\</u>__<u className=\"text-gradient-6\">\\//\\\\\\</u>__<u className=\"text-gradient-6\">/\\\\\\</u>__<u className=\"text-gradient-6\">\\//\\\\\\</u>_<u className=\"text-gradient-6\">\\/\\\\\\</u>_<u className=\"text-gradient-6\">\\//\\\\\\</u>__<u className=\"text-gradient-6\">\\/\\\\\\</u>_____<u className=\"text-gradient-6\">/\\\\\\//</u>________   <br/></div>\r\n          <div id=\"logo-line-7\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-7\">\\/\\\\\\</u>_________<u className=\"text-gradient-7\">\\//\\\\\\</u>__<u className=\"text-gradient-7\">/\\\\\\</u>__<u className=\"text-gradient-7\">\\//\\\\\\</u>__<u className=\"text-gradient-7\">/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>___<u className=\"text-gradient-7\">/\\\\\\/</u>___________  <br/></div>\r\n          <div id=\"logo-line-8\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-8\">\\/\\\\\\</u>__________<u className=\"text-gradient-8\">\\///\\\\\\\\\\/</u>____<u className=\"text-gradient-8\">\\///\\\\\\\\\\/</u>___<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\</u>_ <br/></div>\r\n          <div id=\"logo-line-9\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-9\">\\///</u>_____________<u className=\"text-gradient-9\">\\/////</u>________<u className=\"text-gradient-9\">\\/////</u>_____<u className=\"text-gradient-9\">\\///</u>___<u className=\"text-gradient-9\">\\///</u>___<u className=\"text-gradient-9\">\\///</u>__<u className=\"text-gradient-9\">\\///////////////</u>__<br/></div>\r\n        </pre>            \r\n      </div>\r\n      <p style={{textAlign: 'centre', color: 'white', fontSize: '1.2rem', padding: '0 2rem'}}>\r\n        On Sunday 25th from 2-7pm AEST room2 will be live at this site, showing with 4 new collaborative works, online and in-person at Arts House. More information here: <a href=\"https://www.artshouse.com.au/events/room2-live/\" target=\"_blank\" rel=\"noreferrer\">https://www.artshouse.com.au/events/room2-live/</a>\r\n      </p>\r\n    </div>,\r\n  \r\n    //page 2 AOC\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-text-wrapper\" className=\"modal-text-wrapper-aoc\" style={{textAlign: 'center'}}>\r\n          <div id=\"modal-text\" style={{alignItems: 'center', justifyContent: 'space-around'}}>\r\n            <p id=\"aoc-text\">\r\n              This website was produced and is maintained on the unceded territory of the Wurundjeri Woi Wurrung and Bunurong Boon \r\n              Wurrung peoples of the Eastern Kulin Nation, the Traditional Custodians of the land. We recognise their ongoing legacy \r\n              of connection to land, waters and culture and pay respect to their Elders past and present. We extend this respect to \r\n              all other First Nations peoples and Traditional Custodians whose land the material pathways that allow our digital \r\n              connectivity are built upon.\r\n            </p>\r\n            \r\n            <WhereAreYou />\r\n       \r\n          </div>          \r\n      </div>\r\n      <button id=\"modal-continue-button\" onClick={() => nextModalPage()}> Continue </button>\r\n    </div>,\r\n    \r\n    //page 3 Welcome\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-title-wrapper\">\r\n        <div id=\"modal-title\">\r\n          Welcome to room2.fm live\r\n        </div>\r\n        <hr />\r\n      </div>\r\n      <div id=\"modal-text-wrapper\">\r\n          <div id=\"modal-text\">\r\n            <p>\r\n              room2.fm is a digital space for collective reflection, sharing, and vulnerability. <br/>\r\n              Today @ 2pm =&gt; 7pm (AEST) we will be hosting works from:\r\n            </p>\r\n              <p style={{fontSize: '1.95rem', padding: '1rem'}}>\r\n                amby downs &amp; Joel Spring <br />\r\n                Panda Wong &amp; 黑芝麻 (Hēi zhī ma) &amp; Wei Huang <br />\r\n                Mohamed Chamas &amp; Aarti Jadu <br />\r\n                E Fishpool &amp; Sam Miers <br />\r\n                w/ interstitial sounds by J <br />\r\n              </p>\r\n            <p>\r\n              There is no right or wrong way for you to listen, respond to, or feel the work presented @ room2. We encourage you to trust \r\n              your senses and intuition and respond sincerely and in whatever way feels true to your experience.\r\n            </p>\r\n            <p className=\"ModalTextSmall\">\r\n              This website has been optimised to run with the window maximised on Firefox or Chrome on a desktop or laptop screen. \r\n              If you are having issues, please try using one of these browsers.\r\n            </p>\r\n          </div>\r\n      </div>        \r\n      <button id=\"modal-continue-button\" onClick={() => nextModalPage()}> Continue </button>\r\n    </div>,\r\n  \r\n    //page 4 Instructions\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-title-wrapper\">\r\n        <div id=\"modal-title\">\r\n          Welcome to room2.fm live\r\n        </div>\r\n        <hr />\r\n      </div>\r\n      <div id=\"modal-text-wrapper\">\r\n          <div id=\"modal-text\">\r\n            <p>During room2 prompts will periodically come up in the lower middle of the screen. You can share your response to the prompts, music and visuals in a number of ways:</p>\r\n            <p>\r\n            You can write or draw your response in the white box at the bottom of the screen before clicking the ‘submit response’ button to share it with others. Your responses to \r\n            these prompts will be completely anonymised and not attributable to you in any way. Above the ‘submit response’ button, you can select the colour palette you will be able \r\n            to draw responses with.\r\n            </p>\r\n            <p>\r\n              You can use the chat box on the right of the screen to directly speak to others participating. Select a username and click ‘Join Room’ to \r\n              engage. Be yourself, be someone else, be whomever you want to be!\r\n            </p>\r\n            <p>\r\n            Prompt responses from the online and in-person event will be intermingled and viewable for both digital and face-to-face participants.\r\n            </p>\r\n              <span className=\"ModalTextSmall\">\r\n              If you would like a high-contrast version of the response text with no distortion please click 'Focus Mode' button.    \r\n              <br />\r\n              <br /> \r\n              room2.fm was created by <a href=\"https://patrickhase.xyz\" target=\"_blank\" rel=\"noreferrer\">Patrick Hase</a> and <a href=\"https://soundcloud.com/anuraag69\" target=\"_blank\" rel=\"noreferrer\">Anuraag Bhatia</a>. This \r\n              iteration contains additional development work and creative consultation from <a href=\"https://becfary.com/\" target=\"_blank\" rel=\"noreferrer\">\r\n              BF/Local Time</a> and was commissioned as part of <a href=\"https://bleedonline.net/\" target=\"_blank\" rel=\"noreferrer\">BLEED</a>. \r\n              Additional credits can be viewed in the site's head tag.\r\n              <br />\r\n              <br />\r\n              We welcome your thoughts, feedback, or questions - please send them through to room2fm@gmail.com\r\n            </span>\r\n          </div>\r\n      </div>        \r\n      <button id=\"modal-continue-button\" onClick={() => props.toggleModal()}> Enter </button>\r\n    </div>,\r\n\r\n    // modal for welcome to country\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-text-wrapper\" className=\"modal-text-wrapper-aoc\" style={{textAlign: 'center'}}>\r\n          <div id=\"modal-text\" style={{alignItems: 'center', justifyContent: 'space-around'}}>\r\n            <p id=\"aoc-text\">\r\n              This website was produced and is maintained on the unceded territory of the Wurundjeri Woi Wurrung and Bunurong Boon \r\n              Wurrung peoples of the Eastern Kulin Nation, the Traditional Custodians of the land. We recognise their ongoing legacy \r\n              of connection to land, waters and culture and pay respect to their Elders past and present. We extend this respect to \r\n              all other First Nations peoples and Traditional Custodians whose land the material pathways that allow our digital \r\n              connectivity are built upon.\r\n            </p>\r\n            \r\n            <WhereAreYou />\r\n       \r\n          </div>          \r\n      </div>\r\n    </div>\r\n  ]\r\n  let mobileModalPages = [\r\n    //page 1 Logo - no continue button on this one if the site needs to get closed\r\n    <div id=\"logo-wrapper\" style={{justifyContent: 'center', gap: '6rem'}}>\r\n      <div id=\"text-logo\">\r\n        <img src=\"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/room2-logo-cap.PNG\" alt=\"room2 logo\" style={{width: '100%'}}></img>            \r\n      </div>\r\n      <p style={{textAlign: 'centre', color: 'white', fontSize: '1.4rem', padding: '0 2rem'}}>\r\n        On Sunday 25th from 2-7pm AEST room2 will be live at this site, showing with 4 new collaborative works, online at this url on a desktop or laptop computer and in-person at Arts House. More information here: <a href=\"https://www.artshouse.com.au/events/room2-live/\" target=\"_blank\" rel=\"noreferrer\">https://www.artshouse.com.au/events/room2-live/</a>\r\n      </p>\r\n    </div>,\r\n  \r\n    //page 2 AOC\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-text-wrapper\" className=\"modal-text-wrapper-aoc\" style={{textAlign: 'center'}}>\r\n          <div id=\"modal-text\" style={{alignItems: 'center', justifyContent: 'space-around'}}>\r\n            <p id=\"aoc-text\">\r\n            This website was produced and is maintained on the unceded territory of the Wurundjeri Woi Wurrung and Bunurong Boon \r\n              Wurrung peoples of the Eastern Kulin Nation, the Traditional Custodians of the land. We recognise their ongoing legacy \r\n              of connection to land, waters and culture and pay respect to their Elders past and present. We extend this respect to \r\n              all other First Nations peoples and Traditional Custodians whose land the material pathways that allow our digital \r\n              connectivity are built upon.\r\n            </p>           \r\n          </div>          \r\n      </div>\r\n      <button id=\"modal-continue-button\" onClick={() => nextModalPage()}> Continue </button>\r\n    </div>,\r\n  \r\n    //page 4 Instructions\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-title-wrapper\">\r\n        <div id=\"modal-title\">\r\n          Welcome to room2.fm live\r\n        </div>\r\n        <hr />\r\n      </div>\r\n      <div id=\"modal-text-wrapper\">\r\n          <div id=\"modal-text\">\r\n            <p>\r\n              This mobile version of room2.fm is for use at the live event hosted at Arts House. If you are logging in remotely \r\n              please do so on a desktop or laptop computer for the full room2 experience.\r\n            </p>\r\n            <p>\r\n              During room2 prompts will periodically come up on the projection screen and your mobile device. You can share your response to the prompts, music \r\n              and visuals by either drawing or writing.\r\n            </p>\r\n          </div>\r\n      </div>        \r\n      <button id=\"modal-continue-button\" onClick={() => props.toggleModal()}> Enter </button>\r\n    </div>\r\n  ]\r\n\r\n  return (\r\n    <div id=\"AOC-modal\"\r\n         className=\"ModalWrapper\"\r\n         aria-labelledby=\"modal-title\"\r\n         aria-hidden=\"false\" >\r\n\r\n      <div data-a11y-dialog-hide className=\"ModalOverlay\" ></div>\r\n\r\n      <div role=\"document\" className=\"ModalBox\">\r\n        {props.mobile\r\n          ? <>{mobileModalPages[props.currentModalPage]}</>\r\n          : <>\r\n            {modalPages[props.currentModalPage]}\r\n          </>}\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  function nextModalPage(){\r\n    props.setCurrentModalPage(props.currentModalPage + 1);\r\n    document.getElementById(\"modal-text-wrapper\").scrollTop = 0;\r\n    window.removeEventListener(\"keydown\", secretKey);\r\n  }\r\n\r\n  function secretKey(e){\r\n    if(props.currentModalPage === 0){\r\n      switch (e.key) {\r\n        case \"!\": \r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        default:\r\n          return; // Quit when this doesn't handle the key event.\r\n      }\r\n    }\r\n    \r\n  }\r\n}","import React from 'react';\r\n\r\nexport default function Marquee (props){\r\n  return (\r\n    <div id=\"top-banner-wrapper\">\r\n      <img id=\"cd-gif\" src={require('../content/media/slowdiscpixel.gif').default} alt=\"spinning cd gif\" />  \r\n      <div id=\"marquee-wrapper\">\r\n        <div style={{width: '100%'}}>\r\n          <div id=\"marquee-text-scroll\">\r\n              <span className=\"MarqueeEmoji\"> ~(˘▾˘~) </span>\r\n              ~ ~ ~ room2.fm is live \r\n              <span className=\"MarqueeEmoji\">(~˘▾˘)~</span> \r\n              {\"NOW PLAYING: \" + props.currentArtist} \r\n              <span className=\"MarqueeEmoji\"> ~(˘▾˘~) </span>\r\n              ~ ~ ~ room2.fm is live \r\n              <span className=\"MarqueeEmoji\">(~˘▾˘)~</span> \r\n              {\"NOW PLAYING: \" + props.currentArtist} \r\n              <span className=\"MarqueeEmoji\"> ~(˘▾˘~) </span>\r\n              ~ ~ ~ room2.fm is live \r\n              <span className=\"MarqueeEmoji\">(~˘▾˘)~</span> \r\n              {\"NOW PLAYING: \" + props.currentArtist}\r\n          </div>\r\n        </div>\r\n          \r\n      </div>            \r\n    </div>\r\n  )\r\n}","import React, { useEffect } from 'react';\r\n\r\nexport default function DrawingTools(props){\r\n\r\n  useEffect(() => {\r\n    if(props.mobile){\r\n      props.setCurrentColours([props.colours[2]], \"#000000\", \"#000000\")\r\n    }\r\n  }, []);\r\n\r\n  return (<>\r\n    {props.mobile\r\n      ?<div id=\"mobile-drawing-tools-wrapper\">\r\n        <div id=\"brush-size-wrapper\">\r\n          \r\n          <div id=\"brush-size-slider-wrapper\">\r\n            <span style={{position: 'relative', top: '-0.1rem'}}>-</span>\r\n            <input type=\"range\" id=\"brush-size-slider\" name=\"brush-size-slider\" min=\"2\" max=\"60\" defaultValue=\"8\" onInput={e => props.setBrushSize(e.target.value)} />\r\n            <span style={{position: 'relative', top: '-0.1rem'}}>+</span>\r\n          </div>\r\n          <span>Brush Size</span>\r\n        </div>\r\n        <div id=\"drawing-buttons-wrapper\">\r\n          <button id=\"erase-brush-button\" className=\"DrawingUIButton\" onClick={() => props.toggleEraser()}> <span className=\"DrawingUIButtonLabel\">ERASER</span> <div id=\"eraser-icon\"><EraserIcon strokeColour=\"white\" /></div></button>\r\n          <button id=\"undo-button\" className=\"DrawingUIButton\" onClick={props.undoDrawing}> <span className=\"DrawingUIButtonLabel\">UNDO</span> <div id=\"undo-icon\"><UndoIcon strokeColour=\"white\" /></div></button>\r\n          <button id=\"redo-button\" className=\"DrawingUIButton\" onClick={props.redoDrawing}> <span className=\"DrawingUIButtonLabel\">REDO</span> <div id=\"redo-icon\"><RedoIcon strokeColour=\"white\" /></div></button>\r\n          <span id=\"brush-col-label\">Brush<br />Colour</span>\r\n          <input type=\"color\" id=\"mobile-col-select\" className=\"DrawingUIButton\" name=\"col1Select\" defaultValue={props.colours[2]} onInput={e => props.setCurrentColours([e.target.value], \"#000000\", \"#000000\")} />              \r\n        </div>        \r\n      </div>\r\n      :<>\r\n        <div id=\"drawing-buttons-wrapper\">\r\n          <button id=\"increase-brush-button\" className=\"DrawingUIButton\" onClick={() => {if(props.brushSize < 60){ props.setBrushSize(props.brushSize + 2 ) }}}> BRUSH + <div id=\"brush-up-icon\"><BrushUpIcon strokeColour=\"black\" /></div></button>\r\n          <button id=\"decrease-brush-button\" className=\"DrawingUIButton\" onClick={() => {if(props.brushSize > 2){ props.setBrushSize(props.brushSize - 2 ) }}}> BRUSH - <div id=\"brush-down-icon\"><BrushDownIcon strokeColour=\"black\" /></div></button>\r\n          <button id=\"erase-brush-button\" className=\"DrawingUIButton\" onClick={() => props.toggleEraser()}> <span>ERASER</span> <div id=\"eraser-icon\"><EraserIcon strokeColour=\"black\" /></div></button>\r\n          <button id=\"undo-button\" className=\"DrawingUIButton\" onClick={props.undoDrawing}> <span>UNDO</span> <div id=\"undo-icon\"><UndoIcon strokeColour=\"black\" /></div></button>\r\n          <button id=\"redo-button\" className=\"DrawingUIButton\" onClick={props.redoDrawing}> <span>REDO</span> <div id=\"redo-icon\"><RedoIcon strokeColour=\"black\" /></div></button>              \r\n        </div>\r\n      </>\r\n    }    \r\n    </>)\r\n}\r\nfunction UndoIcon(props){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      className=\"AudioPlayerIcon\">\r\n        <defs>\r\n          <marker id=\"arrowhead\" markerWidth=\"5\" markerHeight=\"5\" strokeWidth=\"0\" fill={props.strokeColour}\r\n          refX=\"0\" refY=\"2.5\" orient=\"auto\">\r\n            <polygon points=\"0 0, 5 2.5, 0 5\" />\r\n          </marker>\r\n        </defs>\r\n        <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"6\" stroke={props.strokeColour} markerEnd=\"url(#arrowhead)\"\r\n              d=\" M 30,80\r\n                  L 65,80\r\n                  A 15 15 0 1 0 65,28\r\n                  L 30,28\r\n                  \" />\r\n    </svg>\r\n  )\r\n}\r\nfunction RedoIcon(props){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      className=\"AudioPlayerIcon\">\r\n        <defs>\r\n          <marker id=\"arrowhead2\" markerWidth=\"5\" markerHeight=\"5\" strokeWidth=\"0\" fill={props.strokeColour}\r\n          refX=\"0\" refY=\"2.5\" orient=\"auto\">\r\n            <polygon points=\"0 0, 5 2.5, 0 5\" />\r\n          </marker>\r\n        </defs>\r\n        <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"6\" stroke={props.strokeColour} markerEnd=\"url(#arrowhead2)\"\r\n              d=\" M 70,80\r\n                  L 35,80\r\n                  A 15 15 0 0 1 35,28\r\n                  L 70,28\r\n                  \" />\r\n    </svg>\r\n  )\r\n}\r\nfunction EraserIcon(props){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      className=\"AudioPlayerIcon\"\r\n      fill='none'\r\n      stroke={props.strokeColour}\r\n      strokeWidth='3'\r\n      >\r\n        <rect x=\"10\" y=\"60\" width=\"40\" height=\"20\" />\r\n        <polygon points=\"10,60 50,60 85,20 45,20\" fill=\"yellow\" strokeLinejoin=\"bevel\" />\r\n        <polygon points=\"50,80 50,60 85,20 85,40\" fill=\"yellow\" strokeLinejoin=\"bevel\" />\r\n      \r\n    </svg>\r\n  )\r\n}\r\nfunction BrushUpIcon(props){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      className=\"AudioPlayerIcon\"\r\n      fill='none'\r\n      stroke={props.strokeColour}\r\n      strokeWidth='4'\r\n      strokeLinejoin=\"round\"\r\n      >\r\n        <path fill=\"none\" strokeLinecap=\"round\"\r\n              d=\"M 15,90 L 65,90 L 65,55 L 25,55 L 25,90 L 35,90 L 35,75 M 45,90 L 45,75\" />\r\n        <polygon points=\"25,55 35,45 35,15 40,10 50,10 55,15 55,45 65,55\" fill=\"yellow\" />\r\n        <path fill=\"none\" strokeLinecap=\"round\"\r\n              d=\"M 65,25 L 81,25 M 73,17 L 73,33\" />\r\n    </svg>\r\n  )\r\n}\r\nfunction BrushDownIcon(props){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      className=\"AudioPlayerIcon\"\r\n      fill='none'\r\n      stroke={props.strokeColour}\r\n      strokeWidth='4'\r\n      strokeLinejoin=\"round\"\r\n      >\r\n        <path fill=\"none\" strokeLinecap=\"round\"\r\n              d=\"M 15,90 L 65,90 L 65,55 L 25,55 L 25,90 L 35,90 L 35,75 M 45,90 L 45,75\" />\r\n        <polygon points=\"25,55 35,45 35,15 40,10 50,10 55,15 55,45 65,55\" fill=\"yellow\" />\r\n        <path fill=\"none\" strokeLinecap=\"round\"\r\n              d=\"M 65,25 L 81,25\" />\r\n    </svg>\r\n  )\r\n}\r\n\r\n","import React, { useEffect } from 'react'\r\n\r\nexport default function SettingsMenu(props) {\r\n\r\n  useEffect(() => {\r\n    document.getElementById(\"settings-menu-wrapper\").addEventListener(\"mouseleave\", () => {\r\n      setDisplay(\"settings-dropdown\", \"none\");\r\n    });\r\n  },[]);\r\n\r\n  return (\r\n    <div id=\"settings-menu-wrapper\" className='Collider'>\r\n      <button className=\"SettingsMenuButton\" id=\"settings-menu-button\" onClick={() => {setDisplay(\"settings-dropdown\", \"flex\")}}>MENU</button>\r\n      <div id=\"settings-dropdown\">\r\n        <button className=\"SettingsMenuButton\" id=\"settings-info-button\" onClick={() => props.toggleModal()}>INFO</button>\r\n        <button className=\"SettingsMenuButton\" id=\"settings-focus-button\" onClick={() => props.toggleFocus()}>FOCUS MODE</button>   \r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n  function setDisplay(id, displayMode){\r\n    document.getElementById(id).style.display = displayMode;\r\n  }\r\n  function changeActiveButton(e){\r\n    Array.from(document.getElementsByClassName(\"SettingsMenuButton\")).forEach(button => {\r\n      button.classList.remove(\"Active\");\r\n    });\r\n    e.target.classList.add(\"Active\");\r\n    setDisplay(\"graphics-dropdown\", \"none\");\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { Shaders, Node, GLSL, NearestCopy} from \"gl-react\";\r\nimport { Surface } from \"gl-react-dom\";\r\n\r\nexport const shaders = Shaders.create({\r\n  onecolour: {\r\n    frag: GLSL`\r\n    #define pi 3.14159265359\r\n    #define twopi 6.28318530718\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    uniform float tideUp;\r\n    uniform float tideHeight;\r\n    const vec3 rcol = vec3(0.498,0.498,0.475);\r\n    const vec3 lcol = vec3(0.267,0.222,0.502);\r\n    const vec3 ycol = vec3(0.808,0.863,0.773);\r\n    \r\n    mat2 rotate2d(float _angle){\r\n      return mat2(cos(_angle),-sin(_angle),\r\n                  sin(_angle),cos(_angle));\r\n    }\r\n    float polygon(vec2 p, float s, float stimer)\r\n    {\r\n        p *= rotate2d(stimer);\r\n        float a = ceil(s*(atan(-p.y, -p.x)/pi+1.)*.5);\r\n        float n = 2.*pi/s;\r\n        float t = n*a-n*.5;\r\n        return mix(dot(p, vec2(cos(t), sin(t))), length(p), .3);\r\n    }\r\n    vec2 hash12(vec2 p){\r\n      return vec2(fract(sin(dot(p, vec2(92.51, 65.19)))*9219.32),\r\n                fract(sin(dot(p, vec2(23.34, 15.28)))*6485.32));\r\n    }\r\n    \r\n\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      vec2 st = ((gl_FragCoord.xy/res) - vec2(.5,.5));\r\n      st *= 6.;\r\n\r\n      vec2 i_st = floor(st);\r\n      vec2 f_st = fract(st);\r\n\r\n      float minDist = .6;\r\n      float minDist2 = .6;\r\n      float stimer = timer *.2;\r\n\r\n      for (int y= -1; y <= 1; y++) {\r\n          for (int x= -1; x <= 1; x++) {\r\n              // Neighbor place in the grid\r\n              vec2 neighbor = vec2(float(x),float(y));\r\n\r\n              // Random position from current + neighbor place in the grid\r\n              vec2 point = hash12(i_st + neighbor);\r\n\r\n              // Animate the point\r\n              point = 0.5 + 0.5*sin(stimer + 6.2831*point);\r\n\r\n              // Vector between the pixel and the point\r\n              vec2 diff = neighbor + point - f_st;\r\n\r\n              // Distance to the point\r\n              float dist = polygon(neighbor+point - f_st, 3., stimer);\r\n              float dist2 = polygon(neighbor+point - f_st, 5., stimer);\r\n\r\n              // Keep the closer distance\r\n              minDist = min(minDist, dist*(sin(stimer)+1.)*.5);\r\n              minDist2 = min(minDist2, dist2);\r\n          }\r\n      }\r\n      //vec3 comp = vec3(minDist);\r\n      vec3 comp = mix(lcol, rcol, minDist);\r\n      comp = mix(ycol, comp, minDist2);\r\n      gl_FragColor = vec4(comp, 1.0);\r\n    }`\r\n}});\r\n\r\nexport class GLVis extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { timer: 0 };\r\n  }\r\n  render() {\r\n    return <div id=\"gl-window\">\r\n    <Surface width={this.props.width*0.75} height={this.props.height*0.68}>\r\n\r\n      <NearestCopy>\r\n        <Node shader={shaders.onecolour} ignoreUnusedUniforms uniforms={{timer: this.state.timer, width: this.props.width*0.075, height: this.props.width*0.068}} width={this.props.width*0.075} height={this.props.height*0.068} /> \r\n      </NearestCopy>\r\n                              \r\n    </Surface>\r\n    </div>;\r\n  }\r\n  componentDidMount() {    \r\n    this.startTimer();\r\n  }\r\n  componentWillUnmount() {    \r\n    this.stopTimer();\r\n  }\r\n  startTimer() {\r\n    this.myInterval = setInterval(() => {\r\n      this.setState(prevState =>({\r\n        timer: prevState.timer + 0.1\r\n      }))\r\n    }, 100);     \r\n  }\r\n  stopTimer() {\r\n    clearInterval(this.myInterval);\r\n  }\r\n}\r\n\r\nexport default GLVis;\r\n","import React, { useEffect, useRef, useState } from 'react'\r\n\r\nexport default function ResponseDisplay(props) {\r\n  \r\n  //length between displaying the responses\r\n  const responseLoopDelay = 1000;\r\n\r\n  // time for fade in/out and for how long the response is visible in ms\r\n  const responseFadeTime = 1500;\r\n  const responseHangTime = 15000;\r\n\r\n  const [responsesToDisplay, setResponsesToDisplay] = useState([]);\r\n  const responsesToDisplayRef = useRef();\r\n  useEffect(() => {\r\n    responsesToDisplayRef.current = responsesToDisplay;\r\n    displayNextResponse();\r\n  }, [responsesToDisplay]);\r\n\r\n  const displaysOnScreen = 3;\r\n\r\n  // when new response data arrives add it to the responsesToDisplay List\r\n  useEffect(() => {\r\n    if(props.responseData.length > 0){\r\n      let newResponseList = responsesToDisplayRef.current.concat(props.responseData);\r\n      setResponsesToDisplay(newResponseList);\r\n    }\r\n  }, [props.responseData]);\r\n\r\n  return (\r\n    <div id=\"response-wrapper\"></div>\r\n  )\r\n\r\n  function displayNextResponse(){\r\n    if(document.getElementsByClassName(\"Response\").length < displaysOnScreen && responsesToDisplayRef.current.length){\r\n      let newResponseList = responsesToDisplayRef.current;\r\n      let newResponse = newResponseList.shift();\r\n      if(newResponse[1] === \"text\"){\r\n        createTextResponseDisplay(newResponse[0]);\r\n        setResponsesToDisplay(newResponseList);\r\n      } else if(newResponse[1] === \"image\"){\r\n        createImageResponseDisplay(newResponse[0]);\r\n        setResponsesToDisplay(newResponseList);\r\n      }\r\n      if(newResponseList.length){\r\n        displayNextResponse();\r\n      }      \r\n    } else if (document.getElementsByClassName(\"Response\").length >= displaysOnScreen) {\r\n      setTimeout(displayNextResponse, responseLoopDelay);\r\n    }\r\n  }\r\n\r\n  function createImageResponseDisplay(imageResponse){\r\n    let newResponseBox = document.createElement('img');\r\n    let collision = false;\r\n    newResponseBox.classList.add('Response');\r\n    newResponseBox.classList.add('ImageResponseBox');\r\n    let xRandom = Math.random();\r\n    let yRandom = Math.random();\r\n    newResponseBox.addEventListener(\"load\", (e) => {\r\n      // add to the page\r\n      document.getElementById('response-wrapper').appendChild(newResponseBox);\r\n      let responseBoxDimensions = newResponseBox.getBoundingClientRect();\r\n      newResponseBox.style.left = (80 * xRandom) + \"%\";\r\n      newResponseBox.style.top = ((100 - (props.height / responseBoxDimensions.height)) * yRandom) + \"%\";\r\n      if(props.colliding){\r\n        let colliderArray = Array.from(document.getElementsByClassName(\"Collider\"));\r\n        for (let i = 0; i < colliderArray.length; i++) {\r\n          if(detect2DBoxCollision(newResponseBox.getBoundingClientRect(), colliderArray[i].getBoundingClientRect()) && !collision){\r\n            collision = true;\r\n          }\r\n        }\r\n        if(collision){\r\n          newResponseBox.remove();\r\n          window.requestAnimationFrame(() => createImageResponseDisplay(imageResponse));\r\n        } else {\r\n          newResponseBox.classList.add(\"Collider\");\r\n          responseFadeInOut(newResponseBox);\r\n        }\r\n      } else {\r\n        responseFadeInOut(newResponseBox);\r\n      }\r\n       \r\n    });\r\n    newResponseBox.src = 'https://humstore.thelongesthum.world/'+imageResponse;\r\n  }\r\n\r\n  function createTextResponseDisplay(textResponse){\r\n    let newResponseBox = document.createElement('p');\r\n    let collision = false;\r\n    newResponseBox.innerHTML = textResponse;\r\n    newResponseBox.classList.add('Response');\r\n    newResponseBox.classList.add('TextResponseBox');\r\n    let xRandom = Math.random();\r\n    let yRandom = Math.random();\r\n    document.getElementById('response-wrapper').appendChild(newResponseBox);\r\n    let responseBoxDimensions = newResponseBox.getBoundingClientRect();\r\n    newResponseBox.style.left = (80 * xRandom) + \"%\";\r\n    newResponseBox.style.top = ((100 - (props.height / responseBoxDimensions.height)) * yRandom) + \"%\";\r\n    if(props.colliding){\r\n      let colliderArray = Array.from(document.getElementsByClassName(\"Collider\"));\r\n      for (let i = 0; i < colliderArray.length; i++) {\r\n        if(detect2DBoxCollision(newResponseBox.getBoundingClientRect(), colliderArray[i].getBoundingClientRect()) && !collision){\r\n          collision = true;\r\n        }\r\n      }\r\n      if(collision){\r\n        newResponseBox.remove();\r\n        window.requestAnimationFrame(() => createTextResponseDisplay(textResponse));\r\n      } else {\r\n        newResponseBox.classList.add(\"Collider\");\r\n        responseFadeInOut(newResponseBox);\r\n      } \r\n    } else {\r\n      responseFadeInOut(newResponseBox);\r\n    }\r\n    \r\n  }\r\n\r\n  function responseFadeInOut(responseElement){\r\n    responseElement.style.transition = responseFadeTime + \"ms\";\r\n    setTimeout(() =>{\r\n      responseElement.style.opacity = 1;\r\n      setTimeout(() => {responseElement.style.opacity = 0;}, responseHangTime);\r\n      setTimeout(() => {responseElement.remove(); displayNextResponse();}, responseFadeTime + responseHangTime + 100);\r\n    }, 100);\r\n  }\r\n}\r\n\r\nfunction detect2DBoxCollision(box1, box2){\r\n  let collision = false;\r\n  if(box1.left < box2.right &&\r\n     box1.right > box2.left &&\r\n     box1.top < box2.bottom &&\r\n     box1.bottom > box2.top) {\r\n      collision = true;\r\n    }\r\n  return collision;\r\n}\r\n","import React from 'react';\r\n\r\nexport const InfoOverlay = (props) => {\r\n  return (\r\n    <div id=\"info-overlay-wrapper\" onClick={props.overlayToggle}>\r\n      <span id=\"info-overlay-close\">&times;</span>\r\n      <span id=\"info-overlay-proceed\" className=\"InfoOverlayText\">CLICK ANYWHERE TO PROCEED</span>\r\n      <span id=\"info-overlay-response-label\" className=\"InfoOverlayText\">↑&nbsp; &nbsp; &nbsp;&nbsp;↑<br/>CHOOSE RESPONSE TYPE<br /><br />← RESPOND TO PROMPTS HERE →</span>\r\n      <span id=\"info-overlay-colour-select-label\" className=\"InfoOverlayText\">COLOUR<br/>SELECTION<br/>↓</span>\r\n      <span id=\"info-overlay-mute-label\" className=\"InfoOverlayText\">← MUTE</span>\r\n      <span id=\"info-overlay-volume-label\" className=\"InfoOverlayText\">← VOLUME</span>\r\n    </div>\r\n  )\r\n};","import React, { useEffect } from 'react';\r\n\r\nexport default function ColourPicker(props){\r\n\r\n  useEffect(() => {\r\n    document.getElementById('col1Select').addEventListener(\"input\", colourInputChange, false);\r\n    document.getElementById('col2Select').addEventListener(\"input\", colourInputChange, false);\r\n    document.getElementById('col3Select').addEventListener(\"input\", colourInputChange, false);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div id=\"col-select-wrapper\">\r\n        <input type=\"color\" id=\"col1Select\" className=\"col-select first\" name=\"col1Select\" defaultValue={props.colours[0]} />\r\n        <input type=\"color\" id=\"col2Select\" className=\"col-select second\" name=\"col23Select\" defaultValue={props.colours[1]} />\r\n        <input type=\"color\" id=\"col3Select\" className=\"col-select third\" name=\"col33Select\" defaultValue={props.colours[2]} />\r\n      </div>\r\n      <div id=\"col-swap-wrapper\">\r\n        <span id=\"word-change\">CHANGE</span>\r\n        <button id=\"col-swap-button\" onClick={() => colourSwap()}>\r\n          <SwapIcon />\r\n        </button>        \r\n        <span id=\"word-colour\">COLOUR</span>\r\n      </div>\r\n    </>      \r\n  )\r\n\r\n  function colourSwap(e){\r\n    let selectors = document.getElementsByClassName(\"col-select\");\r\n    for (let i = 0; i < 3; i++){\r\n      let cl = selectors[i].classList;\r\n      switch(true){\r\n        case cl.contains('first'):\r\n        cl.remove('first');\r\n        cl.add('third');\r\n        break;\r\n        case cl.contains('second'):\r\n        cl.remove('second');\r\n        cl.add('first');\r\n        break;\r\n        case cl.contains('third'):\r\n        cl.remove('third');\r\n        cl.add('second');\r\n        break;\r\n        default:\r\n        break;\r\n      }\r\n    }\r\n    props.setSelectedColour(oldCol => {\r\n      if(oldCol < 2){ return oldCol +1; }\r\n      else { return 0; }\r\n    });\r\n  }\r\n  function colourInputChange(e){    \r\n    let colNum = parseInt(e.target.id.charAt(3));\r\n    document.documentElement.style.setProperty('--comp-col-0'+colNum, e.target.value);\r\n    let newColours = props.colours;\r\n    newColours[colNum - 1] = e.target.value;\r\n    props.setCurrentColours(newColours);\r\n    props.updateCanvasBrush();\r\n  }\r\n}\r\n\r\n/* expecting a 5:1 aspect ratio */\r\nfunction SwapIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      strokeLinejoin=\"round\"\r\n      xmlns=\"http://www.w3.org/2000/svg\" >\r\n        {/* Arrow Head */}\r\n        <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"6\" refX=\"7\" refY=\"3\" orient=\"auto\">\r\n          <polygon points=\"0 0, 8 3.5, 0 6\" />\r\n        </marker>\r\n        <path fill=\"none\" strokeWidth=\"6\" markerEnd=\"url(#arrowhead)\" \r\n              d=\" M 25, 50\r\n                  L 5,18.4 95,18.4 50,76.6\r\n                  \" />\r\n    </svg>\r\n  )\r\n}\r\n\r\n","import React, { useState } from 'react';\r\nimport videojs from 'video.js'\r\nimport 'video.js/dist/video-js.css';\r\nimport Sketch from 'react-p5';\r\nimport 'p5/lib/addons/p5.sound';\r\n\r\nexport default function VideoPlayer(props){\r\n  const videoRef = React.useRef(null);\r\n  const playerRef = React.useRef(null);\r\n  const [fft, setFft] = useState(null);\r\n  const {options, onReady} = props;\r\n\r\n  let audioContext, audioSource;\r\n\r\n  const setup = (p5, canvasParentRef) => {\r\n    p5.createCanvas(0, 0).parent(canvasParentRef);\r\n    audioContext = p5.getAudioContext();\r\n    props.setAudioCtx(audioContext);\r\n    audioSource = audioContext.createMediaElementSource(document.getElementById(\"video-stream-player\"));\r\n    let newGain = audioContext.createGain();\r\n    props.setAudioGain(newGain);\r\n    audioSource.connect(newGain);\r\n    newGain.connect(audioContext.destination);\r\n    let newFft = new p5.constructor.FFT();\r\n    newFft.setInput(audioSource);\r\n    setFft(newFft);\r\n    const videoElement = videoRef.current;\r\n    const player = playerRef.current = videojs(videoElement, options, () => {\r\n      onReady && onReady(player);\r\n    });\r\n  }\r\n  \r\n  const draw = p5 => {\r\n    if(props.analysing === true){\r\n      let spectrum = fft.analyze(512);\r\n      let mid = remapEnergy(fft.getEnergy(140,400),175,184);\r\n      let treble = remapEnergy(fft.getEnergy(400,14000),33,43);\r\n      document.documentElement.style.setProperty(\"--font-var-two\", mid);\r\n      document.documentElement.style.setProperty(\"--font-var-three\", treble);\r\n    }    \r\n  }\r\n\r\n  function remapEnergy(energyInput, floor, ceiling){\r\n    // this expects the 0 - 255 range of the getEnergy\r\n    // return floor + (ceiling - floor) * energyInput/255;\r\n    return (energyInput - floor)/(ceiling - floor) * 100;\r\n  }\r\n\r\n  // wrap the player in a div with a `data-vjs-player` attribute\r\n  // so videojs won't create additional wrapper in the DOM\r\n  // see https://github.com/videojs/video.js/pull/3856\r\n    return (\r\n      <div id=\"video-stream-wrapper\">\r\n        <div data-vjs-player>\r\n          <video ref={videoRef} className=\"video-js vjs-fill\" id=\"video-stream-player\"></video>\r\n          <Sketch setup={setup} draw={draw} />\r\n        </div>\r\n      </div>\r\n    )\r\n}","import React from 'react';\r\nimport VideoPlayer from './videoPlayer';\r\n\r\nconst videoJsOptions = {\r\n  autoplay: true,\r\n  controls: false,\r\n  sources: [{\r\n    src: 'https://room2service-aueas.streaming.media.azure.net/10ce3025-a425-4d1c-85fb-23324e70de9a/53cd404a-4808-4cd3-bd1b-d749e8e633a7.ism/manifest(format=m3u8-cmaf)',\r\n    type: 'application/x-mpegURL'\r\n  }],\r\n  fill: true,\r\n  pictureInPictureToggle: false\r\n}\r\n\r\nexport default function VideoStreamPlayer(props){\r\n  const playerRef = React.useRef(null);\r\n  const handlePlayerReady = (player) => {\r\n    playerRef.current = player;\r\n  };\r\n  return (\r\n    <>\r\n      <VideoPlayer options={videoJsOptions} onReady={handlePlayerReady} \r\n        analysing={props.analysing}\r\n        setAudioGain={props.setAudioGain}\r\n        setAudioCtx={props.setAudioCtx} />\r\n    </>\r\n  )\r\n}\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport AudioControls from './audioControls';\r\nimport DrawingCanvas from './drawingCanvas';\r\nimport IntroModal from './introModal';\r\nimport Marquee from './marquee';\r\nimport DrawingTools from './drawingTools';\r\nimport SettingsMenu from './settingsMenu';\r\nimport GLVis from './glVis';\r\nimport ResponseDisplay from './responseDisplay';\r\nimport { InfoOverlay } from './infoOverlay';\r\nimport ColourPicker from './colourPicker';\r\nimport VideoStreamPlayer from './videoStreamPlayer';\r\n\r\nexport default function DesktopApp(props){\r\n\r\n  const [currentModalPage, setCurrentModalPage] = useState(0);\r\n  const [showOverlay, setShowOverlay] = useState(true);\r\n\r\n  return (\r\n    <div id=\"desktop-wrapper\">\r\n      {props.modalIsOpen\r\n        ? <IntroModal \r\n            mobile={props.mobile}\r\n            setIntroModal={props.setIntroModal}\r\n            currentModalPage={currentModalPage}\r\n            setCurrentModalPage={setCurrentModalPage}\r\n            toggleModal={props.toggleModal} />\r\n        : <>\r\n            <div id=\"room2-wrapper\">\r\n\r\n              {/* Top Banner */}\r\n              <Marquee\r\n                currentArtist={props.currentArtist} />\r\n\r\n              {/* Visuals */} \r\n              <div id=\"vis-wrapper\">\r\n                {/* Background Visuals */} \r\n                <div id=\"bg-vis-wrapper\">\r\n                  {/*  */}\r\n                  <VideoStreamPlayer\r\n                    analysing={props.analysing}\r\n                    setAudioCtx={props.setAudioCtx}\r\n                    setAudioGain={props.setAudioGain}\r\n                    />\r\n                    {props.analysing &&\r\n                      <div id=\"gl-prompt-wrapper\">\r\n                        <GLVis \r\n                          height={props.height}\r\n                          width={props.width}\r\n                        />\r\n                        {/* <p id=\"gl-prompt\">{props.currentPrompt}</p> */}\r\n                      </div>\r\n                    }\r\n                  \r\n                    \r\n                  \r\n                </div>\r\n                {/* Response Overlay */}\r\n                <ResponseDisplay \r\n                  responseData={props.responseData}\r\n                  height={props.height}\r\n                  width={props.width}\r\n                  colliding={props.colliding} />\r\n                {/* Menu and Prompt Overlay */}\r\n                <div id=\"menu-prompt-wrapper\">\r\n                  {/* Settings Menu Overlay */}\r\n                  <SettingsMenu\r\n                    toggleFocus={props.toggleFocus} \r\n                    toggleModal={props.toggleModal} />\r\n                  {/* Prompt and Input Selection */}\r\n                  <div id=\"current-prompt-wrapper\" className=\"Collider PromptCycle\">\r\n                    <div id=\"prompt-end-timer-wrapper\">\r\n                      <div id=\"prompt-end-timer\" />\r\n                      <div id=\"prompt-end-timer-overlay\" />\r\n                    </div>           \r\n                    <div id=\"current-prompt\">\r\n                      {!props.colliding\r\n                      ?<pre>{props.currentPrompt}</pre>\r\n                      :<>{props.currentPrompt}</>}                      \r\n                    </div>           \r\n                    <div id=\"input-select-wrapper\">\r\n                      <span id=\"input-select\">I would like to&nbsp;\r\n                      <button id=\"draw-input-select\" className=\"InputSelectButton\" onClick={() => props.setInput(true)}>draw</button>&nbsp;/&nbsp;\r\n                      <button id=\"text-input-select\" className=\"InputSelectButton ActiveInputButton\" onClick={() => props.setInput(false)}>write</button>\r\n                      &nbsp;a response</span>\r\n                    </div>\r\n                  </div>\r\n                </div>                \r\n              </div>\r\n\r\n              {/* Interface */}\r\n              <div id=\"interface-wrapper\">\r\n                {/* Left Side Drawing Tools */}\r\n                <DrawingTools\r\n                  undoDrawing={props.undoDrawing}\r\n                  redoDrawing={props.redoDrawing}\r\n                  toggleEraser={props.toggleEraser}\r\n                  colours={props.colours}\r\n                  changeColourOrder={props.changeColourOrder}\r\n                  changeColours={props.changeColours}\r\n                  brushSize={props.brushSize}\r\n                  setBrushSize={props.setBrushSize} /> \r\n                {/* Input Section */}\r\n                <div id=\"input-wrapper\">\r\n                  {/* Writing Section */}            \r\n                  <textarea id=\"text-input\" name=\"text based prompt response\" placeholder=\"Please type your response here...\" />\r\n                  {/* Drawing Section */} \r\n                  <DrawingCanvas \r\n                    brushColour={props.colours[0]}\r\n                    brushSize={props.brushSize}\r\n                    setDrawingCanvas={props.setDrawingCanvas}\r\n                    setCurrentCanvasState={props.setCurrentCanvasState}\r\n                    setIsDrawing={props.setIsDrawing} />\r\n                </div>             \r\n                {/* Right UI Panel */}\r\n                <div id=\"right-ui-wrapper\">\r\n                  {/* Colour Picker */}\r\n                  <div id=\"col-pick-wrapper\">                \r\n                    <ColourPicker \r\n                      colours={props.colours}\r\n                      updateCanvasBrush={props.updateCanvasBrush}\r\n                      setSelectedColour={props.setSelectedColour}\r\n                      setCurrentColours={props.setCurrentColours} />              \r\n                  </div>\r\n                  {/* Submit Response Button */}             \r\n                  <button id=\"response-submit-button\" onClick={props.submitResponse}>\r\n                    <span>SUBMIT RESPONSE</span>                \r\n                  </button>\r\n                  {/* Audio Settings */}\r\n                  <AudioControls\r\n                    audioCtx={props.audioCtx}\r\n                    audioGain={props.audioGain}\r\n                  />            \r\n                </div>\r\n              </div>\r\n            {/* Info Overlay */}\r\n            {showOverlay &&\r\n              <InfoOverlay overlayToggle={() => setShowOverlay(false)} /> }\r\n          </div>\r\n          {/* dead simple text chat */}\r\n          <iframe title=\"text chat\" id=\"chat\" src='https://deadsimplechat.com/34MeFCATo'></iframe>        \r\n        </>}\r\n    </div>\r\n  )  \r\n}\r\n\r\nfunction PromptSpan(props){\r\n\r\n  useEffect(() => {\r\n    document.getElementById(\"prompt-span\").innerHTML = props.prompt;\r\n  }, []);\r\n\r\n  return(\r\n    <pre id=\"prompt-span\"></pre>\r\n  )\r\n}\r\n","import React, {useState} from 'react';\r\nimport IntroModal from './introModal';\r\nimport DrawingCanvas from './drawingCanvas';\r\nimport DrawingTools from './drawingTools';\r\n\r\n\r\nexport default function MobileApp(props){\r\n\r\n  const [currentModalPage, setCurrentModalPage] = useState(0);\r\n\r\n  return (\r\n    <div id=\"mobile-wrapper\">\r\n      {props.modalIsOpen\r\n        ? <IntroModal \r\n            mobile={props.mobile}\r\n            setIntroModal={props.setIntroModal}\r\n            toggleModal={props.toggleModal}\r\n            currentModalPage={currentModalPage}\r\n            setCurrentModalPage={setCurrentModalPage} />\r\n        : <>\r\n\r\n        {/* prompt */}\r\n        {/* <div id=\"mobile-header-wrapper\">          \r\n          <p>//room2.fm\\\\</p>\r\n          <button className=\"InputSelectButton\" onClick={props.submitResponse}>info</button>\r\n        </div> */}\r\n        <div id=\"current-prompt-wrapper\">          \r\n          <p id=\"current-prompt\">\r\n            {props.currentPrompt}\r\n          </p>\r\n        </div>\r\n        {/* Submit Button */}\r\n        <button id=\"mobile-response-submit-button\" className=\"InputSelectButton\" onClick={props.submitResponse}>\r\n          <span>SUBMIT RESPONSE</span>                \r\n        </button>\r\n        {/* input select */}\r\n        <div id=\"input-select-wrapper\">\r\n          <button id=\"draw-input-select\" className=\"InputSelectButton\" onClick={() => props.setInput(true)}>draw</button>\r\n          <button id=\"text-input-select\" className=\"InputSelectButton ActiveInputButton\" onClick={() => props.setInput(false)}>write</button>\r\n        </div>\r\n        {/* end timer */}\r\n        <div id=\"prompt-end-timer-wrapper\">\r\n          <div id=\"prompt-end-timer\"></div>\r\n          <div id=\"prompt-end-timer-overlay\" />\r\n        </div>\r\n        {/* input section */}\r\n        <div style={{flexGrow: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden'}}>\r\n          <div id=\"input-wrapper\"> \r\n            <DrawingCanvas \r\n                brushColour={props.colours[0]}\r\n                brushSize={props.brushSize}\r\n                setDrawingCanvas={props.setDrawingCanvas}\r\n                setCurrentCanvasState={props.setCurrentCanvasState}\r\n                setIsDrawing={props.setIsDrawing} />             \r\n            <textarea id=\"text-input\" name=\"text based prompt response\" placeholder=\"Please type your response here...\" />\r\n          </div>\r\n          <DrawingTools\r\n            undoDrawing={props.undoDrawing}\r\n            redoDrawing={props.redoDrawing}\r\n            toggleEraser={props.toggleEraser}\r\n            colours={props.colours}\r\n            setCurrentColours={props.setCurrentColours}\r\n            setBrushSize={props.setBrushSize}\r\n            mobile={props.mobile} />\r\n        </div>\r\n        \r\n        </>}\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nimport './App.css';\r\n\r\nimport DesktopApp from './components/desktopApp';\r\nimport MobileApp from './components/mobileApp';\r\n\r\n\r\nexport default function App(){\r\n  // is accessed on mobile\r\n  const onMobile = window.matchMedia('all and (any-hover: none)').matches;\r\n  //const onMobile = false;\r\n  // current window size\r\n  const [windowSize, setWindowSize] = useState([window.innerWidth, window.innerHeight]);\r\n  // is the intro modal open\r\n  //const [modalIsOpen, setModalIsOpen] = useState(true);\r\n  const [modalIsOpen, setModalIsOpen] = useState(true);\r\n  var modalIsOpenRef = useRef(modalIsOpen);\r\n  useEffect(() => {modalIsOpenRef.current = modalIsOpen}, [modalIsOpen]);\r\n  // current modal page - 0 is shut\r\n  // intro modal instance\r\n  const [introModal, setIntroModal] = useState(null);\r\n  // current artist\r\n  const [currentArtist, setCurrentArtist] = useState(null);\r\n  var currentArtistRef = useRef(currentArtist);\r\n  useEffect(() => {currentArtistRef.current = currentArtist}, [currentArtist]);\r\n  // current text prompt\r\n  const [currentPrompt, setCurrentPrompt] = useState(<>Take a deep breath, then continue to breathe along with the rhythm of the track.<br/>Draw or write your interpretation of the textures you hear.</>);\r\n  var currentPromptRef = useRef(currentPrompt);\r\n  useEffect(() => {currentPromptRef.current = currentPrompt}, [currentPrompt]);\r\n  // if false it's assumed to be text instead\r\n  const[inputIsDraw, setInputIsDraw] = useState(false);\r\n  // other responses from database\r\n  const [responseData, setResponseData] = useState([]);\r\n  // last response id from database\r\n  const [lastResponseID, setLastResponseID] = useState(0);\r\n  var lastResponseIDRef = useRef(lastResponseID);\r\n  useEffect(() => {lastResponseIDRef.current = lastResponseID}, [lastResponseID]);\r\n  // response update loop timing\r\n  const liveUpdateTime = 5000;\r\n  // current drawing colours\r\n  const [currentColours, setCurrentColours] = useState([\r\n    \"#222323\",\r\n    \"#5252ff\",\r\n    \"#b5e877\"\r\n  ]);\r\n  const[selectedColour, setSelectedColour] = useState(0);\r\n  var selectedColourRef = useRef(selectedColour);\r\n  useEffect(() => {selectedColourRef.current = selectedColour}, [selectedColour]);\r\n  // drawing settings\r\n  const [brushSize, setBrushSize] = useState(8);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  var isDrawingRef = useRef(isDrawing);\r\n  useEffect(() => {isDrawingRef.current = isDrawing}, [isDrawing]);\r\n  const [isEraser, setIsEraser] = useState(false);\r\n  const [savedBrush, setSavedBrush] = useState(null);\r\n  // undo/redo settings\r\n  const maxUndo = 10;\r\n  const [drawingCanvas, setDrawingCanvas] = useState(null);\r\n  var drawingCanvasRef = useRef(drawingCanvas);\r\n  useEffect(() => {drawingCanvasRef.current = drawingCanvas}, [drawingCanvas]);\r\n  const [currentCanvasState, setCurrentCanvasState] = useState(null);\r\n  var currentCanvasStateRef = useRef(currentCanvasState);\r\n  useEffect(() => {currentCanvasStateRef.current = currentCanvasState}, [currentCanvasState]);\r\n  const [undoStack, setUndoStack] = useState([]);\r\n  const [redoStack, setRedoStack] = useState([]);\r\n  var undoStackRef = useRef(undoStack);\r\n  var redoStackRef = useRef(redoStack);\r\n  useEffect(() => {undoStackRef.current = undoStack}, [undoStack]);\r\n  useEffect(() => {redoStackRef.current = redoStack}, [redoStack]);\r\n  // is focus mode active\r\n  const [focusMode, setFocusMode] = useState(false);\r\n\r\n  //audio source for text react\r\n  const [audioCtx, setAudioCtx] = useState(null);\r\n  const [audioGain, setAudioGain] = useState(null);\r\n  const [analysing, setAnalysing] = useState(true);\r\n  const [colliding, setColliding] = useState(true);\r\n  var collidingRef = useRef(colliding);\r\n  useEffect(() => {collidingRef.current = colliding}, [colliding]);\r\n  const [colourCycleTimer, setColourCycleTimer] = useState(0.);\r\n  var colourCycleTimerRef = useRef(colourCycleTimer);\r\n  useEffect(() => {colourCycleTimerRef.current = colourCycleTimer}, [colourCycleTimer]);\r\n  let cycleInterval;\r\n  // handle prompt change\r\n  const[isCountdown, setIsCountdown] = useState(false);\r\n  var isCountdownRef = useRef(isCountdown);\r\n  useEffect(() => {isCountdownRef.current = isCountdown}, [isCountdown]);\r\n  const[newPrompt, setNewPrompt] = useState(\"a\");\r\n  var newPromptRef = useRef(newPrompt);\r\n  useEffect(() => {newPromptRef.current = newPrompt}, [newPrompt]);\r\n  const [responseTime, setResponseTime] = useState(0);\r\n\r\n  // my init function to run on app load\r\n  useEffect(() => {\r\n    // set up to update window dimensions on resize event\r\n    setWindowSize([window.innerWidth, window.innerHeight]);\r\n    window.addEventListener('resize', () => {\r\n      setWindowSize([window.innerWidth, window.innerHeight])});\r\n/* !!! Remove for modal trigger */\r\n    document.addEventListener('mouseup', saveCanvasState);\r\n    document.addEventListener('touchend', saveCanvasState);\r\n    document.addEventListener('touchcancel', saveCanvasState);\r\n    if(!onMobile){\r\n      liveUpdate();\r\n    } else {\r\n      liveMobileUpdate();\r\n    }\r\n  }, []);\r\n\r\n  // update brush colour and cursor on colour change\r\n  useEffect(() => {\r\n    if(drawingCanvasRef.current && !isEraser){\r\n      updateCanvasBrush();\r\n    }    \r\n  }, [selectedColour]);\r\n\r\n  useEffect(() => {\r\n    if(drawingCanvasRef.current){\r\n      updateCanvasBrush();      \r\n    }    \r\n  }, [brushSize]);\r\n\r\n  return (\r\n    <div id=\"global-wrapper\">\r\n      {onMobile\r\n      ? \r\n        <MobileApp\r\n          responseTime={responseTime}\r\n          mobile={onMobile}  \r\n          modalIsOpen={modalIsOpen}\r\n          setIntroModal={setIntroModal}\r\n          toggleModal={toggleModal}\r\n          currentPrompt={currentPrompt}\r\n          currentArtist={currentArtist}\r\n          submitResponse={submitResponse}\r\n          setInput={setInput}\r\n          setIsDrawing={setIsDrawing}\r\n          colours={currentColours}\r\n          setCurrentColours={setCurrentColours}\r\n          brushSize={brushSize}\r\n          setBrushSize={setBrushSize}\r\n          toggleEraser={toggleEraser}\r\n          setDrawingCanvas={setDrawingCanvas}\r\n          setCurrentCanvasState={setCurrentCanvasState}\r\n          undoDrawing={undoDrawing}\r\n          redoDrawing={redoDrawing} />\r\n      : \r\n        <DesktopApp \r\n          mobile={onMobile}\r\n          modalIsOpen={modalIsOpen}\r\n          toggleModal={toggleModal}\r\n          setIntroModal={setIntroModal}\r\n          toggleFocus={toggleFocus}\r\n          currentPrompt={currentPrompt}\r\n          currentArtist={currentArtist}\r\n          width={windowSize[0]}\r\n          height={windowSize[1]}\r\n          submitResponse={submitResponse}\r\n          responseData={responseData}\r\n          setInput={setInput}\r\n          setIsDrawing={setIsDrawing}\r\n          colours={currentColours}\r\n          selectedColour={selectedColour}\r\n          setSelectedColour={setSelectedColour}\r\n          setCurrentColours={setCurrentColours}\r\n          brushSize={brushSize}\r\n          setBrushSize={setBrushSize}\r\n          toggleEraser={toggleEraser}\r\n          updateCanvasBrush={updateCanvasBrush}\r\n          setDrawingCanvas={setDrawingCanvas}\r\n          setCurrentCanvasState={setCurrentCanvasState}\r\n          undoDrawing={undoDrawing}\r\n          redoDrawing={redoDrawing}\r\n          audioCtx={audioCtx}\r\n          setAudioCtx={setAudioCtx}\r\n          audioGain={audioGain}\r\n          setAudioGain={setAudioGain}\r\n          analysing={analysing}\r\n          colliding={colliding}\r\n          />\r\n      }\r\n    </div>\r\n  )\r\n\r\n  // gets triggered when either the intro or info modal are brought up\r\n  function toggleModal(){\r\n    // add and remove event listener that triggers after drawing to save canvas to undo stack\r\n    if(modalIsOpen){\r\n      document.addEventListener('mouseup', saveCanvasState);\r\n      introModal.hide();\r\n      getCSSRule(\".ModalWrapper\").style.display = \"none\";\r\n    } else {\r\n      document.removeEventListener('mouseup', saveCanvasState);\r\n      introModal.show();\r\n      getCSSRule(\".ModalWrapper\").style.display = \"unset\";\r\n    }\r\n    // toggle state\r\n    setModalIsOpen(!modalIsOpen);\r\n  }\r\n\r\n  function toggleFocus(){\r\n    let textResponseRule = getCSSRule('.TextResponseBox');\r\n    let imageResponseRule = getCSSRule('.ImageResponseBox');\r\n    if(!focusMode){\r\n      setFocusMode(true);\r\n      textResponseRule.style.backgroundColor = \"rgb(31, 33, 28)\";\r\n      textResponseRule.style.border = \"solid white 1px\";\r\n      imageResponseRule.style.backgroundColor = \"white\";\r\n      imageResponseRule.style.border = \"solid rgb(31, 33, 28) 1px\";\r\n    } else {\r\n      setFocusMode(false);\r\n      textResponseRule.style.backgroundColor = \"\";\r\n      textResponseRule.style.border = \"\";\r\n      imageResponseRule.style.backgroundColor = \"\";\r\n      imageResponseRule.style.border = \"\";\r\n    }\r\n  }\r\n\r\n  // get latest info from server\r\n  function liveUpdate(){\r\n    fetch(`https://room2.fm/api/getLiveUpdate`, {\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      },\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      body: JSON.stringify({ lastResponseID: lastResponseIDRef.current})\r\n    })\r\n      .then(res => res.json())\r\n      .then(res => updateFromServerResponse(res.data));\r\n    setTimeout(liveUpdate, liveUpdateTime);\r\n  }\r\n\r\n  // get latest info from server mobile version\r\n  function liveMobileUpdate(){\r\n    fetch(`https://room2.fm/api/getLiveMobileUpdate`, {\r\n      headers: {\r\n        'Content-type': 'application/json'\r\n      },\r\n      method: 'GET',\r\n      mode: 'cors'\r\n    })\r\n      .then(res => res.json())\r\n      .then(res => updateFromMobileServerResponse(res.data));\r\n    setTimeout(liveMobileUpdate, liveUpdateTime);\r\n  }\r\n\r\n  //update state from latest server info\r\n  function updateFromServerResponse(serverResponse){\r\n    // if new artist check for particular changes\r\n    if(currentArtistRef.current !== serverResponse[0][0].currentArtist){\r\n      if(serverResponse[0][0].currentArtist === \"Panda Wong & 黑芝麻 (Hēi zhī ma) & Wei Huang\"){\r\n        getCSSRule('#current-prompt-wrapper').style.animation = \"unset\";\r\n        setAnalysing(true);\r\n        setColliding(true);\r\n        clearInterval(cycleInterval);\r\n      } else if(serverResponse[0][0].currentArtist === \"amby downs & Joel Spring\") {\r\n        cycleInterval = setInterval(colourCycle, 100);\r\n        getCSSRule('#current-prompt-wrapper').style.animation = \"textCycle 10s linear infinite\";\r\n        setAnalysing(false);\r\n        setColliding(false);\r\n      } else { \r\n        getCSSRule('#current-prompt-wrapper').style.animation = \"unset\";\r\n        setAnalysing(false);\r\n        setColliding(true);\r\n        clearInterval(cycleInterval);\r\n      }\r\n      setCurrentArtist(serverResponse[0][0].currentArtist);\r\n    }\r\n    // if new prompt init countdown\r\n    if(newPromptRef.current !== serverResponse[0][0].currentPrompt){\r\n      if(modalIsOpenRef.current || !collidingRef.current){\r\n        setNewPrompt(serverResponse[0][0].currentPrompt);\r\n        setCurrentPrompt(serverResponse[0][0].currentPrompt);\r\n      } else {\r\n        setNewPrompt(serverResponse[0][0].currentPrompt);\r\n        startPromptCountdown();\r\n      }      \r\n    }\r\n    // set up array to push other responses to\r\n    let returnedResponses = [];\r\n    if(serverResponse[1].length){\r\n      serverResponse[1].forEach(response => {\r\n        returnedResponses.push([response.RESPONSE, response.RESPONSE_TYPE]);\r\n        setLastResponseID(response.id);\r\n      });\r\n      setResponseData(returnedResponses);\r\n    }    \r\n  }\r\n  //update state from latest server info\r\n  function updateFromMobileServerResponse(serverResponse){\r\n    // if new artist check for particular changes\r\n    if(currentArtistRef.current !== serverResponse[0][0].currentArtist){\r\n      if(serverResponse[0][0].currentArtist === \"amby downs & Joel Spring\") {\r\n        cycleInterval = setInterval(colourCycle, 100);\r\n        getCSSRule('#current-prompt-wrapper').style.animation = \"textCycle 10s linear infinite\";\r\n        setColliding(false);\r\n      } else { \r\n        getCSSRule('#current-prompt-wrapper').style.animation = \"unset\";\r\n        setColliding(true);\r\n        clearInterval(cycleInterval);\r\n      }\r\n      setCurrentArtist(serverResponse[0][0].currentArtist);\r\n    }\r\n    // if new prompt init countdown\r\n    if(newPromptRef.current !== serverResponse[0][0].currentPrompt){\r\n      if(modalIsOpenRef.current || !collidingRef.current){\r\n        setNewPrompt(serverResponse[0][0].currentPrompt);\r\n        setCurrentPrompt(serverResponse[0][0].currentPrompt);\r\n      } else {\r\n        setNewPrompt(serverResponse[0][0].currentPrompt);\r\n        startPromptCountdown();\r\n      }      \r\n    }   \r\n  }\r\n\r\n  function colourCycle(){\r\n    setColourCycleTimer(prev => prev + .1);\r\n    document.documentElement.style.setProperty(\"--comp-col-cycle\", `hsl(${colourCycleTimerRef.current}deg 100% 50%)`);\r\n  }\r\n\r\n  function startPromptCountdown(){\r\n    if(isCountdownRef.current === false){      \r\n      setIsCountdown(true);\r\n      let promptTimer = document.getElementById(\"prompt-end-timer-wrapper\").children[0];\r\n      let promptTimerOverlay = document.getElementById(\"prompt-end-timer-wrapper\").children[1];\r\n      promptTimerOverlay.style.transition = \"60s linear\";\r\n      promptTimerOverlay.style.width = \"100%\";\r\n      let countdown = 60;\r\n      promptTimer.innerHTML = \"this prompt will change in \" + countdown + \" seconds...\";\r\n      let x = setInterval(() => {    \r\n        countdown -= 1;        \r\n        promptTimer.innerHTML = \"this prompt will change in \" + countdown + \" seconds...\";\r\n        if (countdown < 1) {\r\n          clearInterval(x);\r\n          promptTimerOverlay.style.transition = \"0s linear\";\r\n          promptTimerOverlay.style.width = \"0%\";\r\n          promptTimer.innerHTML = \"\";\r\n          setCurrentPrompt(newPromptRef.current);\r\n          setIsCountdown(false);        \r\n        }\r\n      }, 1000);\r\n    }    \r\n  }\r\n\r\n  function submitResponse(){\r\n    /* !!! */\r\n    let responseTimer;\r\n    let textInput = document.getElementById('text-input');\r\n    // check if a text or an image response\r\n    if(inputIsDraw === true && undoStack.length > 0){\r\n      //image input\r\n      let imageInput = document.getElementById('drawing-canvas');\r\n      var dataURL = imageInput.toDataURL({\r\n        format: 'png',\r\n        left: 0,\r\n        top: 0,\r\n        width: imageInput.width,\r\n        height: imageInput.height\r\n      });\r\n      const formData = new FormData();\r\n      let imageFile = dataURLtoFile(dataURL, 'response.png');\r\n      drawingCanvas.clear();\r\n      formData.append('upload', imageFile);\r\n      responseTimer = Date.now();\r\n      fetch(`https://room2.fm/api/insertLiveImageReflection`, {\r\n        method: 'PUT',\r\n        body: formData\r\n      })\r\n      .then(res => res.json())\r\n      .then(() => {if(onMobile){responseSubmittedAnim();}});\r\n    } else if(inputIsDraw === false && textInput.value.length > 0) {\r\n      // text input\r\n      let responseText = textInput.value;\r\n      if(responseText.length > 0){\r\n        textInput.value = '';\r\n        responseTimer = Date.now();\r\n        fetch(`https://room2.fm/api/insertLiveTextReflection`, {\r\n          headers: { 'Content-type': 'application/json' },\r\n          method: 'POST',\r\n          mode: 'cors',\r\n          body: JSON.stringify({reflection: responseText})\r\n        })\r\n      .then(res => res.json())\r\n      .then(() => {if(onMobile){responseSubmittedAnim();}});   \r\n      }\r\n    }\r\n  }\r\n\r\n  function responseSubmittedAnim(){\r\n    let subButton = document.getElementById(\"mobile-response-submit-button\");\r\n    subButton.classList.add(\"ResponseSubmitted\");\r\n    subButton.firstChild.innerHTML = \"RESPONSE SUBMITTED\";\r\n    setTimeout(() => {\r\n      subButton.classList.remove(\"ResponseSubmitted\");\r\n      subButton.firstChild.innerHTML = \"SUBMIT RESPONSE\";\r\n    }, 4000);\r\n  }\r\n\r\n  // to change between draw and write - true = draw - false = text\r\n  function setInput(changeToDraw){\r\n    if(changeToDraw){\r\n      setInputIsDraw(true);\r\n      if(onMobile){\r\n        document.getElementById(\"input-wrapper\").style.left= \"0%\";\r\n        document.getElementById(\"mobile-wrapper\").style.height= \"100%\";\r\n      }\r\n      else{\r\n        document.getElementById(\"input-wrapper\").style.top= \"-100%\";\r\n        getCSSRule('#input-wrapper::after').style.top = \"calc(50% + 4px)\";\r\n      }\r\n      document.getElementById(\"draw-input-select\").classList.add(\"ActiveInputButton\");\r\n      document.getElementById(\"text-input-select\").classList.remove(\"ActiveInputButton\");\r\n    } else {\r\n      setInputIsDraw(false);\r\n      if(onMobile){\r\n        document.getElementById(\"input-wrapper\").style.left= \"-100%\";\r\n        document.getElementById(\"mobile-wrapper\").style.height= \"calc(100% + 33vw)\";\r\n      }\r\n      else{\r\n        document.getElementById(\"input-wrapper\").style.top= \"0%\";\r\n        getCSSRule('#input-wrapper::after').style.top = \"4px\";\r\n      }\r\n      document.getElementById(\"draw-input-select\").classList.remove(\"ActiveInputButton\");\r\n      document.getElementById(\"text-input-select\").classList.add(\"ActiveInputButton\");\r\n    }\r\n  }\r\n\r\n  function updateCanvasBrush(){\r\n    drawingCanvasRef.current.freeDrawingBrush.color = currentColours[selectedColourRef.current];\r\n    drawingCanvasRef.current.freeDrawingBrush.width = brushSize;\r\n    if(isEraser){\r\n      drawingCanvasRef.current.freeDrawingCursor = getCustomEraserCursor();\r\n    } else {\r\n      drawingCanvasRef.current.freeDrawingCursor = getCustomCursor();\r\n    }\r\n  }\r\n\r\n  // toggle eraser on/off - save brush if toggled on - reset old brush if toggled off\r\n  function toggleEraser(){\r\n    if(isEraser){\r\n      drawingCanvasRef.current.freeDrawingBrush = savedBrush;\r\n      drawingCanvasRef.current.freeDrawingBrush.width = brushSize;\r\n      drawingCanvasRef.current.freeDrawingBrush.color = currentColours[selectedColour];\r\n      drawingCanvasRef.current.freeDrawingCursor = getCustomCursor();\r\n      document.getElementById(\"erase-brush-button\").classList.remove(\"Active\");\r\n    } else {\r\n      setSavedBrush(drawingCanvasRef.current.freeDrawingBrush);\r\n      drawingCanvasRef.current.freeDrawingBrush = new fabric.EraserBrush(drawingCanvasRef.current);\r\n      drawingCanvasRef.current.freeDrawingBrush.width = brushSize;\r\n      drawingCanvasRef.current.freeDrawingCursor = getCustomEraserCursor();\r\n      document.getElementById(\"erase-brush-button\").classList.add(\"Active\");\r\n    }\r\n    setIsEraser(!isEraser);\r\n  }\r\n  // undo/redo functions\r\n  // run on mouse up to save current canvas state to undo stack and then toggle isDrawing off\r\n  function saveCanvasState(){\r\n    // only run if mouse up is occuring after a drawing action\r\n    if(isDrawingRef.current){\r\n      // get version of undo stack to change\r\n      let newUndoStack = undoStackRef.current;\r\n      // drop oldest undo if over max undo count\r\n      if(newUndoStack.length === maxUndo){ newUndoStack.shift(); }\r\n      // add last current state stored before updating it to store the new state\r\n      newUndoStack.push(currentCanvasStateRef.current);\r\n      let reloadState = drawingCanvasRef.current.toDatalessJSON();\r\n      setCurrentCanvasState(reloadState);\r\n      // update undo stack into state, remove redo stack and then toggle isDrawing off\r\n      setUndoStack(newUndoStack);\r\n      setRedoStack([]);\r\n      setIsDrawing(false);      \r\n      /* setTimeout(() => {\r\n        drawingCanvasRef.current.loadFromJSON(drawingCanvasRef.current.toDatalessJSON());\r\n      }, 1); */\r\n    }\r\n  }\r\n  function undoDrawing(){\r\n    // if states left to undo\r\n    console.log(undoStack);\r\n    if(undoStack.length > 0){\r\n      // store state to come back to\r\n      let newCanvasState = currentCanvasState;\r\n      // push current state to redo stack\r\n      let newRedoStack = redoStackRef.current;\r\n      newRedoStack.splice(newRedoStack.length, 0, drawingCanvasRef.current.toDatalessJSON());\r\n      setRedoStack(newRedoStack);\r\n      // pop previous state from state stack\r\n      let newUndoStack = undoStackRef.current;\r\n      let newState = newUndoStack.pop();\r\n      // update to previous states and both stacks\r\n      setCurrentCanvasState(newState);\r\n      setUndoStack(newUndoStack);\r\n      // update actual canvas\r\n      drawingCanvas.loadFromJSON(newCanvasState);\r\n    }\r\n  }\r\n  function redoDrawing(){\r\n    // if states left to redo\r\n    if(redoStack.length > 0){\r\n      // pop new state from redo stack\r\n      let newRedoStack = redoStackRef.current;\r\n      let newCanvasState = newRedoStack.pop();\r\n      // push current state to undo stack\r\n      let newUndoStack = undoStackRef.current;\r\n      newUndoStack.push(currentCanvasStateRef.current);\r\n      setUndoStack(newUndoStack);\r\n      // update current state\r\n      setCurrentCanvasState(drawingCanvas.toDatalessJSON());\r\n      setRedoStack(newRedoStack);\r\n      // update actual canvas\r\n      drawingCanvas.loadFromJSON(newCanvasState);      \r\n    }\r\n  }\r\n\r\n  function dataURLtoFile(dataurl, filename){\r\n    var arr = dataurl.split(','),\r\n      mime = arr[0].match(/:(.*?);/)[1],\r\n      bstr = atob(arr[1]),\r\n      n = bstr.length,\r\n      u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n      u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new File([u8arr], filename, {\r\n      type: mime\r\n    });\r\n  }\r\n\r\n  function getCSSRule(ruleName) {\r\n    ruleName = ruleName.toLowerCase();\r\n    var result = null;\r\n    var find = Array.prototype.find;\r\n\r\n    find.call(document.styleSheets, styleSheet => {\r\n        result = find.call(styleSheet.cssRules, cssRule => {\r\n            return cssRule instanceof CSSStyleRule \r\n                && cssRule.selectorText.toLowerCase() === ruleName;\r\n        });\r\n        return result != null;\r\n    });\r\n    return result;\r\n  }\r\n\r\n  function getCustomEraserCursor() {\r\n    const circle = \r\n      `<svg height=\"${brushSize}\"\r\n            viewBox=\"0 0 ${brushSize * 2} ${brushSize * 2}\"\r\n            width=\"${brushSize}\"\r\n            xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"50%\"\r\n                cy=\"50%\"\r\n                fill=\"#000000\"\r\n                r=\"${brushSize}\" />\r\n        <circle cx=\"50%\"\r\n                cy=\"50%\"\r\n                fill=\"#ffffff\"\r\n                r=\"${brushSize-2}\" />\r\n      </svg>`;      \r\n    return `url(data:image/svg+xml;base64,${window.btoa(circle)}) ${brushSize / 2} ${brushSize / 2}, move`;\r\n  }\r\n\r\n  function getCustomCursor() {\r\n    const circle = \r\n      `<svg height=\"${brushSize}\"\r\n            fill=\"${currentColours[selectedColourRef.current]}\"\r\n            viewBox=\"0 0 ${brushSize * 2} ${brushSize * 2}\"\r\n            width=\"${brushSize}\"\r\n            xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"50%\"\r\n                cy=\"50%\"\r\n                r=\"${brushSize}\" />\r\n      </svg>`;      \r\n    return `url(data:image/svg+xml;base64,${window.btoa(circle)}) ${brushSize / 2} ${brushSize / 2}, move`;\r\n  }\r\n}\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n","export default __webpack_public_path__ + \"static/media/slowdiscpixel.685ade7f.gif\";"],"sourceRoot":""}
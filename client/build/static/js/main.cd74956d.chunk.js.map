{"version":3,"sources":["content/sade.mp3","content/modalText.js","components/timeCalc.js","components/introModal.js","components/glVis.js","components/responseDisplay.js","components/audioTrackPlayer.js","components/drawingTools.js","components/drawingCanvas.js","components/colourPicker.js","components/settingsMenu.js","components/desktopApp.js","content/cyclePresets.js","App.js","index.js"],"names":["acknowledgementOfCountryText","introText","className","instructionsText","date","Date","getUTCHours","setDate","getUTCDate","nextdate","getDate","lat","long","suncalctimes","SunCalc","getTimes","suntimes","num","checknum","sunrise","getMinutes","phase","getMoonIllumination","phasedeg","Math","round","dividerstyle","transform","nextphase","nextphasedeg","nextdividerstyle","sunriseText","moonShape","class","style","nextMoonShape","IntroModal","props","useState","currentModalPage","setCurrentModalPage","useEffect","container","document","getElementById","A11yDialog","show","modalPages","id","fontSize","justifyContent","onClick","toggleModal","role","shaders","Shaders","create","onecolour","frag","GLSL","GLVis","width","this","height","shader","ignoreUnusedUniforms","uniforms","timer","Component","ResponseDisplay","responseFadeTime","responsesToDisplay","setResponsesToDisplay","responsesToDisplayRef","useRef","responsesDisplaying","length","current","i","setTimeout","displayNextResponse","responseData","modOrderResponses","Array","from","nextResponse","pop","createImageResponseDisplay","createTextResponseDisplay","concat","imageResponse","newResponseBox","createElement","collision","classList","add","xRandom","random","yRandom","addEventListener","e","appendChild","responseBoxDimensions","getBoundingClientRect","left","top","colliderArray","getElementsByClassName","detect2DBoxCollision","remove","window","requestAnimationFrame","console","log","responseFadeInOut","src","textResponse","innerHTML","responseElement","transition","opacity","box1","box2","right","bottom","AudioTrackPlayer","isPlaying","setIsPlaying","isMuted","setIsMuted","audioSource","setAudioSource","audioSourceRef","setAudioSourceRef","timeline","firstChild","currentTime","duration","clickPercent","clientX","offsetWidth","require","default","paused","play","startTimer","setAskResponse","pause","pauseTimer","PauseIcon","PlayIcon","restartTimer","RewindIcon","muted","MuteIconOff","MuteIconOn","VolumeNotches","volNotchGen","fill","map","nothing","index","onMouseDown","clickVolumeNotch","onMouseEnter","isMouseDown","stopPropagation","clickedID","parseInt","target","notches","notch","newVolume","volume","viewBox","xmlns","transformOrigin","points","strokeLinejoin","strokeWidth","strokeLinecap","d","DrawingTools","state","frameColour","toggleEraser","undoDrawing","redoDrawing","brushSize","setBrushSize","prevProps","colours","c","substring","rgb","setState","DrawingCanvas","getCustomCursor","circle","brushColour","btoa","bind","updateCanvasDimensions","r","fabricInit","newCanvasSetting","canvas","freeDrawingBrush","color","freeDrawingCursor","fabric","Canvas","isDrawingMode","canvasWrapperRef","setWidth","setHeight","offsetHeight","on","setDrawing","setDrawingCanvas","setCurrentCanvasState","toDatalessJSON","canvasWidth","canvasHeight","setIsDrawing","ColourPicker","click","SwapIcon","type","name","defaultValue","colorInputChange","selectors","cl","contains","setCurrentColours","colNum","charAt","documentElement","setProperty","value","splice","markerWidth","markerHeight","refX","refY","orient","markerEnd","SettingsMenu","toggleFocus","DesktopApp","askResponse","readyToRespond","setReadyToRespond","setTimer","timerInterval","setTimerInterval","modalIsOpen","mobile","setInterval","clearInterval","setInput","placeholder","submitResponse","cyclePresets","introStatement","prompt","trackDetails","trackLink","artistLink","trackSrc","shaderName","dbTable","App","onMobile","matchMedia","matches","innerWidth","innerHeight","windowSize","setWindowSize","setModalIsOpen","inputIsDraw","setInputIsDraw","setResponseData","currentColours","isDrawing","isDrawingRef","isEraser","setIsEraser","savedBrush","setSavedBrush","drawingCanvas","drawingCanvasRef","currentCanvasState","currentCanvasStateRef","undoStack","setUndoStack","redoStack","setRedoStack","undoStackRef","redoStackRef","focusMode","setFocusMode","saveCanvasState","removeEventListener","cyclePreset","changeToDraw","zIndex","EraserBrush","newCanvasState","newRedoStack","newUndoStack","newState","loadFromJSON","push","returnedResponses","imageInput","dataURL","toDataURL","format","formData","FormData","imageFile","dataurl","filename","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","dataURLtoFile","clear","append","fetch","method","body","then","res","json","data","response","RESPONSE","RESPONSE_TYPE","textInput","responseText","headers","mode","JSON","stringify","reflection","cycleTable","cyclePos","textResponseRule","getCSSRule","imageResponseRule","backgroundColor","border","shift","ruleName","toLowerCase","result","find","prototype","call","styleSheets","styleSheet","cssRules","cssRule","CSSStyleRule","selectorText","ReactDOM","render","StrictMode"],"mappings":"gGAAA,OAAe,cAA0B,kC,2HCA5BA,EAA+B,4eAO/BC,EAAY,qCACzB,8BACE,sbAMA,uBACA,uBACA,+PAIA,uBACA,0BAEA,uBAAMC,UAAU,iBAAhB,8LAGE,uBAHF,sHAKE,uBALF,+HAUWC,EAAmB,qCAChC,8BACE,sHAGA,uBACA,uBACA,kkBAOA,uBACA,uBACA,sOAIA,uBACA,uBACA,8PAIA,uBACA,0BAEA,sBAAMD,UAAU,iBAAhB,0K,GAKyB,W,gBCjEvBE,EAAO,IAAIC,KACAD,EAAKE,cAAgB,GACrB,IAAKF,EAAKG,QAAQH,EAAKI,aAAe,GAGrD,IACIC,GADU,IAAIJ,MACKE,QAAQH,EAAKM,UAAY,GAE1CC,GAAO,mBACPC,EAAO,mBAETC,EAAeC,IAAQC,SAASX,EAAMO,EAAKC,GAE3CI,EAAW,CAmBf,SAAmBC,GACXA,EAAM,GACRA,GAAY,GAGZA,EAAMA,EAEN,OAAOA,EAzBTC,CAASL,EAAaM,QAAQb,cAAgB,IAC9CO,EAAaM,QAAQC,cAKrBC,EADYP,IAAQQ,oBAAoBlB,EAAMO,EAAKC,GACjCS,MAElBE,EAAW,KADfF,EAAQG,KAAKC,MAAc,IAARJ,IAEfK,EAAe,CAACC,UAAW,qBAAuBJ,EAAW,QAG7DK,EADWd,IAAQQ,oBAAoBb,EAAUE,EAAKC,GACjCS,MAErBQ,EAAe,KADnBD,EAAYJ,KAAKC,MAAkB,IAAZG,IAEnBE,EAAmB,CAACH,UAAW,qBAAuBE,EAAe,QAalE,IAAME,EAAc,mCAC3B,sFAAyDf,EAAS,GAAlE,IAAuEA,EAAS,GAAhF,WAGagB,EAAY,mCACzB,sBAAKC,MAAM,aAAX,UACA,qBAAKA,MACJV,EAAW,IACN,sBACA,yBAIN,qBAAKU,MACFV,EAAW,IACV,uBACA,wBAIJ,qBAAKU,MAAM,cAAcC,MAAOR,SAMnBS,EAAgB,mCAC7B,sBAAKF,MAAM,aAAX,UACA,qBAAKA,MACJJ,EAAe,IACV,sBACA,yBAIN,qBAAKI,MACFJ,EAAe,IACd,uBACA,wBAIJ,qBAAKI,MAAM,cAAcC,MAAOJ,SCnFjB,SAASM,EAAWC,GACjC,MAAgDC,mBAAS,GAAzD,mBAAOC,EAAP,KAAyBC,EAAzB,KAGAC,qBAAU,WACR,IAAMC,EAAYC,SAASC,eAAe,aACvB,IAAIC,IAAWH,GACvBI,SACX,IAEF,IAAIC,EAAa,CAEf,qBAAKC,GAAG,eAAR,SACE,qBAAKA,GAAG,YAAR,SACE,sBAAKA,GAAG,mBAAR,UACE,sBAAKA,GAAG,cAAR,+EAAwF,mBAAG9C,UAAU,kBAAb,iCAAxF,gBAAkJ,0BAClJ,sBAAK8C,GAAG,cAAR,iFAA4F,mBAAG9C,UAAU,kBAAb,kCAA5F,aAAuJ,0BACvJ,sBAAK8C,GAAG,cAAR,oFAAiG,mBAAG9C,UAAU,kBAAb,mBAAjG,SAA8I,mBAAGA,UAAU,kBAAb,wBAA9I,WAA+L,0BAC/L,sBAAK8C,GAAG,cAAR,2BAA0C,mBAAG9C,UAAU,kBAAb,kCAA1C,SAA8F,mBAAGA,UAAU,kBAAb,yBAA9F,WAA+I,mBAAGA,UAAU,kBAAb,yBAA/I,UAA+L,mBAAGA,UAAU,kBAAb,yBAA/L,KAA0O,mBAAGA,UAAU,kBAAb,yBAA1O,gBAAgS,mBAAGA,UAAU,kBAAb,sBAAhS,WAAgV,0BAChV,sBAAK8C,GAAG,cAAR,8BAA+C,mBAAG9C,UAAU,kBAAb,kCAA/C,MAAkG,mBAAGA,UAAU,kBAAb,8BAAlG,OAAmJ,mBAAGA,UAAU,kBAAb,8BAAnJ,MAAmM,mBAAGA,UAAU,kBAAb,2CAAnM,WAAgQ,mBAAGA,UAAU,kBAAb,uBAAhQ,YAAkT,0BAClT,sBAAK8C,GAAG,cAAR,kCAAqD,mBAAG9C,UAAU,kBAAb,uBAArD,MAAgG,mBAAGA,UAAU,kBAAb,mBAAhG,MAA0I,mBAAGA,UAAU,kBAAb,qBAA1I,KAAmL,mBAAGA,UAAU,kBAAb,wBAAnL,KAA8N,mBAAGA,UAAU,kBAAb,qBAA9N,KAAuQ,mBAAGA,UAAU,kBAAb,wBAAvQ,IAAiT,mBAAGA,UAAU,kBAAb,uBAAjT,IAA0V,mBAAGA,UAAU,kBAAb,wBAA1V,KAAqY,mBAAGA,UAAU,kBAAb,uBAArY,QAAkb,mBAAGA,UAAU,kBAAb,uBAAlb,cAAse,0BACte,sBAAK8C,GAAG,cAAR,sCAA2D,mBAAG9C,UAAU,kBAAb,uBAA3D,YAA4G,mBAAGA,UAAU,kBAAb,wBAA5G,KAAuJ,mBAAGA,UAAU,kBAAb,qBAAvJ,KAAgM,mBAAGA,UAAU,kBAAb,wBAAhM,KAA2O,mBAAGA,UAAU,kBAAb,qBAA3O,KAAoR,mBAAGA,UAAU,kBAAb,uBAApR,KAA8T,mBAAGA,UAAU,kBAAb,uBAA9T,KAAwW,mBAAGA,UAAU,kBAAb,uBAAxW,MAAmZ,mBAAGA,UAAU,kBAAb,sBAAnZ,gBAAwc,0BACxc,sBAAK8C,GAAG,cAAR,0CAAiE,mBAAG9C,UAAU,kBAAb,uBAAjE,aAAmH,mBAAGA,UAAU,kBAAb,8BAAnH,OAAoK,mBAAGA,UAAU,kBAAb,8BAApK,MAAoN,mBAAGA,UAAU,kBAAb,uBAApN,KAA8P,mBAAGA,UAAU,kBAAb,uBAA9P,KAAwS,mBAAGA,UAAU,kBAAb,uBAAxS,KAAkV,mBAAGA,UAAU,kBAAb,6CAAlV,KAAuY,0BACvY,sBAAK8C,GAAG,cAAR,8CAAuE,mBAAG9C,UAAU,kBAAb,mBAAvE,gBAA2H,mBAAGA,UAAU,kBAAb,qBAA3H,WAA4K,mBAAGA,UAAU,kBAAb,qBAA5K,QAA0N,mBAAGA,UAAU,kBAAb,mBAA1N,MAAoQ,mBAAGA,UAAU,kBAAb,mBAApQ,MAA8S,mBAAGA,UAAU,kBAAb,mBAA9S,KAAuV,mBAAGA,UAAU,kBAAb,+BAAvV,KAA4Y,iCAMlZ,qCACE,qBAAK8C,GAAG,qBAAqB9C,UAAU,yBAAvC,SACI,qBAAK8C,GAAG,aAAad,MAAO,CAACe,SAAU,SAAUC,eAAgB,gBAAjE,SACGlD,MAGP,wBAAQgD,GAAG,wBAAwBG,QAAS,kBAAMX,EAAoBD,EAAmB,IAAzF,2BAIF,qCACE,qBAAKS,GAAG,sBAAR,SACE,qBAAKA,GAAG,cAAR,yCAIF,qBAAKA,GAAG,qBAAR,SACE,qBAAKA,GAAG,wBAAR,SACE,sBAAKA,GAAG,aAAR,UACGjB,EACAC,EACAG,SAIP,wBAAQa,GAAG,wBAAwBG,QAAS,kBAAMX,EAAoBD,EAAmB,IAAzF,2BAIF,qCACE,sBAAKS,GAAG,sBAAR,UACE,qBAAKA,GAAG,cAAR,uCAGA,0BAEF,qBAAKA,GAAG,qBAAR,SACI,qBAAKA,GAAG,aAAR,SACG/C,MAGP,wBAAQ+C,GAAG,wBAAwBG,QAAS,kBAAMX,EAAoBD,EAAmB,IAAzF,2BAIF,qCACE,sBAAKS,GAAG,sBAAR,UACE,qBAAKA,GAAG,cAAR,uCAGA,0BAEF,qBAAKA,GAAG,qBAAR,SACI,qBAAKA,GAAG,aAAR,SACG7C,MAGP,wBAAQ6C,GAAG,wBAAwBG,QAAS,kBAAMd,EAAMe,eAAxD,4BAIJ,OACE,sBAAKJ,GAAG,YACH9C,UAAU,eACV,kBAAgB,cAChB,cAAY,QAHjB,UAKE,qBAAK,2BAAsBA,UAAU,iBAErC,qBAAKmD,KAAK,WAAWnD,UAAU,WAA/B,SACG6C,EAAWR,Q,4DCnGPe,EAAUC,UAAQC,OAAO,CACpCC,UAAW,CACTC,KAAMC,eAAF,24DAuDKC,EAAb,4JACE,WACE,OAAO,mCACP,cAAC,UAAD,CAASC,MAAOC,KAAKzB,MAAMwB,MAAOE,OAAQD,KAAKzB,MAAM0B,OAArD,SAEE,cAAC,cAAD,UACE,cAAC,OAAD,CAAMC,OAAQV,EAAQG,UAAWQ,sBAAoB,EAACC,SAAU,CAACC,MAAOL,KAAKzB,MAAM8B,MAAON,MAAwB,IAAjBC,KAAKzB,MAAMwB,MAAYE,OAAyB,IAAjBD,KAAKzB,MAAMwB,OAAaA,MAAwB,IAAjBC,KAAKzB,MAAMwB,MAAYE,OAA0B,IAAlBD,KAAKzB,MAAM0B,mBANjN,GAA2BK,aAcZR,ICzEA,SAASS,EAAgBhC,GAGtC,IAGMiC,EAAmB,KAGzB,EAAoDhC,mBAAS,IAA7D,mBAAOiC,EAAP,KAA2BC,EAA3B,KACMC,EAAwBC,mBACxBC,EAAsBD,kBAAO,GAuBnC,OAlBAjC,qBAAU,WACR,GAAG8B,EAAmBK,OAAS,IAAMD,EAAoBE,QAAQ,CAC/D,IAAI,IAAIC,EAAI,EAAGA,EALM,EAKgBA,IACnCC,WAAWC,EAAqBV,EAAiBQ,GAEnDH,EAAoBE,SAAU,EAEhCJ,EAAsBI,QAAUN,IAC/B,CAACA,IAGJ9B,qBAAU,WACLJ,EAAM4C,aAAaL,OAAS,IAC7BJ,EAAsBnC,EAAM4C,cAC5BR,EAAsBI,QAAUxC,EAAM4C,gBAEvC,CAAC5C,EAAM4C,eAGR,qBAAKjC,GAAG,qBAGV,SAASgC,IACP,IAAIE,EAAoBC,MAAMC,KAAKX,EAAsBI,SACrDQ,EAAeH,EAAkBI,MACd,UAApBD,EAAa,GACdE,EAA2BF,EAAa,IAExCG,EAA0BH,EAAa,IAEzCb,EAAsB,CAACa,GAAcI,OAAOP,IAG9C,SAASK,EAA2BG,GAClC,IAAIC,EAAiBhD,SAASiD,cAAc,OACxCC,GAAY,EAChBF,EAAeG,UAAUC,IAAI,oBAC7B,IAAIC,EAAUxE,KAAKyE,SACfC,EAAU1E,KAAKyE,SACnBN,EAAeQ,iBAAiB,QAAQ,SAACC,GAEvCzD,SAASC,eAAe,oBAAoByD,YAAYV,GACxD,IAAIW,EAAwBX,EAAeY,wBAC3CZ,EAAezD,MAAMsE,KAAQ,GAAKR,EAAW,IAC7CL,EAAezD,MAAMuE,KAAQ,IAAOpE,EAAM0B,OAASuC,EAAsBvC,QAAWmC,EAAW,IAE/F,IADA,IAAIQ,EAAgBvB,MAAMC,KAAKzC,SAASgE,uBAAuB,aACtD7B,EAAI,EAAGA,EAAI4B,EAAc9B,OAAQE,IACrC8B,EAAqBjB,EAAeY,wBAAyBG,EAAc5B,GAAGyB,2BAA6BV,IAC5GA,GAAY,GAGbA,GACDF,EAAekB,SACfC,OAAOC,uBAAsB,kBAAMxB,EAA2BG,MAC9DsB,QAAQC,IAAI,UAEZtB,EAAeG,UAAUC,IAAI,YAC7BmB,EAAkBvB,OAGtBA,EAAewB,IAAM,wCAAwCzB,EAG/D,SAASF,EAA0B4B,GACjC,IAAIzB,EAAiBhD,SAASiD,cAAc,KACxCC,GAAY,EAChBF,EAAe0B,UAAYD,EAC3BzB,EAAeG,UAAUC,IAAI,mBAC7B,IAAIC,EAAUxE,KAAKyE,SACfC,EAAU1E,KAAKyE,SACnBtD,SAASC,eAAe,oBAAoByD,YAAYV,GACxD,IAAIW,EAAwBX,EAAeY,wBAC3CZ,EAAezD,MAAMsE,KAAQ,GAAKR,EAAW,IAC7CL,EAAezD,MAAMuE,KAAQ,IAAOpE,EAAM0B,OAASuC,EAAsBvC,QAAWmC,EAAW,IAE/F,IADA,IAAIQ,EAAgBvB,MAAMC,KAAKzC,SAASgE,uBAAuB,aACtD7B,EAAI,EAAGA,EAAI4B,EAAc9B,OAAQE,IACrC8B,EAAqBjB,EAAeY,wBAAyBG,EAAc5B,GAAGyB,2BAA6BV,IAC5GA,GAAY,GAGbA,GACDF,EAAekB,SACfC,OAAOC,uBAAsB,kBAAMvB,EAA0B4B,QAE7DzB,EAAeG,UAAUC,IAAI,YAC7BmB,EAAkBvB,IAItB,SAASuB,EAAkBI,GACzBA,EAAgBpF,MAAMqF,WAAajD,SACnCS,YAAW,WAETuC,EAAgBpF,MAAMsF,QAAU,EAChCzC,YAAW,WAAOuC,EAAgBpF,MAAMsF,QAAU,IAvG7B,MAwGrBzC,YAAW,WAAOuC,EAAgBT,SAAU7B,MAAyBV,SACpE,MAIP,SAASsC,EAAqBa,EAAMC,GAClC,IAAI7B,GAAY,EAQhB,OAPG4B,EAAKjB,KAAOkB,EAAKC,OACjBF,EAAKE,MAAQD,EAAKlB,MAClBiB,EAAKhB,IAAMiB,EAAKE,QAChBH,EAAKG,OAASF,EAAKjB,MAClBZ,GAAY,EACZmB,QAAQC,IAAI,QAETpB,EC1HM,SAASgC,EAAiBxF,GAEvC,MAAkCC,oBAAS,GAA3C,mBAAOwF,EAAP,KAAkBC,EAAlB,KACA,EAA8BzF,oBAAS,GAAvC,mBAAO0F,EAAP,KAAgBC,EAAhB,KACA,EAAsC3F,mBAAS,MAA/C,mBAAO4F,EAAP,KAAoBC,EAApB,KAiCA,OA/BA1F,qBAAU,WAER,IAAI2F,EAAiBzF,SAASC,eAAe,gBAC7CuF,EAAeC,GACf/F,EAAMgG,kBAAkBD,GAExB,IAAIE,EAAW3F,SAASC,eAAe,YAEvCwF,EAAejC,iBAAiB,WAAW,WACzCmC,EAASpI,UAAY,GACrBoI,EAASpI,UAAY,qBAEvBkI,EAAejC,iBAAiB,WAAW,WACzCmC,EAASpI,UAAY,GACrBoI,EAASpI,UAAY,oBAGvBkI,EAAejC,iBAAiB,cAAc,WAC5CmC,EAASC,WAAWrG,MAAM2B,MAAS,IAAMuE,EAAeI,YAAYJ,EAAeK,SAAY,OAGjGH,EAASnC,iBAAiB,SAAS,SAACC,GAElC,IAAIsC,GAAgBtC,EAAEuC,QAAUL,EAAS/B,wBAAwBC,MAAQ8B,EAASM,YAElFN,EAASC,WAAWrG,MAAM2B,MAAS,IAAM6E,EAAgB,IAEzDN,EAAeI,YAAcJ,EAAeK,SAAWC,OAExD,IAGD,sBAAK1F,GAAG,uBAAuB9C,UAAU,WAAzC,UAEE,uBAAOiH,IAAK0B,EAAQ,KAAuBC,QAAS9F,GAAG,iBAEvD,wBAAQA,GAAG,oBAAoB9C,UAAU,oBAAoBiD,QA4BjE,WACK+E,EAAYa,QACbb,EAAYc,OACZjB,GAAa,GACb1F,EAAM4G,aACN5G,EAAM6G,gBAAe,KAErBhB,EAAYiB,QACZpB,GAAa,GACb1F,EAAM+G,eArCN,SACGtB,EACK,cAACuB,EAAD,IACA,cAACC,EAAD,MAGR,wBAAQpJ,UAAU,oBAAoBiD,QAAS,WAAO+E,EAAYM,YAAc,EAAGnG,EAAMkH,gBAAzF,SACE,cAACC,EAAD,MAGF,qBAAKxG,GAAG,WAAW9C,UAAU,iBAA7B,SACE,qBAAK8C,GAAG,eAGV,sBAAKA,GAAG,yBAAR,UAEE,wBAAQ9C,UAAU,oBAAoB8C,GAAG,cAAcG,QAwB7D,WACE+E,EAAYuB,OAASvB,EAAYuB,MACjCxB,GAAYD,IA1BR,SACGA,EACG,cAAC0B,GAAD,IACA,cAACC,GAAD,MAGN,qBAAK3G,GAAG,iBAAR,SACK4G,UAuBb,IAAIC,EAAc1E,MA1FA,IA0FmB2E,KAAK,IAIpCF,EAAgBC,EAAYE,KAAI,SAACC,EAASC,GAAV,OACpC,qBAAK/J,UAAU,2BAA2B8C,GAAIiH,EACzCC,YAAaC,EACbC,aAAc,SAAChE,GAAUiE,GAAaF,EAAiB/D,IACvDlE,MAAO,CAAC6B,OAAQ,IAAI8F,EAAYjF,OAAS,UAI5CyF,GAAc,EAGlB,SAASF,EAAiB/D,GACxBA,EAAEkE,kBACFD,GAAc,EACd,IAH0B,EAGtBE,EAAYC,SAASpE,EAAEqE,OAAOzH,IAE9B0H,EAAU/H,SAASgE,uBAAuB,eALpB,cAMR+D,GANQ,IAM1B,2BAA0B,CAAC,IAAlBC,EAAiB,QACrBA,EAAM3H,GAAKuH,EACZI,EAAM7E,UAAUe,OAAO,gBAEvB8D,EAAM7E,UAAUC,IAAI,iBAVE,8BAc1B,IAAI6E,EAAY,EAAK,EAvHL,GAuHsBL,EACtC5H,SAASC,eAAe,gBAAgBiI,OAASD,EAGnD,SAAStB,IACP,OACE,qBACEzF,MAAM,OACNE,OAAO,OACP+G,QAAQ,cACRC,MAAM,6BACNpJ,UAAU,GALZ,SAMI,mBAAGA,UAAU,0BAA0BO,MAAO,CAAC8I,gBAAiB,UAAW9K,UAAU,kBAArF,SACE,yBAAS+K,OAAO,qBACPC,eAAe,QACfC,YAAY,WAM/B,SAAS9B,IACP,OACE,qBACExF,MAAM,OACNE,OAAO,OACP+G,QAAQ,cACRC,MAAM,6BACNpJ,UAAU,GALZ,SAMI,oBAAGA,UAAU,0BAA0BO,MAAO,CAAC8I,gBAAiB,UAAW9K,UAAU,kBAArF,UACE,sBAAMkL,cAAc,QAAQD,YAAY,KACpCE,EAAE,2BAEN,sBAAMD,cAAc,QAAQD,YAAY,KACpCE,EAAE,4BAMhB,SAAS7B,IACP,OACE,qBACE3F,MAAM,OACNE,OAAO,OACP+G,QAAQ,cACRC,MAAM,6BACNpJ,UAAU,GALZ,SAMI,oBAAGA,UAAU,YAAYO,MAAO,CAAC8I,gBAAiB,UAAW9K,UAAU,kBAAvE,UACE,yBAAS+K,OAAO,qBACPC,eAAe,QACfC,YAAY,KACZxJ,UAAU,uCAEnB,sBAAMmI,KAAK,OAAOsB,cAAc,QAAQD,YAAY,KAChDE,EAAE,+BAOhB,SAAS1B,KACP,OACE,sBACE9F,MAAM,OACNE,OAAO,OACP+G,QAAQ,cACRC,MAAM,6BACNpJ,UAAU,GACVzB,UAAU,kBANZ,UAQI,sBAAM8C,GAAG,eACHqI,EAAE,yIASR,sBAAMvB,KAAK,OAAOsB,cAAc,QAAQD,YAAY,IAAIjL,UAAU,mBAC5DmL,EAAE,6BAER,sBAAMvB,KAAK,OAAOsB,cAAc,QAAQD,YAAY,IAAIjL,UAAU,mBAC5DmL,EAAE,oCAER,sBAAMvB,KAAK,OAAOsB,cAAc,QAAQD,YAAY,IAAIjL,UAAU,mBAC5DmL,EAAE,oCAKhB,SAAS3B,KACP,OACE,sBACE7F,MAAM,OACNE,OAAO,OACP+G,QAAQ,cACRC,MAAM,6BACNvD,QAAQ,MACRtH,UAAU,kBANZ,UAQI,sBAAM8C,GAAG,eACHqI,EAAE,yIAQR,sBAAMvB,KAAK,OAAOqB,YAAY,IACxBE,EAAE,4BAGR,sBAAMvB,KAAK,OAAOqB,YAAY,IACxBE,EAAE,+BAtIhB1I,SAASwD,iBAAiB,WAAW,WAAOkE,GAAc,KCvGnD,IAyDQiB,GAzDf,kDACE,WAAYjJ,GAAQ,IAAD,8BACjB,cAAMA,IACDkJ,MAAQ,CACbC,YAAa,aAHI,EADrB,0CAQE,WACE,OACE,mCAEQ,sBAAKxI,GAAG,0BAAR,UAME,yBAAQA,GAAG,wBAAwB9C,UAAU,gBAA7C,sBAAsE,qBAAK8C,GAAG,qBAC9E,yBAAQA,GAAG,wBAAwB9C,UAAU,gBAA7C,sBAAsE,qBAAK8C,GAAG,uBAC9E,yBAAQA,GAAG,qBAAqB9C,UAAU,gBAAgBiD,QAASW,KAAKzB,MAAMoJ,aAA9E,qBAAoG,qBAAKzI,GAAG,mBAC5G,yBAAQA,GAAG,cAAc9C,UAAU,gBAAgBiD,QAASW,KAAKzB,MAAMqJ,YAAvE,mBAA0F,qBAAK1I,GAAG,iBAClG,yBAAQA,GAAG,cAAc9C,UAAU,gBAAgBiD,QAASW,KAAKzB,MAAMsJ,YAAvE,mBAA0F,qBAAK3I,GAAG,wBAtBlH,+BA4BE,WAAqB,IAAD,OAElBL,SAASC,eAAe,yBAAyBuD,iBAAiB,SAAS,WACtE,EAAK9D,MAAMuJ,UAAY,IAAK,EAAKvJ,MAAMwJ,aAAa,EAAKxJ,MAAMuJ,UAAY,MAGhFjJ,SAASC,eAAe,yBAAyBuD,iBAAiB,SAAS,WACtE,EAAK9D,MAAMuJ,UAAY,GAAI,EAAKvJ,MAAMwJ,aAAa,EAAKxJ,MAAMuJ,UAAY,QAnCnF,gCAsCE,SAAmBE,GACjB,GAAIA,EAAUC,QAAQ,KAAOjI,KAAKzB,MAAM0J,QAAQ,GAAI,CAClD,IAAIC,EAAIlI,KAAKzB,MAAM0J,QAAQ,GAAGE,UAAU,GACpCC,EAAM1B,SAASwB,EAAG,IAKX,OAJFE,GAAO,GAAM,KAIE,OAHfA,GAAQ,EAAK,KAGe,OAF5BA,GAAQ,EAAK,KAIX,GACPpI,KAAKqI,SAAS,CAAEX,YAAa,cAE7B1H,KAAKqI,SAAS,CAAEX,YAAa,mBAnDvC,GAAkCpH,a,SC2FnBgI,GA3Ff,kDACE,WAAY/J,GAAQ,IAAD,8BACjB,cAAMA,IAoERgK,gBAAkB,WAChB,IAAMC,EAAM,gDAEO,EAAKjK,MAAMuJ,UAFlB,gCAGK,EAAKvJ,MAAMkK,YAHhB,uCAImC,EAAvB,EAAKlK,MAAMuJ,UAJvB,YAIiE,EAAvB,EAAKvJ,MAAMuJ,UAJrD,iCAKM,EAAKvJ,MAAMuJ,UALjB,iKAWI,EAAKvJ,MAAMuJ,UAXf,kDAgBR,MAAM,iCAAN,OAAyC9E,OAAO0F,KAAKF,GAArD,aAAmE,EAAKjK,MAAMuJ,UAAY,EAA1F,YAAiG,EAAKvJ,MAAMuJ,UAAY,EAAxH,WApFJ,EAAKL,MAAQ,GAEb,EAAKc,gBAAkB,EAAKA,gBAAgBI,KAArB,iBACvB,EAAKC,uBAAyB,EAAKA,uBAAuBD,KAA5B,iBALb,EADrB,0CAQE,WACE,OACE,sBAAKzJ,GAAG,yBAAR,UACE,wBAAQA,GAAG,mBACX,qBACEa,MAAM,OACNE,OAAO,OACP+G,QAAQ,YACRC,MAAM,6BACN/H,GAAG,iBALL,SAME,wBAAS2J,EAAE,IAAI7C,KAAK,iBAlB9B,+BAuBE,WACEhG,KAAK8I,eAxBT,kCA2BE,cA3BF,gCA4BE,SAAmBd,GAEjB,GAAIA,EAAUS,cAAgBzI,KAAKzB,MAAMkK,YAAa,CACpD,IAAIM,EAAmB/I,KAAKyH,MAAMuB,OAClCD,EAAiBE,iBAAiBC,MAAQlJ,KAAKzB,MAAMkK,YACrDM,EAAiBI,kBAAoBnJ,KAAKuI,kBAG5C,GAAIP,EAAUF,YAAc9H,KAAKzB,MAAMuJ,UAAW,CAChD,IAAIiB,EAAmB/I,KAAKyH,MAAMuB,OAClCD,EAAiBE,iBAAiBlJ,MAAQC,KAAKzB,MAAMuJ,UACrDiB,EAAiBI,kBAAoBnJ,KAAKuI,qBAvChD,wBA0CE,WAAa,IAAD,OACNS,EAAS,IAAII,SAAOC,OAAO,iBAAkB,CAAEC,eAAe,IAC9DC,EAAmB1K,SAASC,eAAe,0BAC/CkK,EAAOQ,SAASD,EAAiBzE,aACjCkE,EAAOS,UAAUF,EAAiBG,cAClCV,EAAOC,iBAAiBC,MAAQlJ,KAAKzB,MAAMkK,YAC3CO,EAAOC,iBAAiBlJ,MAAQC,KAAKzB,MAAMuJ,UAC3CkB,EAAOG,kBAAoBnJ,KAAKuI,kBAChCS,EAAOW,GAAG,cAAc,kBAAM,EAAKC,gBACnC5J,KAAKqI,SAAS,CAAEW,OAAQA,IACtB,WAAQhG,OAAOX,iBAAiB,SAAU,EAAKuG,2BACjD5I,KAAKzB,MAAMsL,iBAAiBb,GAC5BhJ,KAAKzB,MAAMuL,sBAAsBd,EAAOe,oBAtD5C,oCAwDE,WACE,IAAIR,EAAmB1K,SAASC,eAAe,0BAC5CyK,IACDvJ,KAAKyH,MAAMuB,OAAOQ,SAASD,EAAiBzE,aAC5C9E,KAAKyH,MAAMuB,OAAOS,UAAUF,EAAiBG,cAC7C1J,KAAKqI,SAAS,CAAE2B,YAAaT,EAAiBzE,YAC5CmF,aAAcV,EAAiBG,kBA9DvC,wBAiEE,WAEE1J,KAAKzB,MAAM2L,cAAa,OAnE5B,GAAmC5J,aCyEpB6J,GA1Ef,kDACE,WAAY5L,GAAQ,IAAD,8BACjB,cAAMA,IACDkJ,MAAQ,GAEb,EAAK2C,MAAQ,EAAKA,MAAMzB,KAAX,iBAJI,EADrB,0CAOE,WACE,OACE,sBAAKzJ,GAAG,wBAAR,UACE,wBAAQA,GAAG,kBAAkBG,QAASW,KAAKoK,MAA3C,SACE,cAACC,GAAD,MAEF,sBAAMnL,GAAG,cAAT,oBACA,sBAAMA,GAAG,cAAT,oBACA,sBAAKA,GAAG,qBAAR,UACE,uBAAOoL,KAAK,QAAQpL,GAAG,aAAa9C,UAAU,mBAAmBmO,KAAK,aAAaC,aAAcxK,KAAKzB,MAAM0J,QAAQ,KACpH,uBAAOqC,KAAK,QAAQpL,GAAG,aAAa9C,UAAU,oBAAoBmO,KAAK,cAAcC,aAAcxK,KAAKzB,MAAM0J,QAAQ,KACtH,uBAAOqC,KAAK,QAAQpL,GAAG,aAAa9C,UAAU,mBAAmBmO,KAAK,cAAcC,aAAcxK,KAAKzB,MAAM0J,QAAQ,aAlB/H,+BAuBE,WACEpJ,SAASC,eAAe,cAAcuD,iBAAiB,QAASrC,KAAKyK,iBAAiB9B,KAAK3I,OAAO,GAClGnB,SAASC,eAAe,cAAcuD,iBAAiB,QAASrC,KAAKyK,iBAAiB9B,KAAK3I,OAAO,GAClGnB,SAASC,eAAe,cAAcuD,iBAAiB,QAASrC,KAAKyK,iBAAiB9B,KAAK3I,OAAO,KA1BtG,mBA4BE,WAEE,IADA,IAAI0K,EAAY7L,SAASgE,uBAAuB,cACvC7B,EAAI,EAAGA,EAAI,EAAGA,IAAI,CACzB,IAAI2J,EAAKD,EAAU1J,GAAGgB,UACtB,QAAO,GACL,KAAK2I,EAAGC,SAAS,SACjBD,EAAG5H,OAAO,SACV4H,EAAG1I,IAAI,SACP,MACA,KAAK0I,EAAGC,SAAS,UACjBD,EAAG5H,OAAO,UACV4H,EAAG1I,IAAI,SACP,MACA,KAAK0I,EAAGC,SAAS,SACjBD,EAAG5H,OAAO,SACV4H,EAAG1I,IAAI,WAMXjC,KAAKzB,MAAMsM,kBAAkB,CAC3B7K,KAAKzB,MAAM0J,QAAQ,GACnBjI,KAAKzB,MAAM0J,QAAQ,GACnBjI,KAAKzB,MAAM0J,QAAQ,OApDzB,8BAuDE,SAAiB3F,GACf,IAAIwI,EAASxI,EAAEqE,OAAOzH,GAAG6L,OAAO,GAEhC,OADAlM,SAASmM,gBAAgB5M,MAAM6M,YAAY,eAAeH,EAAQxI,EAAEqE,OAAOuE,OACpE5I,EAAEqE,OAAO3E,UAAU,IACxB,IAAK,QACHhC,KAAKzB,MAAMsM,kBAAkB7K,KAAKzB,MAAM0J,QAAQkD,OAAO,EAAG,EAAG7I,EAAEqE,OAAOuE,QACtE,MACF,IAAK,SACHlL,KAAKzB,MAAMsM,kBAAkB7K,KAAKzB,MAAM0J,QAAQkD,OAAO,EAAG,EAAG7I,EAAEqE,OAAOuE,QACtE,MACF,IAAK,QACHlL,KAAKzB,MAAMsM,kBAAkB7K,KAAKzB,MAAM0J,QAAQkD,OAAO,EAAG,EAAG7I,EAAEqE,OAAOuE,aAlE9E,GAAkC5K,aA6ElC,SAAS+J,KACP,OACE,sBACEtK,MAAM,OACNE,OAAO,OACP+G,QAAQ,cACRC,MAAM,6BAJR,UAMI,wBAAQ/H,GAAG,YAAYkM,YAAY,KAAKC,aAAa,IAAIC,KAAK,IAAIC,KAAK,IAAIC,OAAO,OAAlF,SACE,yBAASrE,OAAO,sBAMlB,sBAAMnB,KAAK,OAAOqB,YAAY,IAAIoE,UAAU,kBACtClE,EAAE,gDC7FD,SAASmE,GAAanN,GACnC,OACE,sBAAKW,GAAG,wBAAwB9C,UAAU,WAA1C,UAEE,wBAAQ8C,GAAG,uBAAX,kBACA,sBAAKA,GAAG,oBAAR,UAEE,wBAAQA,GAAG,uBAAX,kBAEA,wBAAQA,GAAG,2BAAX,sBACA,sBAAKA,GAAG,oBAAR,UACE,wBAAQ9C,UAAU,iBAAlB,iBACA,wBAAQA,UAAU,iBAAlB,oBACA,wBAAQA,UAAU,iBAAlB,qBAGF,wBAAQ8C,GAAG,wBAAwBG,QAASd,EAAMoN,YAAlD,yBCLO,SAASC,GAAWrN,GAEjC,MAAqCC,oBAAS,GAA9C,mBAAMqN,EAAN,KAAmBzG,EAAnB,KACA,EAA2C5G,oBAAS,GAApD,mBAAMsN,EAAN,KAAsBC,EAAtB,KAEA,EAAyBvN,mBAAS,GAAlC,mBAAM6B,EAAN,KAAa2L,EAAb,KACA,EAAyCxN,mBAAS,GAAlD,mBAAMyN,EAAN,KAAqBC,EAArB,KACA,EAA2C1N,mBAAS,MAApD,mBAAM8F,EAAN,KAAsBC,EAAtB,KAEA,OACE,qBAAKrF,GAAG,kBAAR,SACGX,EAAM4N,YAEH,cAAC7N,EAAD,CACE8N,OAAQ7N,EAAM6N,OACd9M,YAAaf,EAAMe,cAErB,qCAEA,cAACoM,GAAD,CACEC,YAAapN,EAAMoN,cAErB,qBAAKzM,GAAG,yBAAyB9C,UAAU,WAA3C,SACE,sBAAK8C,GAAG,iBAAR,6EAEE,uBAFF,sDAOF,cAAC6E,EAAD,CACEQ,kBAAmBA,EACnBY,WAiEV,WACE+G,EAAiBG,aAAY,WAC3BL,EAAS,IAAM1H,EAAeI,YAAYJ,EAAeK,YArGtC,MAmCbW,WAqEV,WACEgH,cAAcL,IArENxG,aAuEV,WACEuG,EAAS,IAvED5G,eAAgBA,IAGjByG,GACC,wBAAQ3M,GAAG,0BAA0BG,QAAS,WAAO0M,GAAkB,GAAO3G,GAAe,IAA7F,oCAGD0G,GACC,mCACE,sBAAK5M,GAAG,gBAAR,UACE,qBAAKA,GAAG,uBAAR,SACE,uBAAMA,GAAG,eAAT,gCAEE,wBAAQA,GAAG,oBAAoB9C,UAAU,oBAAoBiD,QAAS,kBAAMd,EAAMgO,UAAS,IAA3F,kBAFF,YAIE,wBAAQrN,GAAG,oBAAoB9C,UAAU,sCAAsCiD,QAAS,kBAAMd,EAAMgO,UAAS,IAA7G,mBAJF,sBAQF,sBAAKrN,GAAG,aAAR,UACE,0BAAUA,GAAG,aAAaqL,KAAK,6BAA6BiC,YAAY,sCACxE,cAAC,GAAD,CACE5E,YAAarJ,EAAMqJ,YACnBC,YAAatJ,EAAMsJ,YACnBF,aAAcpJ,EAAMoJ,aACpBM,QAAS1J,EAAM0J,QACfH,UAAWvJ,EAAMuJ,UACjBC,aAAcxJ,EAAMwJ,eACtB,cAAC,GAAD,CACEU,YAAalK,EAAM0J,QAAQ,GAC3BH,UAAWvJ,EAAMuJ,UACjB+B,iBAAkBtL,EAAMsL,iBACxBC,sBAAuBvL,EAAMuL,sBAC7BI,aAAc3L,EAAM2L,eACtB,cAAC,GAAD,CACEjC,QAAS1J,EAAM0J,QACf4C,kBAAmBtM,EAAMsM,oBAC3B,wBAAQxL,QAAS,WACfd,EAAMkO,iBACNV,GAAkB,IAFpB,4BASR,cAACxL,EAAD,CACEY,aAAc5C,EAAM4C,aACpBlB,OAAQ1B,EAAM0B,OACdF,MAAOxB,EAAMwB,QAEf,qBAAKb,GAAG,iBAAR,SACE,cAAC,EAAD,CACEmB,MAAOA,EACPJ,OAAQ1B,EAAM0B,OACdF,MAAOxB,EAAMwB,eCvGpB,IAAM2M,GAAe,CAC1B,CACEC,eAAgB,0DAChBC,OAAQ,0DACRC,aAAc,0DACdC,UAAW,GACXC,WAAY,GACZC,SAAU,GACVC,WAAY,GACZC,QAAS,GACTjF,QAAS,CACP,UACA,UACA,aCJS,SAASkF,KAEtB,IAAMC,EAAWpK,OAAOqK,WAAW,6BAA6BC,QAEhE,EAAoC9O,mBAAS,CAACwE,OAAOuK,WAAYvK,OAAOwK,cAAxE,mBAAOC,EAAP,KAAmBC,EAAnB,KAEA,EAAsClP,oBAAS,GAA/C,mBAAO2N,EAAP,KAAoBwB,EAApB,KAKA,EAAqCnP,oBAAS,GAA9C,mBAAMoP,EAAN,KAAmBC,EAAnB,KAEA,EAAwCrP,mBAAS,IAAjD,mBAAO2C,EAAP,KAAqB2M,EAArB,KAEA,EAA4CtP,mBAASkO,GAPpC,GAO2DzE,SAA5E,mBAAO8F,EAAP,KAAuBlD,EAAvB,KAEA,EAAkCrM,mBAAS,GAA3C,mBAAOsJ,EAAP,KAAkBC,EAAlB,KACA,EAAkCvJ,oBAAS,GAA3C,mBAAOwP,EAAP,KAAkB9D,EAAlB,KACI+D,EAAerN,iBAAOoN,GAC1B,EAAgCxP,oBAAS,GAAzC,mBAAO0P,EAAP,KAAiBC,EAAjB,KACA,EAAoC3P,mBAAS,MAA7C,mBAAO4P,EAAP,KAAmBC,EAAnB,KAGA,EAA0C7P,mBAAS,MAAnD,mBAAO8P,EAAP,KAAsBzE,EAAtB,KACI0E,EAAmB3N,iBAAO0N,GAC9B,EAAoD9P,mBAAS,MAA7D,mBAAOgQ,EAAP,KAA2B1E,EAA3B,KACI2E,EAAwB7N,iBAAO4N,GACnC,EAAkChQ,mBAAS,IAA3C,oBAAOkQ,GAAP,MAAkBC,GAAlB,MACA,GAAkCnQ,mBAAS,IAA3C,qBAAOoQ,GAAP,MAAkBC,GAAlB,MACIC,GAAelO,iBAAO8N,IACtBK,GAAenO,iBAAOgO,IAE1B,GAAkCpQ,oBAAS,GAA3C,qBAAOwQ,GAAP,MAAkBC,GAAlB,MAgBA,OAbAtQ,qBAAU,WAER+O,EAAc,CAAC1K,OAAOuK,WAAYvK,OAAOwK,cACzCxK,OAAOX,iBAAiB,UAAU,WAChCqL,EAAc,CAAC1K,OAAOuK,WAAYvK,OAAOwK,mBAC1C,IAEH7O,qBAAU,WAAOsP,EAAalN,QAAUiN,IAAY,CAACA,IACrDrP,qBAAU,WAAO4P,EAAiBxN,QAAUuN,IAAgB,CAACA,IAC7D3P,qBAAU,WAAO8P,EAAsB1N,QAAUyN,IAAqB,CAACA,IACvE7P,qBAAU,WAAOmQ,GAAa/N,QAAU2N,KAAY,CAACA,KACrD/P,qBAAU,WAAOoQ,GAAahO,QAAU6N,KAAY,CAACA,KAGnD,qBAAK1P,GAAG,iBAAR,SACGkO,EACA,gDACA,cAACxB,GAAD,CACC7L,MAAO0N,EAAW,GAClBxN,OAAQwN,EAAW,GACnBtB,YAAaA,EACb7M,YAsBN,WAEK6M,EACDtN,SAASwD,iBAAiB,UAAW6M,IAErCrQ,SAASsQ,oBAAoB,UAAWD,IAG1CvB,GAAgBxB,IA7BZjC,aAAcA,EACdkF,YAAa1C,GAnDF,GAoDXH,SA8BN,SAAkB8C,GACbA,GACDxB,GAAe,GACfhP,SAASC,eAAe,0BAA0BV,MAAMkR,OAAS,IACjEzQ,SAASC,eAAe,qBAAqBkD,UAAUC,IAAI,qBAC3DpD,SAASC,eAAe,yBAAyBV,MAAMyF,MAAQ,QAC/DhF,SAASC,eAAe,2BAA2BV,MAAMsE,KAAO,QAChE7D,SAASC,eAAe,qBAAqBkD,UAAUe,OAAO,uBAE9D8K,GAAe,GACfhP,SAASC,eAAe,0BAA0BV,MAAMkR,OAAS,IACjEzQ,SAASC,eAAe,qBAAqBkD,UAAUe,OAAO,qBAC9DlE,SAASC,eAAe,yBAAyBV,MAAMyF,MAAQ,GAC/DhF,SAASC,eAAe,2BAA2BV,MAAMsE,KAAO,GAChE7D,SAASC,eAAe,qBAAqBkD,UAAUC,IAAI,uBA3CzDgG,QAAS8F,EACTlD,kBAAmBA,EACnB/C,UAAWA,EACXC,aAAcA,EACdJ,aA4CN,WACKuG,GACDI,EAAcrF,iBAAmBmF,EACjCvP,SAASC,eAAe,sBAAsBkD,UAAUe,OAAO,YAE/DsL,EAAcC,EAAcrF,kBAC5BqF,EAAcrF,iBAAmB,IAAIG,SAAOmG,YAAYjB,GACxDA,EAAcrF,iBAAiBlJ,MAAQ+H,EACvCjJ,SAASC,eAAe,sBAAsBkD,UAAUC,IAAI,WAE9DkM,GAAaD,IArDTrE,iBAAkBA,EAClBC,sBAAuBA,EACvBlC,YAuEN,WAEE,GAAG8G,GAAU5N,OAAS,EAAE,CAEtB,IAAI0O,EAAiBhB,EAEjBiB,EAAeV,GAAahO,QAChC0O,EAAatE,OAAOsE,EAAa3O,OAAQ,EAAGyN,EAAiBxN,QAAQgJ,kBACrE8E,GAAaY,GAEb,IAAIC,EAAeZ,GAAa/N,QAC5B4O,EAAWD,EAAalO,MAE5BsI,EAAsB6F,GACtBhB,GAAae,GAEbpB,EAAcsB,aAAaJ,KAtFzB3H,YAyFN,WAEE,GAAG+G,GAAU9N,OAAS,EAAE,CAEtB,IAAI2O,EAAeV,GAAahO,QAC5ByO,EAAiBC,EAAajO,MAE9BkO,EAAeZ,GAAa/N,QAChC2O,EAAaG,KAAKpB,EAAsB1N,SACxC4N,GAAae,GAEb5F,EAAsBwE,EAAcvE,kBACpC8E,GAAaY,GAEbnB,EAAcsB,aAAaJ,KAtGzB/C,eAoHN,WAEE,IAAIqD,EAAoB,GAExB,GAAGlC,EAAY,CAEb,IAAImC,EAAalR,SAASC,eAAe,kBACrCkR,EAAUD,EAAWE,UAAU,CACjCC,OAAQ,MACRxN,KAAM,EACNC,IAAK,EACL5C,MAAOgQ,EAAWhQ,MAClBE,OAAQ8P,EAAW9P,SAEfkQ,EAAW,IAAIC,SACjBC,EAoER,SAAuBC,EAASC,GAC9B,IAAIC,EAAMF,EAAQG,MAAM,KACtBC,EAAOF,EAAI,GAAGG,MAAM,WAAW,GAC/BC,EAAOC,KAAKL,EAAI,IAChBM,EAAIF,EAAK9P,OACTiQ,EAAQ,IAAIC,WAAWF,GACzB,KAAOA,KACLC,EAAMD,GAAKF,EAAKK,WAAWH,GAE7B,OAAO,IAAII,KAAK,CAACH,GAAQR,EAAU,CACjCjG,KAAMoG,IA9EUS,CAAcnB,EAAS,gBACvC1B,EAAc8C,QAEdjB,EAASkB,OAAO,SAAUhB,EAAW,wBACrCiB,MAAM,+DAAgE,CACpEC,OAAQ,MACRC,KAAMrB,IAEPsB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAC,GACJ,IAAI,IAAD,gBACqBA,EAAIE,MADzB,IACD,IAAI,EAAJ,qBAAgC,CAAC,IAAvBC,EAAsB,QAC9B/B,EAAkBD,KAAK,CAACgC,EAASC,SAAUD,EAASE,iBAFrD,8BAIDjE,EAAgBgC,GAChB,MAAMxN,GAENY,QAAQC,IAAIb,WAGX,CAEL,IAAI0P,EAAYnT,SAASC,eAAe,cACpCmT,EAAeD,EAAU9G,MAC1B+G,EAAanR,OAAS,IACvBkR,EAAU9G,MAAQ,GAElBoG,MAAM,wCAAyC,CAC7CY,QAAS,CAAE,eAAgB,oBAC3BX,OAAQ,OACRY,KAAM,OAENX,KAAMY,KAAKC,UAAU,CAACC,WAAYL,EAAcM,WAAYC,MAE/Df,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAC,GACJ,IAAI,IAAD,gBACqBA,EAAIE,MADzB,IACD,IAAI,EAAJ,qBAAgC,CAAC,IAAvBC,EAAsB,QAC9B/B,EAAkBD,KAAK,CAACgC,EAASC,SAAUD,EAASE,iBAFrD,8BAIDjE,EAAgBgC,GAChB,MAAMxN,GAENY,QAAQC,IAAIb,UA7KdnB,aAAcA,EACdwK,YAmLN,WACE,IAAI8G,EAAmBC,GAAW,oBAC9BC,EAAoBD,GAAW,qBAC/B1D,IAOFC,IAAa,GACbwD,EAAiBrU,MAAMwU,gBAAkB,GACzCH,EAAiBrU,MAAMyU,OAAS,GAChCF,EAAkBvU,MAAMwU,gBAAkB,GAC1CD,EAAkBvU,MAAMyU,OAAS,KAVjC5D,IAAa,GACbwD,EAAiBrU,MAAMwU,gBAAkB,kBACzCH,EAAiBrU,MAAMyU,OAAS,kBAChCF,EAAkBvU,MAAMwU,gBAAkB,QAC1CD,EAAkBvU,MAAMyU,OAAS,kCAxIrC,SAAS3D,KAEP,GAAGjB,EAAalN,QAAQ,CAEtB,IAAI2O,EAAeZ,GAAa/N,QAxGpB,KA0GT2O,EAAa5O,QAAqB4O,EAAaoD,QAElDpD,EAAaG,KAAKpB,EAAsB1N,SACxC+I,EAAsByE,EAAiBxN,QAAQgJ,kBAE/C4E,GAAae,GACbb,GAAa,IACb3E,GAAa,IAmJjB,SAASwI,GAAWK,GAClBA,EAAWA,EAASC,cACpB,IAAIC,EAAS,KACTC,EAAO7R,MAAM8R,UAAUD,KAS3B,OAPAA,EAAKE,KAAKvU,SAASwU,aAAa,SAAAC,GAK5B,OAAiB,OAJjBL,EAASC,EAAKE,KAAKE,EAAWC,UAAU,SAAAC,GACpC,OAAOA,aAAmBC,cACnBD,EAAQE,aAAaV,gBAAkBD,SAI/CE,GC5SXU,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFhV,SAASC,eAAe,U","file":"static/js/main.cd74956d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/sade.bd3fb025.mp3\";","export const acknowledgementOfCountryText = <span>\r\n  This website was created and is maintained on the unceded territory of the Wurundjeri People of the Eastern Kulin Nation, \r\n  the Traditional Custodians of the land. We recognise their ongoing legacy of connection to land, waters and culture \r\n  and pay respect to their Elders past and present. We extend this respect to all other First Nations peoples \r\n  of this continent, whose stolen land the material pathways that allow our digital connectivity are built upon.\r\n</span>\r\n\r\nexport const introText = <>\r\n<p>\r\n  <span>\r\n    room2.fm seeks to create a digital space for collective reflection, sharing, and vulnerability. During the last lockdown \r\n    season we were lucky to have a range of guest artists who helped facilitate this by contributing sounds, texts and visuals \r\n    to the space, which was brought together by the active participation in the responses and in the chat by those attending \r\n    the space on each given weekly event.\r\n  </span>\r\n  <br />  \r\n  <br />\r\n  <span>\r\n    There is no right or wrong way for you to listen, respond to, or feel a piece of music or sound. We encourage you to \r\n    trust your ears and intuition and respond sincerely and in whatever way feels true to your experience.\r\n  </span>\r\n  <br />\r\n  <br />\r\n</p>\r\n  <span className=\"ModalTextSmall\">\r\n    This website has been optimised to run with the window maximised on Chrome and Firefox on a desktop or laptop screen. \r\n    If you are having issues, please try one of these browsers.\r\n    <br />\r\n    If you would like a high-contrast version of the response text with no distortion please click 'Focus Mode' button.\r\n    <br />    \r\n    We will be moderating responses that we feel are intentionally disruptive or may make others feel unsafe in the space.\r\n  </span>\r\n</>\r\n\r\nexport const instructionsText = <>\r\n<p>\r\n  <span>\r\n    You can share your response to the music, prompts and visuals in a number of ways.\r\n  </span>\r\n  <br />\r\n  <br />\r\n  <span>\r\n    Periodically, text prompts will come up in the lower middle of the screen. Underneath the prompts you can select to respond \r\n    via either writing or drawing depending on what you think is most appropriate. Once you are happy with your response you can \r\n    click the ‘submit response’ button to share it with others. Above the ‘submit response’ button, you can select the colour palette \r\n    you will be able to draw responses with, along with options to change the brush size, use an eraser and undo or redo additions to \r\n    your drawing. \r\n  </span>\r\n  <br />\r\n  <br />\r\n  <span>\r\n    Your responses to these prompts will be completely anonymised and not attributable to you in any way, however during this \r\n    demonstration we will be capturing a screen recording of the experience.\r\n  </span>\r\n  <br />\r\n  <br />\r\n  <span>\r\n    You can also use the chat box on the right of the screen to directly speak to others participating. Select a username and \r\n    click ‘Join Room’ to engage. Be yourself, be someone else, be whomever you want to be!\r\n  </span>\r\n  <br />\r\n  <br />\r\n</p>\r\n  <span className=\"ModalTextSmall\">\r\n    room2.fm was created by Patrick Hase and Anuraag Bhatia. We welcome your thoughts, feedback, or questions - please send them through to room2fm@gmail.com\r\n  </span>            \r\n</>\r\n\r\nexport const warningText = <>\r\n\r\n</>","import React from 'react';\r\nimport SunCalc from 'suncalc'; \r\n\r\nvar date = new Date(); //local date\r\nvar nowhours = date.getUTCHours() + 10; \r\nif (nowhours > 24) {date.setDate(date.getUTCDate() + 1)}; \r\n\r\n//need to reorganise 'new date' stuff into a function; won't always be adding 3 days, instead it should check an array of dates\r\nvar newdate = new Date();\r\nvar nextdate = newdate.setDate(date.getDate() + 3);\r\n\r\nconst lat = -37.803193437556054; //latitude and longitude set to Arts House Nth Melbourne\r\nconst long = 144.94984320919224;\r\n\r\nvar suncalctimes = SunCalc.getTimes(date, lat, long);  \r\n\r\nlet suntimes = [\r\n    checknum(suncalctimes.sunrise.getUTCHours() + 10),\r\n    suncalctimes.sunrise.getMinutes()\r\n  ]\r\n  //maybe set up a list of dates and times in one of the 'content' docs that refers to the date/time of the changeover - like a calendar array\r\n\r\nvar moontimes = SunCalc.getMoonIllumination(date, lat, long);\r\nvar phase = moontimes.phase; \r\nphase = Math.round(phase * 100);\r\nvar phasedeg = 3.6 * phase;\r\nvar dividerstyle = {transform: \"rotate3d(0, 1, 0, \" + phasedeg + \"deg)\",}\r\n\r\nvar nextmoon = SunCalc.getMoonIllumination(nextdate, lat, long); \r\nvar nextphase = nextmoon.phase; \r\nnextphase = Math.round(nextphase * 100);\r\nvar nextphasedeg = 3.6 * nextphase; \r\nvar nextdividerstyle = {transform: \"rotate3d(0, 1, 0, \" + nextphasedeg + \"deg)\",}\r\n\r\n//checking whether hours evaluations are above 24, if so removing 24 to get their AM time value in hours; also reevaluates date object if UTC date is yesterday\r\nfunction checknum (num) {\r\n    if (num > 24) {\r\n      num = num - 24;\r\n      //date.setDate(date.getUTCDate() + 1); //or run this in an if/else statement above\r\n    } else {\r\n      num = num; \r\n    }\r\n      return num\r\n  }\r\n\r\nexport const sunriseText = <>\r\n<p>The track changes at sunrise. Today, the sun rose at {suntimes[0]}:{suntimes[1]}am.</p>\r\n</>\r\n\r\nexport const moonShape = <>\r\n<div class=\"moonsphere\">\r\n<div class=\r\n{phasedeg > 180 \r\n    ? \"moondark hemisphere\"\r\n    : \"moonlight hemisphere\"\r\n  }\r\n></div>\r\n  \r\n<div class=\r\n  {phasedeg > 180 \r\n  ? \"moonlight hemisphere\"\r\n  : \"moondark hemisphere\"\r\n  }\r\n></div>\r\n  \r\n<div class=\"moondivider\" style={dividerstyle}></div>\r\n</div>\r\n</>\r\n\r\n//above is adapted from this code https://dev.to/thormeier/use-your-i-moon-gination-lets-build-a-moon-phase-visualizer-with-css-and-js-aih\r\n\r\nexport const nextMoonShape = <>\r\n<div class=\"moonsphere\">\r\n<div class=\r\n{nextphasedeg > 180 \r\n    ? \"moondark hemisphere\"\r\n    : \"moonlight hemisphere\"\r\n  }\r\n></div>\r\n  \r\n<div class=\r\n  {nextphasedeg > 180 \r\n  ? \"moonlight hemisphere\"\r\n  : \"moondark hemisphere\"\r\n  }\r\n></div>\r\n  \r\n<div class=\"moondivider\" style={nextdividerstyle}></div>\r\n</div>\r\n</>","import React, { useEffect, useState, Component } from 'react';\r\nimport A11yDialog from 'a11y-dialog';\r\nimport { acknowledgementOfCountryText, introText, instructionsText, /* warningText */ } from '../content/modalText';\r\nimport {sunriseText, moonShape, nextMoonShape} from './timeCalc';\r\nexport default function IntroModal(props) {\r\n  const [currentModalPage, setCurrentModalPage] = useState(1);\r\n  \r\n  // run init on load\r\n  useEffect(() => {\r\n    const container = document.getElementById(\"AOC-modal\");\r\n        const dialog = new A11yDialog(container);\r\n        dialog.show();\r\n  },[]);\r\n\r\n  let modalPages = [\r\n    //page 1 Logo - no continue button on this one if the site needs to get closed\r\n    <div id=\"logo-wrapper\">\r\n      <div id=\"text-logo\">\r\n        <pre id=\"pre-logo-wrapper\">\r\n          <div id=\"logo-line-1\">__________________________________________________________________<u className=\"text-gradient-1\">/\\\\\\\\\\\\\\\\\\</u>_____        <br/></div>\r\n          <div id=\"logo-line-2\">&nbsp;________________________________________________________________<u className=\"text-gradient-2\">/\\\\\\///////\\\\\\</u>___       <br/></div>\r\n          <div id=\"logo-line-3\">&nbsp;&nbsp;_______________________________________________________________<u className=\"text-gradient-3\">\\///</u>______<u className=\"text-gradient-3\">\\//\\\\\\</u>__      <br/></div>\r\n          <div id=\"logo-line-4\">&nbsp;&nbsp;&nbsp;__<u className=\"text-gradient-4\">/\\\\/\\\\\\\\\\\\\\</u>______<u className=\"text-gradient-4\">/\\\\\\\\\\</u>________<u className=\"text-gradient-4\">/\\\\\\\\\\</u>_______<u className=\"text-gradient-4\">/\\\\\\\\\\</u>__<u className=\"text-gradient-4\">/\\\\\\\\\\</u>_____________<u className=\"text-gradient-4\">/\\\\\\/</u>___     <br/></div>\r\n          <div id=\"logo-line-5\">&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-5\">\\/\\\\\\/////\\\\\\</u>___<u className=\"text-gradient-5\">/\\\\\\///\\\\\\</u>____<u className=\"text-gradient-5\">/\\\\\\///\\\\\\</u>___<u className=\"text-gradient-5\">/\\\\\\///\\\\\\\\\\///\\\\\\</u>________<u className=\"text-gradient-5\">/\\\\\\//</u>_____    <br/></div>\r\n          <div id=\"logo-line-6\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-6\">\\/\\\\\\</u>___<u className=\"text-gradient-6\">\\///</u>___<u className=\"text-gradient-6\">/\\\\\\</u>__<u className=\"text-gradient-6\">\\//\\\\\\</u>__<u className=\"text-gradient-6\">/\\\\\\</u>__<u className=\"text-gradient-6\">\\//\\\\\\</u>_<u className=\"text-gradient-6\">\\/\\\\\\</u>_<u className=\"text-gradient-6\">\\//\\\\\\</u>__<u className=\"text-gradient-6\">\\/\\\\\\</u>_____<u className=\"text-gradient-6\">/\\\\\\//</u>________   <br/></div>\r\n          <div id=\"logo-line-7\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-7\">\\/\\\\\\</u>_________<u className=\"text-gradient-7\">\\//\\\\\\</u>__<u className=\"text-gradient-7\">/\\\\\\</u>__<u className=\"text-gradient-7\">\\//\\\\\\</u>__<u className=\"text-gradient-7\">/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>___<u className=\"text-gradient-7\">/\\\\\\/</u>___________  <br/></div>\r\n          <div id=\"logo-line-8\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-8\">\\/\\\\\\</u>__________<u className=\"text-gradient-8\">\\///\\\\\\\\\\/</u>____<u className=\"text-gradient-8\">\\///\\\\\\\\\\/</u>___<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\</u>_ <br/></div>\r\n          <div id=\"logo-line-9\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-9\">\\///</u>_____________<u className=\"text-gradient-9\">\\/////</u>________<u className=\"text-gradient-9\">\\/////</u>_____<u className=\"text-gradient-9\">\\///</u>___<u className=\"text-gradient-9\">\\///</u>___<u className=\"text-gradient-9\">\\///</u>__<u className=\"text-gradient-9\">\\///////////////</u>__<br/></div>\r\n        </pre>            \r\n      </div>\r\n    </div>,\r\n  \r\n    //page 2 AOC\r\n    <>\r\n      <div id=\"modal-text-wrapper\" className=\"modal-text-wrapper-aoc\">\r\n          <div id=\"modal-text\" style={{fontSize: \"2.5rem\", justifyContent: \"space-around\"}}>\r\n            {acknowledgementOfCountryText}\r\n          </div>\r\n      </div>\r\n      <button id=\"modal-continue-button\" onClick={() => setCurrentModalPage(currentModalPage + 1)}> Continue </button>\r\n    </>,\r\n\r\n    //BF working on time stuff\r\n    <>\r\n      <div id=\"modal-title-wrapper\">\r\n        <div id=\"modal-title\">\r\n          Welcome to room2.fm live!\r\n        </div>\r\n      </div>\r\n      <div id=\"modal-text-wrapper\">\r\n        <div id=\"modal-text-vert-align\">\r\n          <div id=\"modal-text\">\r\n            {sunriseText}\r\n            {moonShape}\r\n            {nextMoonShape}\r\n          </div>\r\n        </div>\r\n      </div>        \r\n      <button id=\"modal-continue-button\" onClick={() => setCurrentModalPage(currentModalPage + 1)}> Continue </button>\r\n    </>,\r\n  \r\n    //page 3 Welcome\r\n    <>\r\n      <div id=\"modal-title-wrapper\">\r\n        <div id=\"modal-title\">\r\n          Welcome to room2.fm async\r\n        </div>\r\n        <hr />\r\n      </div>\r\n      <div id=\"modal-text-wrapper\">\r\n          <div id=\"modal-text\">\r\n            {introText}\r\n          </div>\r\n      </div>        \r\n      <button id=\"modal-continue-button\" onClick={() => setCurrentModalPage(currentModalPage + 1)}> Continue </button>\r\n    </>,\r\n  \r\n    //page 4 Instructions\r\n    <>\r\n      <div id=\"modal-title-wrapper\">\r\n        <div id=\"modal-title\">\r\n          Welcome to room2.fm async\r\n        </div>\r\n        <hr />\r\n      </div>\r\n      <div id=\"modal-text-wrapper\">\r\n          <div id=\"modal-text\">\r\n            {instructionsText}\r\n          </div>\r\n      </div>        \r\n      <button id=\"modal-continue-button\" onClick={() => props.toggleModal()}> Continue </button>\r\n    </>\r\n  ]\r\n\r\n  return (\r\n    <div id=\"AOC-modal\"\r\n         className=\"ModalWrapper\"\r\n         aria-labelledby=\"modal-title\"\r\n         aria-hidden=\"false\" >\r\n\r\n      <div data-a11y-dialog-hide className=\"ModalOverlay\" ></div>\r\n\r\n      <div role=\"document\" className=\"ModalBox\">\r\n        {modalPages[currentModalPage]}\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { Component } from 'react';\r\nimport { Shaders, Node, GLSL, NearestCopy} from \"gl-react\";\r\nimport { Surface } from \"gl-react-dom\";\r\n\r\nexport const shaders = Shaders.create({\r\n  onecolour: {\r\n    frag: GLSL`\r\n    // based on Inigo Quilez noise shader https://www.shadertoy.com/view/XdXGW8\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    const vec3 ycol = vec3(.824,.953,.91);\r\n    const vec3 lcol = vec3(.961,.652,.266);\r\n    const vec3 rcol = vec3(.184,.219,.297);\r\n    \r\n    vec2 hash( vec2 x ) {\r\n      const vec2 k = vec2( 0.3183099, 0.3678794 );\r\n      x = x*k + k.yx;\r\n      return -1.0 + 2.0*fract( 16.0 * k*fract( x.x*x.y*(x.x+x.y)) );\r\n    }\r\n\r\n    float noise( in vec2 p ) {\r\n      vec2 i = floor( p );\r\n      vec2 f = fract( p );\t\r\n\t    vec2 u = f*f*(3.0-2.0*f);\r\n      return mix( mix( dot( hash( i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ), \r\n                       dot( hash( i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\r\n                  mix( dot( hash( i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ), \r\n                       dot( hash( i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\r\n    }\r\n\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      vec2 st = gl_FragCoord.xy / res;\r\n      vec2 translate = vec2(0.,0.5*timer);\r\n      if (fract( st.y * 0.5) > 0.4  || fract( st.y * 0.5) < 0.2){\r\n        st.x += translate.y*0.35; }\r\n      else {\r\n        if (fract( st.x * 0.5) > 0.2 || fract( st.x * 0.5) < 0.3){\r\n          st.x -= timer*0.5; }\r\n        else {\r\n          st.x += timer*0.35; }\r\n      }\r\n      if (fract( st.y * 0.5) > 0.8 || fract( st.y * 0.5) < 0.6){\r\n        st.x += translate.y*0.35; }\r\n      else {\r\n        if (fract( st.x * 0.5) < 0.4 || fract( st.x * 0.5) > 0.3){\r\n          st.x -= timer*0.5; }\r\n        else {\r\n          st.x += timer*0.35; }\r\n      }      \r\n      float f = noise( 2.0*st );\r\n      f = 1.-(0.6 + 0.2*f);\r\n      vec3 ycol = ycol * (0.5 * sin(timer));\r\n\r\n      gl_FragColor = vec4(min(mix(ycol,mix(rcol,lcol,uv.x-0.2),uv.y+0.2), vec3(f,f,f)), 1.0);\r\n    }`\r\n}});\r\n\r\nexport class GLVis extends Component {\r\n  render() {\r\n    return <>\r\n    <Surface width={this.props.width} height={this.props.height}>\r\n\r\n      <NearestCopy>\r\n        <Node shader={shaders.onecolour} ignoreUnusedUniforms uniforms={{timer: this.props.timer, width: this.props.width*0.75, height: this.props.width*0.68}} width={this.props.width*0.75} height={this.props.height*0.68} /> \r\n      </NearestCopy>\r\n                              \r\n    </Surface>\r\n    </>;\r\n  }\r\n}\r\n\r\nexport default GLVis;\r\n","import React, { useEffect, useRef, useState } from 'react'\r\n\r\nexport default function ResponseDisplay(props) {\r\n  \r\n  //length between displaying the responses\r\n  const responseLoopDelay = 1000;\r\n\r\n  // time for fade in/out and for how long the response is visible in ms\r\n  const responseFadeTime = 1500;\r\n  const responseHangTime = 15000;\r\n\r\n  const [responsesToDisplay, setResponsesToDisplay] = useState([]);\r\n  const responsesToDisplayRef = useRef();\r\n  const responsesDisplaying = useRef(false);\r\n\r\n  const displaysOnScreen = 3;\r\n\r\n  // useeffect to run only after the first time responses to display is updated to contain responses, not the following times it's order is updated\r\n  useEffect(() => {\r\n    if(responsesToDisplay.length > 0 && !responsesDisplaying.current){\r\n      for(let i = 0; i < displaysOnScreen; i++){\r\n        setTimeout(displayNextResponse, responseFadeTime*i);\r\n      }      \r\n      responsesDisplaying.current = true;\r\n    }\r\n    responsesToDisplayRef.current = responsesToDisplay;\r\n  }, [responsesToDisplay]);\r\n\r\n  // run loop once new response data arrives\r\n  useEffect(() => {\r\n    if(props.responseData.length > 0){\r\n      setResponsesToDisplay(props.responseData);\r\n      responsesToDisplayRef.current = props.responseData;\r\n    }\r\n  }, [props.responseData]);\r\n\r\n  return (\r\n    <div id=\"response-wrapper\"></div>\r\n  )\r\n\r\n  function displayNextResponse(){\r\n    let modOrderResponses = Array.from(responsesToDisplayRef.current);\r\n    let nextResponse = modOrderResponses.pop();\r\n    if(nextResponse[1] === 'image'){\r\n      createImageResponseDisplay(nextResponse[0]);\r\n    } else {\r\n      createTextResponseDisplay(nextResponse[0]);\r\n    }\r\n    setResponsesToDisplay([nextResponse].concat(modOrderResponses));\r\n  }\r\n\r\n  function createImageResponseDisplay(imageResponse){\r\n    let newResponseBox = document.createElement('img');\r\n    let collision = false;\r\n    newResponseBox.classList.add('ImageResponseBox');\r\n    let xRandom = Math.random();\r\n    let yRandom = Math.random();\r\n    newResponseBox.addEventListener(\"load\", (e) => {\r\n      // add to the page\r\n      document.getElementById('response-wrapper').appendChild(newResponseBox);\r\n      let responseBoxDimensions = newResponseBox.getBoundingClientRect();\r\n      newResponseBox.style.left = (80 * xRandom) + \"%\";\r\n      newResponseBox.style.top = ((100 - (props.height / responseBoxDimensions.height)) * yRandom) + \"%\";\r\n      let colliderArray = Array.from(document.getElementsByClassName(\"Collider\"));\r\n      for (let i = 0; i < colliderArray.length; i++) {\r\n        if(detect2DBoxCollision(newResponseBox.getBoundingClientRect(), colliderArray[i].getBoundingClientRect()) && !collision){\r\n          collision = true;\r\n        }\r\n      }\r\n      if(collision){\r\n        newResponseBox.remove();\r\n        window.requestAnimationFrame(() => createImageResponseDisplay(imageResponse));\r\n        console.log(\"loop\");\r\n      } else {\r\n        newResponseBox.classList.add(\"Collider\");\r\n        responseFadeInOut(newResponseBox);\r\n      } \r\n    });\r\n    newResponseBox.src = 'https://humstore.thelongesthum.world/'+imageResponse;\r\n  }\r\n\r\n  function createTextResponseDisplay(textResponse){\r\n    let newResponseBox = document.createElement('p');\r\n    let collision = false;\r\n    newResponseBox.innerHTML = textResponse;\r\n    newResponseBox.classList.add('TextResponseBox');\r\n    let xRandom = Math.random();\r\n    let yRandom = Math.random();\r\n    document.getElementById('response-wrapper').appendChild(newResponseBox);\r\n    let responseBoxDimensions = newResponseBox.getBoundingClientRect();\r\n    newResponseBox.style.left = (80 * xRandom) + \"%\";\r\n    newResponseBox.style.top = ((100 - (props.height / responseBoxDimensions.height)) * yRandom) + \"%\";\r\n    let colliderArray = Array.from(document.getElementsByClassName(\"Collider\"));\r\n    for (let i = 0; i < colliderArray.length; i++) {\r\n      if(detect2DBoxCollision(newResponseBox.getBoundingClientRect(), colliderArray[i].getBoundingClientRect()) && !collision){\r\n        collision = true;\r\n      }\r\n    }\r\n    if(collision){\r\n      newResponseBox.remove();\r\n      window.requestAnimationFrame(() => createTextResponseDisplay(textResponse));\r\n    } else {\r\n      newResponseBox.classList.add(\"Collider\");\r\n      responseFadeInOut(newResponseBox);\r\n    } \r\n  }\r\n\r\n  function responseFadeInOut(responseElement){\r\n    responseElement.style.transition = responseFadeTime + \"ms\";\r\n    setTimeout(() =>{\r\n      // responseElement.classList.add('FadeIn');\r\n      responseElement.style.opacity = 1;\r\n      setTimeout(() => {responseElement.style.opacity = 0;}, responseHangTime);\r\n      setTimeout(() => {responseElement.remove(); displayNextResponse();}, responseFadeTime + responseHangTime + 100);\r\n    }, 100);\r\n  }\r\n}\r\n\r\nfunction detect2DBoxCollision(box1, box2){\r\n  let collision = false;\r\n  if(box1.left < box2.right &&\r\n     box1.right > box2.left &&\r\n     box1.top < box2.bottom &&\r\n     box1.bottom > box2.top) {\r\n      collision = true;\r\n      console.log(\"hit\");\r\n    }\r\n  return collision;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\n\r\n/* set amount of volume notches on volume bar */\r\nvar notchNumber = 12;\r\n\r\nexport default function AudioTrackPlayer(props) {\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [audioSource, setAudioSource] = useState(null);\r\n\r\n  useEffect(() => {\r\n    //set reference to audio\r\n    let audioSourceRef = document.getElementById(\"audio-source\");\r\n    setAudioSource(audioSourceRef);\r\n    props.setAudioSourceRef(audioSourceRef);\r\n    //set reference to timeline\r\n    let timeline = document.getElementById(\"timeline\");\r\n    //add waiting animation\r\n    audioSourceRef.addEventListener('waiting', () => {\r\n      timeline.className = \"\";\r\n      timeline.className = \"timelineloading\";\r\n    });\r\n    audioSourceRef.addEventListener('playing', () => {\r\n      timeline.className = \"\";\r\n      timeline.className = \"timelineloaded\";\r\n    });\r\n    //add animation when playing\r\n    audioSourceRef.addEventListener('timeupdate', () => {\r\n      timeline.firstChild.style.width = (100 * audioSourceRef.currentTime/audioSourceRef.duration) + \"%\";\r\n    });\r\n    //add timeline click\r\n    timeline.addEventListener(\"click\", (e) => {\r\n      //get percentage of where timeline clicked\r\n      let clickPercent = (e.clientX - timeline.getBoundingClientRect().left) / timeline.offsetWidth;\r\n      // set playhead\r\n      timeline.firstChild.style.width = (100 * clickPercent) + \"%\";\r\n      // set new track time\r\n      audioSourceRef.currentTime = audioSourceRef.duration * clickPercent;\r\n    })\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"audio-player-wrapper\" className=\"Collider\">\r\n      {/* audio source */}\r\n      <audio src={require(\"../content/sade.mp3\").default} id=\"audio-source\" />\r\n      {/* play button */}\r\n      <button id=\"play-pause-button\" className=\"AudioPlayerButton\" onClick={playPauseAudio}>\r\n        {isPlaying\r\n            ? <PauseIcon />\r\n            : <PlayIcon /> }\r\n      </button>\r\n      {/* reset button */}\r\n      <button className=\"AudioPlayerButton\" onClick={() => {audioSource.currentTime = 0; props.restartTimer()}}>\r\n        <RewindIcon />\r\n      </button>\r\n      {/*Audio Timeline*/}\r\n      <div id=\"timeline\" className=\"timelineloaded\">\r\n        <div id=\"playhead\" />\r\n      </div>\r\n      {/* volume section */}\r\n      <div id=\"volume-section-wrapper\">\r\n        {/* mute button */}\r\n        <button className=\"AudioPlayerButton\" id=\"mute-button\" onClick={muteAudio}>\r\n          {isMuted\r\n            ? <MuteIconOff />\r\n            : <MuteIconOn /> }                    \r\n        </button>\r\n        {/* volume slider */}\r\n        <div id=\"volume-wrapper\">\r\n            {VolumeNotches}\r\n        </div>\r\n      </div>               \r\n    </div>\r\n  )\r\n  function playPauseAudio(){\r\n    if(audioSource.paused){\r\n      audioSource.play();\r\n      setIsPlaying(true);\r\n      props.startTimer();\r\n      props.setAskResponse(true);\r\n    } else {\r\n      audioSource.pause();\r\n      setIsPlaying(false);\r\n      props.pauseTimer();\r\n    }\r\n  }  \r\n  function muteAudio(){\r\n    audioSource.muted = !audioSource.muted;\r\n    setIsMuted(!isMuted);\r\n  }\r\n}\r\n\r\nlet volNotchGen = Array(notchNumber).fill('');\r\n\r\n/* can this be changed to button? */\r\n\r\nconst VolumeNotches = volNotchGen.map((nothing, index) =>\r\n  <div className='VolumeNotch VolumeActive' id={index} \r\n       onMouseDown={clickVolumeNotch}\r\n       onMouseEnter={(e) => {if(isMouseDown){clickVolumeNotch(e)}}}\r\n       style={{height: 100/volNotchGen.length + \"%\"}} />\r\n)\r\n\r\n/* keep track of mouse down for volume drag event */\r\nvar isMouseDown = false;\r\ndocument.addEventListener(\"mouseup\", () => {isMouseDown = false});\r\n\r\nfunction clickVolumeNotch(e){\r\n  e.stopPropagation();\r\n  isMouseDown = true;\r\n  let clickedID = parseInt(e.target.id);\r\n  /* set classes for active notch */\r\n  let notches = document.getElementsByClassName(\"VolumeNotch\");\r\n  for (let notch of notches){\r\n    if(notch.id < clickedID){\r\n      notch.classList.remove(\"VolumeActive\");\r\n    } else {\r\n      notch.classList.add(\"VolumeActive\");\r\n    }  \r\n  }\r\n  /* set new volume */\r\n  let newVolume = 1 - (1/notchNumber) * clickedID;\r\n  document.getElementById(\"audio-source\").volume = newVolume;\r\n}\r\n\r\nfunction PlayIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 110 110\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\">\r\n        <g transform=\"scale(.8) translate(15)\" style={{transformOrigin: \"center\"}} className=\"AudioPlayerIcon\">\r\n          <polygon points=\"10,10 73,55 10,100\"\r\n                   strokeLinejoin=\"round\"\r\n                   strokeWidth=\"20\"\r\n          />\r\n        </g>        \r\n    </svg>\r\n  )\r\n}\r\nfunction PauseIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 110 110\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\">\r\n        <g transform=\"scale(.8) translate(15)\" style={{transformOrigin: \"center\"}} className=\"AudioPlayerIcon\">\r\n          <path strokeLinecap=\"round\" strokeWidth=\"30\"\r\n              d=\" M 67.5,15\r\n                  L 67.5,95\" />\r\n          <path strokeLinecap=\"round\" strokeWidth=\"30\"\r\n              d=\" M 15,15\r\n                  L 15,95\" />\r\n        </g>        \r\n    </svg>\r\n  )\r\n}\r\nfunction RewindIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 110 110\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\">\r\n        <g transform=\"scale(.8)\" style={{transformOrigin: \"center\"}} className=\"AudioPlayerIcon\">\r\n          <polygon points=\"10,10 73,55 10,100\"\r\n                   strokeLinejoin=\"round\"\r\n                   strokeWidth=\"20\"\r\n                   transform=\"translate(-25) rotate(180, 55, 55)\"\r\n          />\r\n          <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"20\"\r\n              d=\" M 100,10\r\n                  L 100,100\" />\r\n        </g>\r\n               \r\n    </svg>\r\n  )\r\n}\r\nfunction MuteIconOn(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\"\r\n      className=\"AudioPlayerIcon\">\r\n        {/* Speaker */}\r\n        <path id=\"mute-speaker\"\r\n              d=\" M 10,42\r\n              A 2,2 90 0 1 12,40\r\n              L 15,40 30,15 35,15\r\n              Q 38,50 35,85 \r\n              L 30,85 15,60 12,60\r\n              A 2,2 90 0 1 10,58\r\n              Z              \r\n        \" />\r\n        {/* Volume Lines */}\r\n        <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 45,35\r\n                  Q 55,50 45,65\" />\r\n        <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 55,22.5\r\n                  Q 77.33,50 55,77.5\" />\r\n        <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 65,10\r\n                  Q 101.66,50 65,90\" />\r\n    </svg>\r\n  )\r\n}\r\nfunction MuteIconOff(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      opacity=\"50%\"\r\n      className=\"AudioPlayerIcon\">\r\n        {/* Speaker */}\r\n        <path id=\"mute-speaker\"\r\n              d=\" M 10,42\r\n              A 2,2 90 0 1 12,40\r\n              L 15,40 30,15 35,15\r\n              Q 38,50 35,85 \r\n              L 30,85 15,60 12,60\r\n              A 2,2 90 0 1 10,58\r\n              Z              \r\n        \" />\r\n        <path fill=\"none\" strokeWidth=\"6\" \r\n              d=\" M 50, 35\r\n                  L 80, 65\r\n              \" />\r\n        <path fill=\"none\" strokeWidth=\"6\"\r\n              d=\" M 80, 35\r\n                  L 50, 65\r\n              \" />\r\n    </svg>\r\n  )\r\n}","import React, { Component } from 'react';\r\n\r\n\r\nexport class DrawingTools extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n    frameColour: \"#ffffff88\"\r\n    }\r\n    \r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n      \r\n              <div id=\"drawing-buttons-wrapper\">\r\n                {/* <button>bigger brush</button>\r\n                <button>smaller brush</button>\r\n                <button>eraser</button>\r\n                <button>undo</button>\r\n                <button>redo</button> */}\r\n                <button id=\"increase-brush-button\" className=\"RightUIButton\"> BRUSH + <div id=\"brush-up-icon\" /></button>\r\n                <button id=\"decrease-brush-button\" className=\"RightUIButton\"> BRUSH - <div id=\"brush-down-icon\" /></button>\r\n                <button id=\"erase-brush-button\" className=\"RightUIButton\" onClick={this.props.toggleEraser}> ERASER <div id=\"eraser-icon\" /></button>\r\n                <button id=\"undo-button\" className=\"RightUIButton\" onClick={this.props.undoDrawing}> UNDO <div id=\"undo-icon\" /></button>\r\n                <button id=\"redo-button\" className=\"RightUIButton\" onClick={this.props.redoDrawing}> REDO <div id=\"redo-icon\" /></button>\r\n              \r\n              </div>\r\n      </>\r\n    )\r\n  }\r\n  componentDidMount() {\r\n    // increase brush size on click if within limit\r\n    document.getElementById(\"increase-brush-button\").addEventListener('click', () => {\r\n      if(this.props.brushSize < 20){ this.props.setBrushSize(this.props.brushSize + 2 ) }\r\n    });\r\n    // decrease brush size on click if within limit\r\n    document.getElementById(\"decrease-brush-button\").addEventListener('click', () => {\r\n      if(this.props.brushSize > 2){ this.props.setBrushSize(this.props.brushSize - 2 ) }\r\n    });\r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if (prevProps.colours[0] !== this.props.colours[0]) {\r\n      var c = this.props.colours[0].substring(1);      // strip #\r\n      var rgb = parseInt(c, 16);   // convert rrggbb to decimal\r\n      var r = (rgb >> 16) & 0xff;  // extract red\r\n      var g = (rgb >>  8) & 0xff;  // extract green\r\n      var b = (rgb >>  0) & 0xff;  // extract blue\r\n      \r\n      var luma = 0.2126 * r + 0.7152 * g + 0.0722 * b; // per ITU-R BT.709\r\n      \r\n      if (luma < 40) {\r\n          this.setState({ frameColour: \"#ffffff88\" })\r\n      } else {\r\n          this.setState({ frameColour: \"#00000088\" })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default DrawingTools\r\n","import React, { Component } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nexport class DrawingCanvas extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n    }\r\n    this.getCustomCursor = this.getCustomCursor.bind(this);\r\n    this.updateCanvasDimensions = this.updateCanvasDimensions.bind(this);\r\n  }\r\n  render() {\r\n    return (\r\n      <div id=\"drawing-canvas-wrapper\">\r\n        <canvas id=\"drawing-canvas\" />\r\n        <svg\r\n          width=\"10px\"\r\n          height=\"10px\"\r\n          viewBox=\"0 0 10 10\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          id=\"drawing-cursor\">\r\n          <circle  r=\"5\" fill=\"white\"/>\r\n        </svg>\r\n      </div>\r\n    )\r\n  }\r\n  componentDidMount() { \r\n    this.fabricInit();\r\n   }\r\n   \r\n  componentWillUnmount() {  }\r\n  componentDidUpdate(prevProps) {\r\n    /* update brush colour */\r\n    if (prevProps.brushColour !== this.props.brushColour) {\r\n      let newCanvasSetting = this.state.canvas;\r\n      newCanvasSetting.freeDrawingBrush.color = this.props.brushColour;\r\n      newCanvasSetting.freeDrawingCursor = this.getCustomCursor();\r\n    }\r\n    /* update brush size */\r\n    if (prevProps.brushSize !== this.props.brushSize) {\r\n      let newCanvasSetting = this.state.canvas;\r\n      newCanvasSetting.freeDrawingBrush.width = this.props.brushSize;\r\n      newCanvasSetting.freeDrawingCursor = this.getCustomCursor();\r\n    }  \r\n  }\r\n  fabricInit(){\r\n    let canvas = new fabric.Canvas('drawing-canvas', { isDrawingMode: true });\r\n    let canvasWrapperRef = document.getElementById(\"drawing-canvas-wrapper\"); \r\n    canvas.setWidth(canvasWrapperRef.offsetWidth);\r\n    canvas.setHeight(canvasWrapperRef.offsetHeight);\r\n    canvas.freeDrawingBrush.color = this.props.brushColour;    \r\n    canvas.freeDrawingBrush.width = this.props.brushSize;\r\n    canvas.freeDrawingCursor = this.getCustomCursor();\r\n    canvas.on('mouse:down', () => this.setDrawing());\r\n    this.setState({ canvas: canvas },\r\n      () => { window.addEventListener('resize', this.updateCanvasDimensions); });\r\n    this.props.setDrawingCanvas(canvas);\r\n    this.props.setCurrentCanvasState(canvas.toDatalessJSON());\r\n  }\r\n  updateCanvasDimensions() {\r\n    let canvasWrapperRef = document.getElementById(\"drawing-canvas-wrapper\");\r\n    if(canvasWrapperRef){\r\n      this.state.canvas.setWidth(canvasWrapperRef.offsetWidth);\r\n      this.state.canvas.setHeight(canvasWrapperRef.offsetHeight);\r\n      this.setState({ canvasWidth: canvasWrapperRef.offsetWidth, \r\n        canvasHeight: canvasWrapperRef.offsetHeight });\r\n    }       \r\n  }\r\n  setDrawing(){\r\n    /* console.log(\"canvas-click\") */\r\n    this.props.setIsDrawing(true);    \r\n  }\r\n  /* Custom Cursor - Curtis Jurgensen - https://codepen.io/curtisj44/pen/yGxJNX*/\r\n  getCustomCursor = () => {\r\n    const circle = `\r\n          <svg\r\n            height=\"${ this.props.brushSize }\"\r\n            fill=\"${ this.props.brushColour }\"\r\n            viewBox=\"0 0 ${ this.props.brushSize * 2 } ${ this.props.brushSize * 2 }\"\r\n            width=\"${ this.props.brushSize }\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n          >\r\n            <circle\r\n              cx=\"50%\"\r\n              cy=\"50%\"\r\n              r=\"${ this.props.brushSize }\" \r\n            />\r\n          </svg>\r\n        `;\r\n        \r\n        return `url(data:image/svg+xml;base64,${ window.btoa(circle) }) ${ this.props.brushSize / 2 } ${ this.props.brushSize / 2 }, move`;\r\n      };\r\n}\r\n\r\nexport default DrawingCanvas\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\n\r\nexport class ColourPicker extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n    }\r\n    this.click = this.click.bind(this);\r\n  }\r\n  render() {\r\n    return (\r\n      <div id=\"drawing-tools-wrapper\">\r\n        <button id=\"col-swap-button\" onClick={this.click}>\r\n          <SwapIcon />\r\n        </button>\r\n        <span id=\"word-change\">CHANGE</span>\r\n        <span id=\"word-colour\">COLOUR</span>\r\n        <div id=\"col-select-wrapper\">\r\n          <input type=\"color\" id=\"col1Select\" className=\"col-select first\" name=\"col1Select\" defaultValue={this.props.colours[0]} />\r\n          <input type=\"color\" id=\"col2Select\" className=\"col-select second\" name=\"col23Select\" defaultValue={this.props.colours[1]} />\r\n          <input type=\"color\" id=\"col3Select\" className=\"col-select third\" name=\"col33Select\" defaultValue={this.props.colours[2]} />\r\n        </div>\r\n      </div>      \r\n    )\r\n  }\r\n  componentDidMount(){\r\n    document.getElementById('col1Select').addEventListener(\"input\", this.colorInputChange.bind(this), false);\r\n    document.getElementById('col2Select').addEventListener(\"input\", this.colorInputChange.bind(this), false);\r\n    document.getElementById('col3Select').addEventListener(\"input\", this.colorInputChange.bind(this), false);\r\n  }\r\n  click(){\r\n    let selectors = document.getElementsByClassName(\"col-select\");\r\n    for (let i = 0; i < 3; i++){\r\n      let cl = selectors[i].classList;\r\n      switch(true){\r\n        case cl.contains('first'):\r\n        cl.remove('first');\r\n        cl.add('third');\r\n        break;\r\n        case cl.contains('second'):\r\n        cl.remove('second');\r\n        cl.add('first');\r\n        break;\r\n        case cl.contains('third'):\r\n        cl.remove('third');\r\n        cl.add('second');\r\n        break;\r\n        default:\r\n        break;\r\n      }\r\n    }\r\n    this.props.setCurrentColours([\r\n      this.props.colours[1],\r\n      this.props.colours[2],\r\n      this.props.colours[0]\r\n    ]);\r\n  }\r\n  colorInputChange(e){\r\n    let colNum = e.target.id.charAt(3);\r\n    document.documentElement.style.setProperty('--comp-col-0'+colNum, e.target.value);\r\n    switch(e.target.classList[1]){\r\n      case \"first\":\r\n        this.props.setCurrentColours(this.props.colours.splice(0, 1, e.target.value));\r\n        break;\r\n      case \"second\":\r\n        this.props.setCurrentColours(this.props.colours.splice(1, 1, e.target.value));\r\n        break;\r\n      case \"third\":\r\n        this.props.setCurrentColours(this.props.colours.splice(2, 1, e.target.value));\r\n        break;\r\n      default:\r\n    }\r\n  }\r\n  \r\n}\r\n\r\nexport default ColourPicker\r\n\r\n/* expecting a 5:1 aspect ratio */\r\nfunction SwapIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\" >\r\n        {/* Arrow Head */}\r\n        <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"6\" refX=\"7\" refY=\"3\" orient=\"auto\">\r\n          <polygon points=\"0 0, 8 3.5, 0 6\" />\r\n        </marker>\r\n        {/* <rect width=\"100%\" height=\"100%\" fill=\"red\" /> */}\r\n        {/* <rect width=\"100%\" height=\"1%\" y=\"50%\" fill=\"blue\" />\r\n        <rect width=\"1%\" height=\"100%\" x=\"25%\" fill=\"blue\" /> */}\r\n        {/* Line */}\r\n        <path fill=\"none\" strokeWidth=\"8\" markerEnd=\"url(#arrowhead)\" \r\n              d=\" M 25, 50\r\n                  L 0,13.4 100,13.4 50,86.6\r\n                  \" />\r\n        {/* <path fill=\"none\" stroke=\"black\" strokeWidth=\"2\" marker-end=\"url(#arrowhead)\"\r\n              d=\" M 35,15\r\n                  L 17.5,15 17.5,5 82.5,5 82.5,15 65,15\" /> */}\r\n    </svg>\r\n  )\r\n}\r\n\r\n","import React from 'react'\r\n\r\nexport default function SettingsMenu(props) {\r\n  return (\r\n    <div id=\"settings-menu-wrapper\" className='Collider'>\r\n\r\n      <button id=\"settings-menu-button\">MENU</button>\r\n      <div id=\"settings-dropdown\">\r\n\r\n        <button id=\"settings-info-button\">INFO</button>\r\n\r\n        <button id=\"settings-graphics-button\">GRAPHICS</button>\r\n        <div id=\"graphics-dropdown\">\r\n          <button className=\"GraphicsButton\">LOW</button>\r\n          <button className=\"GraphicsButton\">MEDIUM</button>\r\n          <button className=\"GraphicsButton\">HIGH</button>\r\n        </div>\r\n\r\n        <button id=\"settings-focus-button\" onClick={props.toggleFocus}>FOCUS</button>\r\n\r\n      </div>      \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n/* import React, { Component } from 'react'\r\n\r\nexport class SettingsMenu extends Component {\r\n  render() {\r\n    return (\r\n      <div id=\"settings-menu-wrapper\">\r\n      <button id=\"settings-menu-button\">MENU</button>\r\n      <div id=\"settings-dropdown\">\r\n        <button id=\"settings-info-button\" onClick={this.props.overlayToggle}>INFO</button>\r\n        <button id=\"settings-graphics-button\">GRAPHICS</button>\r\n          <div id=\"graphics-dropdown\">\r\n            <button className=\"GraphicsButton\">LOW</button>\r\n            <button className=\"GraphicsButton\">MEDIUM</button>\r\n            <button className=\"GraphicsButton\">HIGH</button>\r\n          </div>\r\n        <button id=\"settings-focus-button\" onClick={this.props.toggleFocus}>FOCUS</button>\r\n      </div>\r\n      \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SettingsMenu */\r\n","import React, { useState } from 'react';\r\nimport IntroModal from './introModal';\r\nimport GLVis from './glVis';\r\nimport ResponseDisplay from './responseDisplay';\r\nimport AudioTrackPlayer from './audioTrackPlayer';\r\nimport DrawingTools from './drawingTools';\r\nimport DrawingCanvas from './drawingCanvas';\r\nimport ColourPicker from './colourPicker';\r\nimport SettingsMenu from './settingsMenu';\r\n\r\n/* set timer refresh rate in ms */\r\nconst timerRefreshRate = 50;\r\n\r\nexport default function DesktopApp(props) {\r\n\r\n  const[askResponse, setAskResponse] = useState(false);\r\n  const[readyToRespond, setReadyToRespond] = useState(false);  \r\n\r\n  const[timer, setTimer] = useState(0.);\r\n  const[timerInterval, setTimerInterval] = useState(0.);\r\n  const[audioSourceRef, setAudioSourceRef] = useState(null);\r\n\r\n  return (\r\n    <div id=\"desktop-wrapper\">\r\n      {props.modalIsOpen\r\n        /* if true show modal */\r\n        ? <IntroModal\r\n            mobile={props.mobile}\r\n            toggleModal={props.toggleModal} />\r\n        /* else show the desktop app */\r\n        : <>\r\n          {/* Settings Menu */}\r\n          <SettingsMenu\r\n            toggleFocus={props.toggleFocus} />\r\n          {/* Daily Prompt */}\r\n          <div id=\"current-prompt-wrapper\" className=\"Collider\">\r\n            <div id=\"current-prompt\">\r\n              Take a deep breath. As you exhale, what feelings linger for you?\r\n              <br />\r\n              Share as much or as little as you’d like.\r\n            </div>\r\n          </div>\r\n          {/* Audio Player */}\r\n          <AudioTrackPlayer\r\n            setAudioSourceRef={setAudioSourceRef}\r\n            startTimer={startTimer}\r\n            pauseTimer={pauseTimer}\r\n            restartTimer={restartTimer}\r\n            setAskResponse={setAskResponse}\r\n            />\r\n          {/* Ask if ready to respond */} \r\n          {askResponse &&\r\n            <button id=\"ready-submission-button\" onClick={() => {setReadyToRespond(true); setAskResponse(false);}}> i'm ready to respond </button>\r\n          }\r\n          {/* Show response input */}\r\n          {readyToRespond &&\r\n            <>                           \r\n              <div id=\"input-wrapper\">\r\n                <div id=\"input-select-wrapper\">\r\n                  <span id=\"input-select\">\r\n                    I would like to&nbsp;\r\n                    <button id=\"draw-input-select\" className=\"InputSelectButton\" onClick={() => props.setInput(true)}>draw</button>\r\n                    &nbsp;/&nbsp;\r\n                    <button id=\"text-input-select\" className=\"InputSelectButton ActiveInputButton\" onClick={() => props.setInput(false)}>write</button>\r\n                    &nbsp;a response\r\n                  </span>\r\n                </div>\r\n                <div id=\"input-area\">\r\n                  <textarea id=\"text-input\" name=\"text based prompt response\" placeholder=\"Please type your response here...\" />\r\n                  <DrawingTools\r\n                    undoDrawing={props.undoDrawing}\r\n                    redoDrawing={props.redoDrawing}\r\n                    toggleEraser={props.toggleEraser}\r\n                    colours={props.colours}\r\n                    brushSize={props.brushSize}\r\n                    setBrushSize={props.setBrushSize} />\r\n                  <DrawingCanvas \r\n                    brushColour={props.colours[0]}\r\n                    brushSize={props.brushSize}\r\n                    setDrawingCanvas={props.setDrawingCanvas}\r\n                    setCurrentCanvasState={props.setCurrentCanvasState}\r\n                    setIsDrawing={props.setIsDrawing} />\r\n                  <ColourPicker \r\n                    colours={props.colours}\r\n                    setCurrentColours={props.setCurrentColours} />\r\n                  <button onClick={() => {\r\n                    props.submitResponse();\r\n                    setReadyToRespond(false);\r\n                  }}>submit</button>\r\n                </div>               \r\n              </div>\r\n            </>            \r\n          }\r\n          {/* External Response Overlay */}\r\n          <ResponseDisplay \r\n            responseData={props.responseData}\r\n            height={props.height}\r\n            width={props.width} />\r\n          {/* Background Visuals */}\r\n          <div id=\"bg-vis-wrapper\">              \r\n            <GLVis\r\n              timer={timer}\r\n              height={props.height}\r\n              width={props.width} />          \r\n          </div> \r\n          </>\r\n      }\r\n    </div>\r\n  )\r\n  /* update timer value (based on track position) */\r\n  function startTimer() {\r\n    setTimerInterval(setInterval(() => {\r\n      setTimer(100 * audioSourceRef.currentTime/audioSourceRef.duration)\r\n    }, timerRefreshRate));\r\n  }\r\n  function pauseTimer() {\r\n    clearInterval(timerInterval);    \r\n  }\r\n  function restartTimer() {\r\n    setTimer(0.);    \r\n  }  \r\n}\r\n","export const cyclePresets = [\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"if you're seeing this the server is having some trouble\",\r\n    trackDetails: \"if you're seeing this the server is having some trouble\",\r\n    trackLink: \"\",\r\n    artistLink: \"\",\r\n    trackSrc: \"\",\r\n    shaderName: \"\",\r\n    dbTable: \"\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  }\r\n]","import React, { useEffect, useState, useRef } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nimport './App.css';\r\n\r\nimport DesktopApp from './components/desktopApp';\r\nimport { cyclePresets } from './content/cyclePresets';\r\nimport CollisionTest from './components/collisionTest';\r\n\r\nexport default function App() {\r\n  // is accessed on mobile\r\n  const onMobile = window.matchMedia('all and (any-hover: none)').matches;\r\n  // current window size\r\n  const [windowSize, setWindowSize] = useState([window.innerWidth, window.innerHeight]);\r\n  // is the intro modal open\r\n  const [modalIsOpen, setModalIsOpen] = useState(true);\r\n  // get current position in cycle\r\n  const cyclePos = 0;\r\n  /* const cyclePos = asyncCycleCalc(); */\r\n  /* if false it's assumed to be text instead */\r\n  const[inputIsDraw, setInputIsDraw] = useState(false);\r\n  // other responses from database\r\n  const [responseData, setResponseData] = useState([]);\r\n  // current drawing colours\r\n  const [currentColours, setCurrentColours] = useState(cyclePresets[cyclePos].colours);\r\n  // drawing settings\r\n  const [brushSize, setBrushSize] = useState(8);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  var isDrawingRef = useRef(isDrawing);\r\n  const [isEraser, setIsEraser] = useState(false);\r\n  const [savedBrush, setSavedBrush] = useState(null);\r\n  // undo/redo settings\r\n  const maxUndo = 10;\r\n  const [drawingCanvas, setDrawingCanvas] = useState(null);\r\n  var drawingCanvasRef = useRef(drawingCanvas);\r\n  const [currentCanvasState, setCurrentCanvasState] = useState(null);\r\n  var currentCanvasStateRef = useRef(currentCanvasState);\r\n  const [undoStack, setUndoStack] = useState([]);\r\n  const [redoStack, setRedoStack] = useState([]);\r\n  var undoStackRef = useRef(undoStack);\r\n  var redoStackRef = useRef(redoStack);\r\n  // is focus mode active\r\n  const [focusMode, setFocusMode] = useState(false);\r\n\r\n  // my init function to run on app load\r\n  useEffect(() => {\r\n    // set up to update window dimensions on resize event\r\n    setWindowSize([window.innerWidth, window.innerHeight]);\r\n    window.addEventListener('resize', () => {\r\n      setWindowSize([window.innerWidth, window.innerHeight])});\r\n  }, []);\r\n\r\n  useEffect(() => {isDrawingRef.current = isDrawing}, [isDrawing]);\r\n  useEffect(() => {drawingCanvasRef.current = drawingCanvas}, [drawingCanvas]);\r\n  useEffect(() => {currentCanvasStateRef.current = currentCanvasState}, [currentCanvasState]);\r\n  useEffect(() => {undoStackRef.current = undoStack}, [undoStack]);\r\n  useEffect(() => {redoStackRef.current = redoStack}, [redoStack]);\r\n\r\n  return (\r\n    <div id=\"global-wrapper\">\r\n      {onMobile\r\n      ?<div>I'm on Mobile</div>\r\n      :<DesktopApp      \r\n        width={windowSize[0]}\r\n        height={windowSize[1]}\r\n        modalIsOpen={modalIsOpen}\r\n        toggleModal={toggleModal}\r\n        setIsDrawing={setIsDrawing}\r\n        cyclePreset={cyclePresets[cyclePos]}\r\n        setInput={setInput}\r\n        colours={currentColours}\r\n        setCurrentColours={setCurrentColours}\r\n        brushSize={brushSize}\r\n        setBrushSize={setBrushSize}\r\n        toggleEraser={toggleEraser}\r\n        setDrawingCanvas={setDrawingCanvas}\r\n        setCurrentCanvasState={setCurrentCanvasState}\r\n        undoDrawing={undoDrawing}\r\n        redoDrawing={redoDrawing}\r\n        submitResponse={submitResponse}\r\n        responseData={responseData}\r\n        toggleFocus={toggleFocus}\r\n        />\r\n      }\r\n    </div>\r\n  )\r\n  \r\n  // gets triggered when either the intro or info modal are brought up\r\n  function toggleModal(){\r\n    // add and remove event listener that triggers after drawing to save canvas to undo stack\r\n    if(modalIsOpen){\r\n      document.addEventListener('mouseup', saveCanvasState);\r\n    } else {\r\n      document.removeEventListener('mouseup', saveCanvasState);\r\n    }\r\n    // toggle state\r\n    setModalIsOpen(!modalIsOpen);\r\n  }\r\n  // to change between draw and write - true = draw - false = text\r\n  function setInput(changeToDraw){\r\n    if(changeToDraw){\r\n      setInputIsDraw(true);\r\n      document.getElementById(\"drawing-canvas-wrapper\").style.zIndex = \"6\";\r\n      document.getElementById(\"draw-input-select\").classList.add(\"ActiveInputButton\");\r\n      document.getElementById(\"drawing-tools-wrapper\").style.right = \"-25vh\";\r\n      document.getElementById(\"drawing-buttons-wrapper\").style.left = \"-15vh\";\r\n      document.getElementById(\"text-input-select\").classList.remove(\"ActiveInputButton\");\r\n    } else {\r\n      setInputIsDraw(false);\r\n      document.getElementById(\"drawing-canvas-wrapper\").style.zIndex = \"4\";\r\n      document.getElementById(\"draw-input-select\").classList.remove(\"ActiveInputButton\");\r\n      document.getElementById(\"drawing-tools-wrapper\").style.right = \"\";\r\n      document.getElementById(\"drawing-buttons-wrapper\").style.left = \"\";\r\n      document.getElementById(\"text-input-select\").classList.add(\"ActiveInputButton\");\r\n    }\r\n  }\r\n\r\n  // toggle eraser on/off - save brush if toggled on - reset old brush if toggled off\r\n  function toggleEraser(){\r\n    if(isEraser){\r\n      drawingCanvas.freeDrawingBrush = savedBrush;\r\n      document.getElementById(\"erase-brush-button\").classList.remove(\"Active\");\r\n    } else {\r\n      setSavedBrush(drawingCanvas.freeDrawingBrush);\r\n      drawingCanvas.freeDrawingBrush = new fabric.EraserBrush(drawingCanvas);\r\n      drawingCanvas.freeDrawingBrush.width = brushSize;\r\n      document.getElementById(\"erase-brush-button\").classList.add(\"Active\");\r\n    }\r\n    setIsEraser(!isEraser);\r\n  }\r\n  // undo/redo functions\r\n  // run on mouse up to save current canvas state to undo stack and then toggle isDrawing off\r\n  function saveCanvasState(){\r\n    // only run if mouse up is occuring after a drawing action\r\n    if(isDrawingRef.current){\r\n      // get version of undo stack to change\r\n      let newUndoStack = undoStackRef.current;\r\n      // drop oldest undo if over max undo count\r\n      if(newUndoStack.length === maxUndo){ newUndoStack.shift(); }\r\n      // add last current state stored before updating it to store the new state\r\n      newUndoStack.push(currentCanvasStateRef.current);\r\n      setCurrentCanvasState(drawingCanvasRef.current.toDatalessJSON());\r\n      // update undo stack into state, remove redo stack and then toggle isDrawing off\r\n      setUndoStack(newUndoStack);\r\n      setRedoStack([]);\r\n      setIsDrawing(false);\r\n    }\r\n  }\r\n  function undoDrawing(){\r\n    // if states left to undo\r\n    if(undoStack.length > 0){\r\n      // store state to come back to\r\n      let newCanvasState = currentCanvasState;\r\n      // push current state to redo stack\r\n      let newRedoStack = redoStackRef.current;\r\n      newRedoStack.splice(newRedoStack.length, 0, drawingCanvasRef.current.toDatalessJSON());\r\n      setRedoStack(newRedoStack);\r\n      // pop previous state from state stack\r\n      let newUndoStack = undoStackRef.current;\r\n      let newState = newUndoStack.pop();\r\n      // update to previous states and both stacks\r\n      setCurrentCanvasState(newState);\r\n      setUndoStack(newUndoStack);\r\n      // update actual canvas\r\n      drawingCanvas.loadFromJSON(newCanvasState);\r\n    }\r\n  }\r\n  function redoDrawing(){\r\n    // if states left to redo\r\n    if(redoStack.length > 0){\r\n      // pop new state from redo stack\r\n      let newRedoStack = redoStackRef.current;\r\n      let newCanvasState = newRedoStack.pop();\r\n      // push current state to undo stack\r\n      let newUndoStack = undoStackRef.current;\r\n      newUndoStack.push(currentCanvasStateRef.current);\r\n      setUndoStack(newUndoStack);\r\n      // update current state\r\n      setCurrentCanvasState(drawingCanvas.toDatalessJSON());\r\n      setRedoStack(newRedoStack);\r\n      // update actual canvas\r\n      drawingCanvas.loadFromJSON(newCanvasState);      \r\n    }\r\n  }\r\n  // work out how many days have passed since the start of async and pick the right cycle\r\n  function asyncCycleCalc(){\r\n    /* !! work out correct start date */\r\n    let startDate = new Date('2022-07-10T00:00:00');\r\n    let daysInCycle = 3;\r\n    // work out days in between now and start, divide by 3 for cycle\r\n    // before return round down with floor\r\n    /* !! maybe worth working out edge cases outside of total cycles here? */\r\n    return Math.floor((Date.now() - startDate) / (1000 * 3600 * 24) / 3);\r\n  }\r\n\r\n  function submitResponse(){\r\n    // set up array to push other responses to\r\n    let returnedResponses = [];\r\n    // check if a text or an image response\r\n    if(inputIsDraw){\r\n      //image input\r\n      let imageInput = document.getElementById('drawing-canvas');\r\n      var dataURL = imageInput.toDataURL({\r\n        format: 'png',\r\n        left: 0,\r\n        top: 0,\r\n        width: imageInput.width,\r\n        height: imageInput.height\r\n      });\r\n      const formData = new FormData();\r\n      let imageFile = dataURLtoFile(dataURL, 'response.png');\r\n      drawingCanvas.clear();\r\n      // we add one to cycle pos to keep start from 1\r\n      formData.append('upload', imageFile, 'cycle_'+ (cyclePos+1) +'_response.png');\r\n      fetch(`http://localhost:33061/api/insertImageReflectionGetResponses`, {\r\n        method: 'PUT',\r\n        body: formData\r\n      })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        try{\r\n          for(const response of res.data) {\r\n            returnedResponses.push([response.RESPONSE, response.RESPONSE_TYPE]);\r\n          }\r\n          setResponseData(returnedResponses);\r\n        } catch(e) {\r\n          // if response not the data\r\n          console.log(e);\r\n        }\r\n        });\r\n    } else {\r\n      // text input\r\n      let textInput = document.getElementById('text-input');\r\n      let responseText = textInput.value;\r\n      if(responseText.length > 0){\r\n        textInput.value = '';\r\n        /* fetch(`http://localhost:33061/api/insertTextReflectionGetResponses`, { */\r\n        fetch(`http://localhost:33061/api/testLookup`, {\r\n          headers: { 'Content-type': 'application/json' },\r\n          method: 'POST',\r\n          mode: 'cors',\r\n          // we add one to cycle pos to keep start from 1\r\n          body: JSON.stringify({reflection: responseText, cycleTable: cyclePos+1})\r\n        })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        try{\r\n          for(const response of res.data) {\r\n            returnedResponses.push([response.RESPONSE, response.RESPONSE_TYPE]);         \r\n          }\r\n          setResponseData(returnedResponses);\r\n        } catch(e) {\r\n          // if response not the data\r\n          console.log(e);\r\n        }\r\n        });      \r\n      }\r\n    }\r\n  }\r\n\r\n  function toggleFocus(){\r\n    let textResponseRule = getCSSRule('.TextResponseBox');\r\n    let imageResponseRule = getCSSRule('.ImageResponseBox');\r\n    if(!focusMode){\r\n      setFocusMode(true);\r\n      textResponseRule.style.backgroundColor = \"rgb(31, 33, 28)\";\r\n      textResponseRule.style.border = \"solid white 1px\";\r\n      imageResponseRule.style.backgroundColor = \"white\";\r\n      imageResponseRule.style.border = \"solid rgb(31, 33, 28) 1px\";\r\n    } else {\r\n      setFocusMode(false);\r\n      textResponseRule.style.backgroundColor = \"\";\r\n      textResponseRule.style.border = \"\";\r\n      imageResponseRule.style.backgroundColor = \"\";\r\n      imageResponseRule.style.border = \"\";\r\n    }\r\n  }\r\n\r\n  function dataURLtoFile(dataurl, filename){\r\n    var arr = dataurl.split(','),\r\n      mime = arr[0].match(/:(.*?);/)[1],\r\n      bstr = atob(arr[1]),\r\n      n = bstr.length,\r\n      u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n      u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new File([u8arr], filename, {\r\n      type: mime\r\n    });\r\n  }\r\n\r\n  function getCSSRule(ruleName) {\r\n    ruleName = ruleName.toLowerCase();\r\n    var result = null;\r\n    var find = Array.prototype.find;\r\n\r\n    find.call(document.styleSheets, styleSheet => {\r\n        result = find.call(styleSheet.cssRules, cssRule => {\r\n            return cssRule instanceof CSSStyleRule \r\n                && cssRule.selectorText.toLowerCase() === ruleName;\r\n        });\r\n        return result != null;\r\n    });\r\n    return result;\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}
{"version":3,"sources":["content/modalText.js","content/cyclePresets.js","components/timeCalc.js","components/whereModal.js","components/introModal.js","components/glVis.js","components/responseDisplay.js","components/audioTrackPlayer.js","components/drawingTools.js","components/drawingCanvas.js","components/colourPicker.js","components/settingsMenu.js","components/desktopApp.js","App.js","index.js"],"names":["acknowledgementOfCountryText","style","fontSize","introText","href","target","rel","className","creditsText","cyclePresets","introStatement","prompt","artistDetails","trackDetails","trackLink","artistLink","trackSrc","shaderName","colours","cycleDates","endTime","Date","parse","tidalData","tideEnd","tideUp","tideHeight","CountdownCalc","props","currentDate","now","remainingMilli","countdownDays","Math","round","date","lat","long","cycleStartDates","getCycleMoon","end","cycleEndTime","phase","SunCalc","getMoonIllumination","phasedeg","dividerstyle","transform","suncalctimes","getTimes","sunset","num","checknum","getUTCHours","getMinutes","youlat","youlong","currentMoonShape","moonShapeArray","map","i","WhereAreYou","useState","whereTerritories","getTerritories","isLoading","setIsLoading","useEffect","getPotentialLocations","then","data","display","flexDirection","alignItems","WhereThrobber","a","getLocationDataFromIp","ipData","getTerritoriesFromLngLat","territories","length","properties","description","Name","commonName","fetch","response","json","latLng","loc","locArray","split","parseFloat","extractLngLat","console","log","extractLocationString","x","y","res","catch","e","error","city","region","strings","push","country","join","id","width","height","viewBox","xmlns","x1","y1","x2","y2","offset","stopColor","cx","cy","r","stroke","strokeWidth","fill","attributeName","begin","dur","type","from","to","repeatCount","IntroModal","container","document","getElementById","secretKey","key","setCurrentCycle","setCurrentModalPage","currentModalPage","A11yDialog","show","window","addEventListener","removeEventListener","modalPages","textAlign","justifyContent","onClick","nextModalPage","cyclePreset","trackHasUpdated","TrackUpdateMessage","currentCycle","toggleModal","role","NineCycleBar","CurrentCycleBar","scrollTop","moonSpheres","opacity","percentage","marginstyle","marginTop","animationName","marginBottom","shaders","Shaders","create","cycleOne","frag","GLSL","cycleTwo","cycleThree","cycleSeven","onecolour","newvis","cycleBlank","GLVis","this","shader","ignoreUnusedUniforms","uniforms","timer","graphicsSettings","tideData","Component","ResponseDisplay","responseFadeTime","responsesToDisplay","setResponsesToDisplay","responsesToDisplayRef","useRef","responsesDisplaying","current","setTimeout","displayNextResponse","responseData","modOrderResponses","Array","nextResponse","pop","createImageResponseDisplay","createTextResponseDisplay","concat","imageResponse","newResponseBox","createElement","collision","classList","add","xRandom","random","yRandom","appendChild","responseBoxDimensions","getBoundingClientRect","left","top","colliderArray","getElementsByClassName","detect2DBoxCollision","remove","requestAnimationFrame","responseFadeInOut","src","textResponse","innerHTML","responseElement","transition","box1","box2","right","bottom","AudioTrackPlayer","isPlaying","setIsPlaying","isMuted","setIsMuted","responded","setResponded","audioSource","setAudioSource","audioSourceRef","setAudioSourceRef","timeline","firstChild","currentTime","duration","clickPercent","clientX","offsetWidth","onEnded","pauseTimer","paused","play","startTimer","setAskResponse","pause","PauseIcon","PlayIcon","restartTimer","RewindIcon","muted","MuteIconOff","MuteIconOn","VolumeNotches","volNotchGen","nothing","index","onMouseDown","clickVolumeNotch","onMouseEnter","isMouseDown","stopPropagation","clickedID","parseInt","notches","notch","newVolume","volume","transformOrigin","points","strokeLinejoin","strokeLinecap","d","DrawingTools","brushSize","setBrushSize","toggleEraser","undoDrawing","redoDrawing","DrawingCanvas","canvas","setCanvas","canvasRef","newCanvas","fabric","Canvas","isDrawingMode","canvasWrapper","setWidth","setHeight","offsetHeight","freeDrawingBrush","color","brushColour","freeDrawingCursor","getCustomCursor","on","setIsDrawing","updateCanvasDimensions","setDrawingCanvas","setCurrentCanvasState","toDatalessJSON","circle","btoa","ColourPicker","colourInputChange","selectors","cl","contains","setCurrentColours","colourSwap","SwapIcon","name","defaultValue","colNum","charAt","documentElement","setProperty","value","newColours","markerWidth","markerHeight","refX","refY","orient","markerEnd","SettingsMenu","setDisplay","toggleFocus","changeActiveButton","setGraphicsSettings","displayMode","forEach","button","DesktopApp","askResponse","readyToRespond","setReadyToRespond","setTimer","timerInterval","setTimerInterval","modalIsOpen","clearInterval","setInterval","setInput","placeholder","submitResponse","App","checkEndInterval","onMobile","matchMedia","matches","innerWidth","innerHeight","windowSize","setWindowSize","setModalIsOpen","setTrackHasUpdated","setTideData","inputIsDraw","setInputIsDraw","setResponseData","currentColours","isDrawing","isDrawingRef","isEraser","setIsEraser","savedBrush","setSavedBrush","drawingCanvas","drawingCanvasRef","currentCanvasState","currentCanvasStateRef","undoStack","setUndoStack","redoStack","setRedoStack","undoStackRef","redoStackRef","focusMode","setFocusMode","halfHour","checkEnd","k","tideHieght","updateCyclePosition","saveCanvasState","changeToDraw","zIndex","EraserBrush","newCanvasState","newRedoStack","splice","newUndoStack","newState","loadFromJSON","returnedResponses","imageInput","dataURL","toDataURL","format","formData","FormData","imageFile","dataurl","filename","arr","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","dataURLtoFile","clear","append","method","body","RESPONSE","RESPONSE_TYPE","textInput","responseText","headers","mode","JSON","stringify","reflection","cycleTable","textResponseRule","getCSSRule","imageResponseRule","backgroundColor","border","shift","ruleName","toLowerCase","result","find","prototype","call","styleSheets","styleSheet","cssRules","cssRule","CSSStyleRule","selectorText","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.91f2847e.chunk.js","sourcesContent":["export const acknowledgementOfCountryText = <><p style={{fontSize: \"1.75rem\"}}>\r\n  This website was created and is maintained on the unceded territory of the Wurundjeri People of the Eastern Kulin Nation, \r\n  the Traditional Custodians of the land. We recognise their ongoing legacy of connection to land, waters and culture \r\n  and pay respect to their Elders past and present. We extend this respect to all other First Nations peoples \r\n  of this continent, whose stolen land the material pathways that allow our digital connectivity are built upon.\r\n  </p>\r\n</>\r\n\r\nexport const introText = <>\r\n<p>\r\n  <span>\r\n    room2.fm is a digital space for collective reflection, sharing, and vulnerability. For four weeks across the course \r\n    of <a href=\"https://bleedonline.net/\" target=\"_blank\" rel=\"noreferrer\">BLEED</a> room2 will be presenting nine different \r\n    cycles of music and sound accompanied by a reflective writen prompt and generative graphics.\r\n  </span>\r\n  <br />  \r\n  <br />\r\n  <span>\r\n    While listening to the audio you will be asked to respond to the prompt through either writing or drawing before anonymously \r\n    submitting it to the room2 server. Once you've shared your own response you will be able to see the previous responses of other\r\n    users.\r\n  </span>\r\n  <br />  \r\n  <br />\r\n  <span>\r\n    There is no right or wrong way for you to listen, respond to, or feel a piece of music or sound. We encourage you to \r\n    trust your ears and intuition and respond sincerely and in whatever way feels true to your experience.\r\n  </span>\r\n  <br />\r\n  <br />\r\n  <span>\r\n    While anonymous the responses will be collected as part of a digital archive which will be online for a longer period than \r\n    the four weeks of BLEED. The only information we store is the response itself and the time it was submitted. If you would \r\n    like to remove your personal response from the archive please contact us.\r\n  </span>\r\n  <br />    \r\n  <br />\r\n</p>\r\n  <span className=\"ModalTextSmall\">\r\n    This website has been optimised to run with the window maximised on Chrome and Firefox on a desktop or laptop screen. \r\n    If you are having issues, please try one of these browsers.\r\n    <br />\r\n    <br />\r\n    If you would like a high-contrast version of the response text with no distortion please click 'Focus Mode' button.    \r\n  </span>\r\n</>\r\n\r\nexport const instructionsText = <>\r\n<p>\r\n  <span>\r\n    For four weeks across the course of BLEED, room2 will offer a suite of digital spaces to encourage reflection and encounter works to listen, view, reflect on and respond to.\r\n  </span>\r\n  <span>\r\n    You can share your response to the music, prompts and visuals in a number of ways.\r\n  </span>\r\n  <br />\r\n  <br />\r\n  <span>\r\n    Periodically, text prompts will come up in the lower middle of the screen. Underneath the prompts you can select to respond \r\n    via either writing or drawing depending on what you think is most appropriate. Once you are happy with your response you can \r\n    click the ‘submit response’ button to share it with others. Above the ‘submit response’ button, you can select the colour palette \r\n    you will be able to draw responses with, along with options to change the brush size, use an eraser and undo or redo additions to \r\n    your drawing. \r\n  </span>\r\n  <br />\r\n  <br />\r\n  <span>\r\n    Your responses to these prompts will be completely anonymised and not attributable to you in any way, however during this \r\n    demonstration we will be capturing a screen recording of the experience.\r\n  </span>\r\n  <br />\r\n  <br />\r\n  <span>\r\n    You can also use the chat box on the right of the screen to directly speak to others participating. Select a username and \r\n    click ‘Join Room’ to engage. Be yourself, be someone else, be whomever you want to be!\r\n  </span>\r\n  <br />\r\n  <br />\r\n  <span>\r\n    Nine compositions will be presented across the four weeks of room2 async. The music selection will change approximately every three days, while the sun is setting in Narrm — with times set to 'Australian Eastern Standard Time' or GMT+10.\r\n  </span>\r\n  <br />\r\n  <br />\r\n</p>\r\n</>\r\n\r\nexport const creditsText = <>\r\n<span className=\"ModalTextSmall\">\r\n    room2.fm was created by <a href=\"https://patrickhase.xyz\" target=\"_blank\" rel=\"noreferrer\">Patrick Hase</a> and Anuraag Bhatia. This \r\n    iteration contains additional development work and creative consultation from <a href=\"https://becfary.com/\" target=\"_blank\" rel=\"noreferrer\">\r\n    BF/Local Time</a> and was commissioned as part of <a href=\"https://bleedonline.net/\" target=\"_blank\" rel=\"noreferrer\">BLEED</a>. Additional credits \r\n    can be viewed in the head tag.\r\n    <br />\r\n    <br />\r\n    We welcome your thoughts, feedback, or questions - please send them through to room2fm@gmail.com\r\n</span> \r\n</>\r\n\r\nexport const warningText = <>\r\n This four week peroid will \r\n    culminate in a live event on Sunday 25 September, 14:00 – 19:00 AEST held both here at this URL and at Arts House - \r\n    <a href=\"https://artshouse.sales.ticketsearch.com/sales/salesevent/76403\" target=\"_blank\" rel=\"noreferrer\">tickets\r\n    for the in person event can be found here</a>.\r\n</>\r\n\r\n","export const cyclePresets = [\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 1\",\r\n    artistDetails: \"j\",\r\n    trackDetails: \"cadence felt between our bodies (with Angelina Nonaj)\",\r\n    trackLink: \"https://daisart.bandcamp.com/album/my-seat-and-weep\",\r\n    artistLink: \"https://daisart.press/\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/J.mp3\",\r\n    shaderName: \"cycleOne\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  },\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 2\",\r\n    artistDetails: \"Aarti Jadu\",\r\n    trackDetails: \"IT / THAT\",\r\n    trackLink: \"https://aartijadu.bandcamp.com/track/it-that\",\r\n    artistLink: \"https://aartijadu.bandcamp.com/\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/AJ.mp3\",\r\n    shaderName: \"cycleTwo\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  },\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 3\",\r\n    artistDetails: \"amby downs\",\r\n    trackDetails: \"a lightning ridge opal mine anxiety\",\r\n    trackLink: \"https://daisart.bandcamp.com/album/my-seat-and-weep\",\r\n    artistLink: \"https://daisart.press/\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/AD.mp3\",\r\n    shaderName: \"cycleThree\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  },\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 4\",\r\n    artistDetails: \"Alexandra Spence\",\r\n    trackDetails: \"j - cadence felt between our bodies (with Angelina Nonaj)\",\r\n    trackLink: \"https://daisart.bandcamp.com/album/my-seat-and-weep\",\r\n    artistLink: \"\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/J.mp3\",\r\n    shaderName: \"cycleOne\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  },\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 5\",\r\n    artistDetails: \"E Fishpool\",\r\n    trackDetails: \"j - cadence felt between our bodies (with Angelina Nonaj)\",\r\n    trackLink: \"https://daisart.bandcamp.com/album/my-seat-and-weep\",\r\n    artistLink: \"https://daisart.press/\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/J.mp3\",\r\n    shaderName: \"cycleOne\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  },\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 6\",\r\n    artistDetails: \"ShaYu\",\r\n    trackDetails: \"j - cadence felt between our bodies (with Angelina Nonaj)\",\r\n    trackLink: \"https://daisart.bandcamp.com/album/my-seat-and-weep\",\r\n    artistLink: \"https://daisart.press/\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/J.mp3\",\r\n    shaderName: \"cycleOne\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  },\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 7\",\r\n    artistDetails: \"salllvage\",\r\n    trackDetails: \"bells for him\",\r\n    trackLink: \"https://daisart.bandcamp.com/album/my-seat-and-weep\",\r\n    artistLink: \"https://daisart.press/\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/S.mp3\",\r\n    shaderName: \"cycleSeven\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  },\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 8\",\r\n    artistDetails: \"R. Rebeiro\",\r\n    trackDetails: \"j - cadence felt between our bodies (with Angelina Nonaj)\",\r\n    trackLink: \"https://daisart.bandcamp.com/album/my-seat-and-weep\",\r\n    artistLink: \"https://daisart.press/\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/J.mp3\",\r\n    shaderName: \"cycleOne\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  },\r\n  {\r\n    introStatement: \"if you're seeing this the server is having some trouble\",\r\n    prompt: \"this is prompt 9\",\r\n    artistDetails: \"j - cadence felt between our bodies (with Angelina Nonaj)\",\r\n    trackDetails: \"j - cadence felt between our bodies (with Angelina Nonaj)\",\r\n    trackLink: \"https://daisart.bandcamp.com/album/my-seat-and-weep\",\r\n    artistLink: \"https://daisart.press/\",\r\n    trackSrc: \"https://thelongesthumstore.sgp1.cdn.digitaloceanspaces.com/room2-async-tracks/J.mp3\",\r\n    shaderName: \"cycleOne\",\r\n    colours: [\r\n      \"#222323\",\r\n      \"#5252ff\",\r\n      \"#b5e877\"\r\n    ]\r\n  }\r\n]\r\n\r\n//this cycle will only check once, but maybe also checking if it's half an hour before an endTime\r\nexport const cycleDates = [\r\n  {\r\n    endTime: Date.parse(\"2022-08-31T17:58:51+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-29T03:41+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.8\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-29T10:25+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.28\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-29T16:52+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.89\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-29T23:05+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.42\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-30T04:33+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.83\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-30T11:05+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.31\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-30T17:20+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.9\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-30T23:42+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.38\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-31T05:20+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.87\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-31T11:40+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.34\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-31T17:46+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.92\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-09-03T18:01:21+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-01T00:15+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.34\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-01T06:04+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.89\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-01T12:13+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.37\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-01T18:15+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.93\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-02T00:52+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.31\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-02T06:48+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.91\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-02T12:45+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.41\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-02T18:43+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.95\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-03T01:30+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.29\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-03T07:34+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.91\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-03T13:20+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.45\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-09-06T18:03:50+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-03T19:13+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.96\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-04T02:10+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.27\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-04T08:22+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.89\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-04T13:57+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.49\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-04T19:45+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.96\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-05T02:52+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.25\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-05T09:14+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.87\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-05T14:37+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.52\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-05T20:20+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.95\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-06T03:37+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.24\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-06T10:14+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.84\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-06T15:24+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.56\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-09-09T18:06:18+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-06T21:04+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.94\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-07T04:30+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.23\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-07T11:26+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.82\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-07T16:20+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.58\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-07T22:02+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.91\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-08T05:31+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.23\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-08T12:41+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.81\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-08T17:37+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.58\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-08T23:18+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.87\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-09T06:44+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.23\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-09T13:50+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.82\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-09-12T18:08:47+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-09T19:12+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.56\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-10T00:41+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.84\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-10T08:00+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.23\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-10T14:50+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.84\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-10T20:55+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.49\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-11T02:11+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.84\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-11T09:15+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.25\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-11T15:41+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.86\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-11T22:02+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.40\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-12T03:31+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.87\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-12T10:16+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.27\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-12T16:23+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.89\r\n      } \r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-09-15T18:11:16+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-12T22:53+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.33\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-13T04:33+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.90\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-13T11:06+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.30\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-13T17:01+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.91\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-13T23:37+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.28\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-14T05:26+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.92\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-14T11:49+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.34\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-14T17:36+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.92\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-15T00:16+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.26\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-15T06:15+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.93\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-15T12:28+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.37\r\n      },\r\n      { //cool that this cycle ends at the same time as high tide is timestamped\r\n        tideEnd: Date.parse(\"2022-09-15T18:11+10:00\"), \r\n        tideUp: 1.0,\r\n        tideHeight: 0.94\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-09-18T18:13:45+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-16T00:54+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.25\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-16T07:00+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.93\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-16T13:04+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.41\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-16T18:45+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.94\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-17T01:30+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.25\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-17T07:45+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.92\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-17T13:39+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.44\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-17T19:16+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.94\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-18T02:05+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.25\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-18T08:30+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.90\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-18T14:13+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.46\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-09-21T18:16:15+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-18T19:48+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.92\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-19T02:42+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.25\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-19T09:15+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.87\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-19T14:46+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.49\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-19T20:20+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.90\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-20T03:19+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.26\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-20T10:02+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.84\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-20T15:22+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.52\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-20T20:55+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.87\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-21T04:00+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.26\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-21T10:54+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.81\r\n      }, \r\n      {\r\n        tideEnd: Date.parse(\"2022-09-21T16:03+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.54\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-09-24T18:18:46+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-21T21:36+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.82\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-22T04:46+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.28\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-22T11:54+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.79\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-22T16:56+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.56\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-22T22:31+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.77\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-23T05:45+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.29\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-23T12:59+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.78\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-23T18:15+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.56\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-23T23:47+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.74\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-24T06:59+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.31\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-09-24T13:58+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.79\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\n\r\n//https://docs.google.com/document/d/1q8UpFuTYy_0QZwoyxDSckXssbbEfQcUgIek9xCErQZ0/edit\r\n//http://www.bom.gov.au/ntc/IDO59001/IDO59001_2022_VIC_TP003.pdf\r\n\r\n/*  {\r\n    endTime: Date.parse(\"2022-08-06T17:52+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-06T13:15+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.8\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-06T13:17+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.2\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-06T13:19+10:00\"),\r\n        tideUp: 1.0,\r\n        tideHeight: 0.9\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-06T13:21+10:00\"),\r\n        tideUp: -1.0,\r\n        tideHeight: 0.3\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    endTime: Date.parse(\"2022-08-07T17:52+10:00\"),\r\n    tidalData: [\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-07T12:52+10:00\"),\r\n        tideUp: true,\r\n        tideHeight: 0.8\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-07T12:52+10:00\"),\r\n        tideUp: false,\r\n        tideHeight: 0.2\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-07T12:52+10:00\"),\r\n        tideUp: true,\r\n        tideHeight: 0.9\r\n      },\r\n      {\r\n        tideEnd: Date.parse(\"2022-08-07T12:52+10:00\"),\r\n        tideUp: false,\r\n        tideHeight: 0.3\r\n      },\r\n    ]\r\n  }, */","import React from 'react';\r\nimport SunCalc from 'suncalc'; \r\nimport {cycleDates } from '../content/cyclePresets'\r\n\r\nexport default function CountdownCalc (props) {\r\n  //have written this func using cycleDates[1], need to input props.currentCycle there instead\r\n  /*useEffect(() => {\r\n    //\r\n  },[]);*/\r\n  let currentDate = Date.now();\r\n  var remainingMilli = cycleDates[1].endTime - currentDate;\r\n  var countdownDays = Math.round(remainingMilli / 1000 / 60 / 60 / 24);\r\n  //need to work on countdowncalc so that edge cases (eg. before midnight on night of changeover) is more accurate\r\n  if (countdownDays >= 3) {\r\n    return (\r\n      <>\r\n      <span>\r\n        The track/prompt/visual cycle will change the day after tomorrow.\r\n      </span>\r\n      </>\r\n    )\r\n  } else if (countdownDays === 2) {\r\n    return (\r\n      <>\r\n      <span>\r\n        The track/prompt/visual cycle will change tomorrow.\r\n      </span>\r\n      </>\r\n    )\r\n  } else if (countdownDays <= 1) {\r\n    return (\r\n      <>\r\n      <span>\r\n        The track/prompt/visual cycle will change today.\r\n      </span>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nvar date = Date.now(); \r\n//date = date.now();\r\n//var nowhours = date.getUTCHours() + 10; \r\n\r\nconst lat = -37.803193437556054; //latitude and longitude set to Arts House Nth Melbourne\r\nconst long = 144.94984320919224;\r\n\r\n//write and export a function in this doc which checks how long til next sunset\r\nvar cycleStartDates = [\r\n  Date.parse(\"2022-08-28T17:55+10:00\"),\r\n  Date.parse(\"2022-08-31T17:58:51+10:00\"),\r\n  Date.parse(\"2022-09-03T18:01:21+10:00\"),\r\n  Date.parse(\"2022-09-06T18:03:50+10:00\"),\r\n  Date.parse(\"2022-09-09T18:06:18+10:00\"),\r\n  Date.parse(\"2022-09-12T18:08:47+10:00\"),\r\n  Date.parse(\"2022-09-15T18:11:16+10:00\"),\r\n  Date.parse(\"2022-09-18T18:13:45+10:00\"),\r\n  Date.parse(\"2022-09-21T18:16:15+10:00\"),\r\n  //Date.parse(\"2022-09-24T18:18:46+10:00\")\r\n]; //manually entered these dates so test dates don't mess with it\r\n\r\nfunction getCycleSun (end) {\r\n  var cycleEndTime = new Date(end);\r\n  var endSun = SunCalc.getTimes(cycleEndTime, lat, long);\r\n  return endSun.sunset;\r\n}\r\n\r\n\r\nfunction getCycleMoon (end) {\r\n  var cycleEndTime = new Date(end);\r\n  var endMoon = SunCalc.getMoonIllumination(cycleEndTime, lat, long);\r\n  var phase = endMoon.phase; \r\n  phase = Math.round(phase * 100);\r\n  var phasedeg = 3.6 * phase;\r\n  var dividerstyle = {transform: \"rotate3d(0, 1, 0, \" + phasedeg + \"deg)\",}\r\n  return (\r\n  <>\r\n    <div className=\"moonsphere\">\r\n    <div className=\r\n    {phasedeg > 180 \r\n        ? \"moondark hemisphere\"\r\n        : \"moonlight hemisphere\"\r\n      }\r\n    ></div>\r\n      \r\n    <div className=\r\n      {phasedeg > 180 \r\n      ? \"moonlight hemisphere\"\r\n      : \"moondark hemisphere\"\r\n      }\r\n    ></div>\r\n      \r\n    <div className=\"moondivider\" style={dividerstyle}></div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nvar suncalctimes = SunCalc.getTimes(date, lat, long);  \r\nvar sunsetMilliseconds = Date.parse(suncalctimes.sunset);\r\nvar countdownMilli = sunsetMilliseconds - date;\r\n\r\nvar sunsethours = checknum(suncalctimes.sunset.getUTCHours() + 10);\r\nvar sunsetmins = suncalctimes.sunset.getMinutes();\r\n\r\n//checking whether hours evaluations are above 24, if so removing 24 to get their AM time value in hours; also reevaluates date object if UTC date is yesterday\r\nfunction checknum (num) {\r\n    if (num > 24) {\r\n      num = num - 24;\r\n    } else {\r\n      num = num; \r\n    }\r\n      return num\r\n  }\r\n\r\n/*export const sunSetText = <>\r\n  <p>The track changes at sunset. \r\n    Today, the sun sets at {sunsethours}:{sunsetmins}pm, in {countdownMilli} milliseconds. \r\n    *turn this value into a more legible countdown* \r\n    Maybe countdown could happen based on how many sunsets b/w now and next change\r\n  Track changed tonight and will change again in three day's time\r\n  Track changes today, tomorrow or day after tomorrow\r\n  </p>\r\n</>*/\r\n\r\nexport const currentMoonShape = getCycleMoon(date);\r\n\r\nexport const moonShapeArray = cycleStartDates.map(i =>\r\n  {return getCycleMoon(i)}\r\n)\r\n\r\n/* SunCalc values for sunset changeover (maybe use these values for transitioning b/w tracks) — \r\ngoldenHour | evening golden hour starts\r\nsunsetStart | sunset starts (bottom edge of the sun touches the horizon)\r\nsunset | sunset (sun disappears below the horizon, evening civil twilight starts)\r\ndusk | dusk (evening nautical twilight starts)\r\n*/\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nconst IP_API = 'https://ipinfo.io/json?token=9f90c3a3f131ff' \r\nconst NATIVE_LAND_API = 'https://native-land.ca/api/index.php'\r\nvar youlat;\r\nvar youlong; \r\n\r\nexport default function WhereAreYou () {\r\n  const [whereTerritories, getTerritories] = useState([]);\r\n  \r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    getPotentialLocations()\r\n    .then(data => {\r\n      setIsLoading(false);\r\n      getTerritories(data);\r\n    }      \r\n    );\r\n   }, [])\r\n\r\n  return (<div style={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\r\n    <p>Where are you visiting from?</p>\r\n  {isLoading\r\n    ? <WhereThrobber />\r\n    : <>{whereTerritories}</> \r\n    }\r\n    \r\n  </div>)\r\n}\r\n\r\nasync function getPotentialLocations() {  \r\n  const ipData = await getLocationDataFromIp();\r\n  if (!ipData) return <>\r\n  <span>We couldn't access your IP, and couldn't find information information about indigenous nations at your location, but this does not mean that there aren't any.\r\n    Do you know whose land you're on?*\r\n  </span>\r\n  <br />\r\n  <span className=\"ModalTextSmall\">\r\n  <span className=\"astrix\">*</span> \r\n    The information presented here is derived from the maps at <a href=\"https://native-land.ca/\" target=\"_blank\" rel=\"noreferrer\">Native Land Digital</a>, cross-referenced with data from <a href=\"https://ipinfo.io/\" target=\"_blank\" rel=\"noreferrer\">ipinfo.io</a>. \r\n    Note that this is based on your internet service provider's location, and may be incorrect for your actual physical location. \r\n    This is not authoritative or representative and should be approached critically.\r\n    Code is adapted from <i>Where Are We</i>, which you can learn more about on <a href=\"https://github.com/e-e-e/where-are-we\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Your IP data is not stored.\r\n  </span>\r\n  </>\r\n  const territories = await getTerritoriesFromLngLat(youlat, youlong)\r\n\r\n  if (territories.length === 1) {\r\n    return (\r\n    <>\r\n    <span>Your IP suggests that you may be on <a href={territories[0].properties.description} target='_blank' rel=\"noreferrer\">{territories[0].properties.Name}</a> country, otherwise known as {ipData.commonName}.*</span>\r\n    <br />\r\n    <span className=\"ModalTextSmall\">\r\n    <span className=\"astrix\">*</span> \r\n    The information presented here is derived from the maps at <a href=\"https://native-land.ca/\" target=\"_blank\" rel=\"noreferrer\">Native Land Digital</a>, cross-referenced with data from <a href=\"https://ipinfo.io/\" target=\"_blank\" rel=\"noreferrer\">ipinfo.io</a>. \r\n    Note that this is based on your internet service provider's location, and may be incorrect for your actual physical location. \r\n    This is not authoritative or representative and should be approached critically.\r\n    Code is adapted from <i>Where Are We</i>, which you can learn more about on <a href=\"https://github.com/e-e-e/where-are-we\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Your IP data is not stored.\r\n    </span>\r\n    </>\r\n    )\r\n  } else if (territories.length > 1) {\r\n    return <>\r\n    <span>Your IP suggests that you may be on <a href={territories[0].properties.description} target='_blank' rel=\"noreferrer\"> {territories[0].properties.Name}</a> and/or <a href={territories[1].properties.description} target='_blank' rel=\"noreferrer\"> {territories[1].properties.Name}</a> country, otherwise known as {ipData.commonName}.*</span>\r\n    <br />\r\n    <span className=\"ModalTextSmall\">\r\n    <span className=\"astrix\">*</span> \r\n    The information presented here is derived from the maps at <a href=\"https://native-land.ca/\" target=\"_blank\" rel=\"noreferrer\">Native Land Digital</a>, cross-referenced with data from <a href=\"https://ipinfo.io/\" target=\"_blank\" rel=\"noreferrer\">ipinfo.io</a>. \r\n    Note that this is based on your internet service provider's location, and may be incorrect for your actual physical location. \r\n    This is not authoritative or representative and should be approached critically.\r\n    Code is adapted from <i>Where Are We</i>, which you can learn more about on <a href=\"https://github.com/e-e-e/where-are-we\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Your IP data is not stored.\r\n    </span>\r\n    </>\r\n  } else {\r\n    return <>\r\n    <span>Your IP suggests that you may be in {ipData.commonName}. We cannot find information about indigenous nations at this location, but this does not mean that there aren't any. Do you know whose land you're on?*</span>\r\n    <br />\r\n    <span className=\"ModalTextSmall\">\r\n    <span className=\"astrix\">*</span> \r\n    The information presented here is derived from the maps at <a href=\"https://native-land.ca/\" target=\"_blank\" rel=\"noreferrer\">Native Land Digital</a>, cross-referenced with data from <a href=\"https://ipinfo.io/\" target=\"_blank\" rel=\"noreferrer\">ipinfo.io</a>. \r\n    Note that this is based on your internet service provider's location, and may be incorrect for your actual physical location. \r\n    This is not authoritative or representative and should be approached critically.\r\n    Code is adapted from <i>Where Are We</i>, which you can learn more about on <a href=\"https://github.com/e-e-e/where-are-we\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Your IP data is not stored.\r\n    </span>\r\n    </>\r\n  }\r\n  \r\n  }\r\n  \r\n  function getLocationDataFromIp() {\r\n    \r\n  return fetch(IP_API)\r\n  .then((response) => response.json())\r\n  .then((data) => {\r\n  const latLng = extractLngLat(data)\r\n  console.log(latLng)\r\n  return latLng\r\n    ? {\r\n        ...latLng,\r\n        commonName: extractLocationString(data) ?? '',\r\n      }\r\n    : null\r\n  })\r\n  }\r\n  \r\n  function extractLngLat(data) {\r\n  if (!data) return null\r\n  if (!data.loc || typeof data.loc !== 'string') return null\r\n  const locArray = data.loc.split(',')\r\n  if (locArray.length !== 2) return null\r\n  youlat = parseFloat(locArray[0])\r\n  youlong = parseFloat(locArray[1])\r\n  \r\n  if (youlat == null || youlong == null) return null\r\n  return {\r\n  youlat,\r\n  youlong,\r\n  }\r\n  }\r\n  \r\n  function getTerritoriesFromLngLat(x, y) {\r\n  return fetch(\r\n  `${NATIVE_LAND_API}?maps=territories&position=${x},${y}`\r\n  )\r\n  .then((res) => res.json())\r\n  .catch((e) => {\r\n  console.error(e)\r\n  return []\r\n  })\r\n  }\r\n\r\n  function toTerritoryInfo(features) {\r\n    return features\r\n      .map((feature) => {\r\n        const name = feature.properties.Name\r\n        const link = feature.properties.description\r\n        return name\r\n          ? {\r\n              name,\r\n              link,\r\n            }\r\n          : undefined\r\n      })\r\n  }\r\n  \r\n  \r\n  function extractLocationString(data) {\r\n  if (!data) return null\r\n  if (!data.city && !data.region) return null\r\n  const strings = []\r\n  data.city && strings.push(data.city)\r\n  data.region && strings.push(data.region)\r\n  data.country && strings.push(data.country)\r\n  return strings.join(', ')\r\n  }\r\n\r\n  function WhereThrobber(){\r\n    return (\r\n      <div id=\"modal-throbber\">\r\n        <svg\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          viewBox=\"0 0 100 100\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          transform=\"\">\r\n            <defs>\r\n              <linearGradient id=\"grad1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                <stop offset=\"0%\" stopColor=\"#b5e877\"/>\r\n                <stop offset=\"100%\" stopColor=\"#5252ff\"/>\r\n              </linearGradient>\r\n            </defs>\r\n            \r\n            <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"url(#grad1)\" strokeWidth=\"10\" fill=\"transparent\">\r\n              <animateTransform\r\n                attributeName=\"transform\"\r\n                begin=\"0s\"\r\n                dur=\"1s\"\r\n                type=\"rotate\"\r\n                from=\"0 50 50\"\r\n                to=\"360 50 50\"\r\n                repeatCount=\"indefinite\"\r\n              />\r\n            </circle>                \r\n        </svg>\r\n      </div>\r\n      \r\n    )\r\n  }\r\n","import React, { useEffect, useState, Component } from 'react';\r\nimport A11yDialog from 'a11y-dialog';\r\nimport { acknowledgementOfCountryText, introText, instructionsText, creditsText, /* warningText */ } from '../content/modalText';\r\nimport CountdownCalc, {/*sunSetText,*/ currentMoonShape, moonShapeArray} from './timeCalc';\r\nimport { cycleDates } from '../content/cyclePresets';\r\nimport WhereAreYou from './whereModal';\r\n\r\nexport default function IntroModal(props) {\r\n  \r\n  // run init on load\r\n  useEffect(() => {\r\n    const container = document.getElementById(\"AOC-modal\");\r\n    const dialog = new A11yDialog(container);\r\n    dialog.show();\r\n    function secretKey(e){\r\n      switch (e.key) {\r\n        case \"!\": \r\n        props.setCurrentCycle(0);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        case \"@\": \r\n        props.setCurrentCycle(1);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        case \"#\": \r\n        props.setCurrentCycle(2);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        case \"$\": \r\n        props.setCurrentCycle(3);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        case \"%\": \r\n        props.setCurrentCycle(4);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        case \"^\": \r\n        props.setCurrentCycle(5);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        case \"&\": \r\n        props.setCurrentCycle(6);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        case \"*\": \r\n        props.setCurrentCycle(7);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        case \"(\": \r\n        props.setCurrentCycle(8);\r\n        props.setCurrentModalPage(props.currentModalPage + 1);\r\n          break;\r\n        default:\r\n          return; // Quit when this doesn't handle the key event.\r\n      }\r\n    }\r\n    window.addEventListener(\"keydown\", secretKey);\r\n\r\n    return function cleanup(){\r\n      window.removeEventListener(\"keydown\", secretKey);\r\n    }\r\n  },[]);\r\n\r\n  let modalPages = [\r\n    //page 1 Logo - no continue button on this one if the site needs to get closed\r\n    <div id=\"logo-wrapper\">\r\n      <div id=\"text-logo\">\r\n        <pre id=\"pre-logo-wrapper\">\r\n          <div id=\"logo-line-1\">__________________________________________________________________<u className=\"text-gradient-1\">/\\\\\\\\\\\\\\\\\\</u>_____        <br/></div>\r\n          <div id=\"logo-line-2\">&nbsp;________________________________________________________________<u className=\"text-gradient-2\">/\\\\\\///////\\\\\\</u>___       <br/></div>\r\n          <div id=\"logo-line-3\">&nbsp;&nbsp;_______________________________________________________________<u className=\"text-gradient-3\">\\///</u>______<u className=\"text-gradient-3\">\\//\\\\\\</u>__      <br/></div>\r\n          <div id=\"logo-line-4\">&nbsp;&nbsp;&nbsp;__<u className=\"text-gradient-4\">/\\\\/\\\\\\\\\\\\\\</u>______<u className=\"text-gradient-4\">/\\\\\\\\\\</u>________<u className=\"text-gradient-4\">/\\\\\\\\\\</u>_______<u className=\"text-gradient-4\">/\\\\\\\\\\</u>__<u className=\"text-gradient-4\">/\\\\\\\\\\</u>_____________<u className=\"text-gradient-4\">/\\\\\\/</u>___     <br/></div>\r\n          <div id=\"logo-line-5\">&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-5\">\\/\\\\\\/////\\\\\\</u>___<u className=\"text-gradient-5\">/\\\\\\///\\\\\\</u>____<u className=\"text-gradient-5\">/\\\\\\///\\\\\\</u>___<u className=\"text-gradient-5\">/\\\\\\///\\\\\\\\\\///\\\\\\</u>________<u className=\"text-gradient-5\">/\\\\\\//</u>_____    <br/></div>\r\n          <div id=\"logo-line-6\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-6\">\\/\\\\\\</u>___<u className=\"text-gradient-6\">\\///</u>___<u className=\"text-gradient-6\">/\\\\\\</u>__<u className=\"text-gradient-6\">\\//\\\\\\</u>__<u className=\"text-gradient-6\">/\\\\\\</u>__<u className=\"text-gradient-6\">\\//\\\\\\</u>_<u className=\"text-gradient-6\">\\/\\\\\\</u>_<u className=\"text-gradient-6\">\\//\\\\\\</u>__<u className=\"text-gradient-6\">\\/\\\\\\</u>_____<u className=\"text-gradient-6\">/\\\\\\//</u>________   <br/></div>\r\n          <div id=\"logo-line-7\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-7\">\\/\\\\\\</u>_________<u className=\"text-gradient-7\">\\//\\\\\\</u>__<u className=\"text-gradient-7\">/\\\\\\</u>__<u className=\"text-gradient-7\">\\//\\\\\\</u>__<u className=\"text-gradient-7\">/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>__<u className=\"text-gradient-7\">\\/\\\\\\</u>___<u className=\"text-gradient-7\">/\\\\\\/</u>___________  <br/></div>\r\n          <div id=\"logo-line-8\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-8\">\\/\\\\\\</u>__________<u className=\"text-gradient-8\">\\///\\\\\\\\\\/</u>____<u className=\"text-gradient-8\">\\///\\\\\\\\\\/</u>___<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">\\/\\\\\\</u>__<u className=\"text-gradient-8\">/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\</u>_ <br/></div>\r\n          <div id=\"logo-line-9\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_<u className=\"text-gradient-9\">\\///</u>_____________<u className=\"text-gradient-9\">\\/////</u>________<u className=\"text-gradient-9\">\\/////</u>_____<u className=\"text-gradient-9\">\\///</u>___<u className=\"text-gradient-9\">\\///</u>___<u className=\"text-gradient-9\">\\///</u>__<u className=\"text-gradient-9\">\\///////////////</u>__<br/></div>\r\n        </pre>            \r\n      </div>\r\n    </div>,\r\n  \r\n    //page 2 AOC\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-text-wrapper\" className=\"modal-text-wrapper-aoc\" style={{textAlign: 'center'}}>\r\n          <div id=\"modal-text\" style={{alignItems: 'center', justifyContent: 'space-around'}}>\r\n            {acknowledgementOfCountryText}\r\n            <WhereAreYou />\r\n          </div>          \r\n      </div>\r\n      <button id=\"modal-continue-button\" onClick={() => nextModalPage()}> Continue </button>\r\n    </div>,\r\n  \r\n    //page 3 Welcome\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-title-wrapper\">\r\n        <div id=\"modal-title\">\r\n          Welcome to room2.fm async\r\n        </div>\r\n        <hr />\r\n      </div>\r\n      <div id=\"modal-text-wrapper\">\r\n          <div id=\"modal-text\">\r\n            {introText}\r\n          </div>\r\n      </div>        \r\n      <button id=\"modal-continue-button\" onClick={() => nextModalPage()}> Continue </button>\r\n    </div>,\r\n  \r\n    //page 4 Instructions\r\n    <div id=\"modal-page-wrapper\">\r\n      <div id=\"modal-title-wrapper\">\r\n        <div id=\"modal-title\">\r\n          Welcome to room2.fm async\r\n        </div>\r\n        <hr />\r\n      </div>\r\n      <div id=\"modal-text-wrapper\">\r\n          <div id=\"modal-text\">\r\n            The current cycle's track is:\r\n            <br />\r\n            <p style={{fontSize: '1.75rem'}}>{props.cyclePreset.trackDetails} by {props.cyclePreset.artistDetails}</p>        \r\n            <br />\r\n            <p>Support {props.cyclePreset.artistDetails} <a href={props.cyclePreset.artistLink} target=\"_blank\" rel=\"noreferrer\">here</a>.</p>        \r\n            <br />\r\n            {props.trackHasUpdated\r\n            ? <TrackUpdateMessage />\r\n            : <CountdownCalc currentCycle={props.currentCycle} />            \r\n            }\r\n            <br />\r\n            <p>\r\n            room2 @ <a href=\"https://bleedonline.net/\" target=\"_blank\" rel=\"noreferrer\">BLEED</a> will culminate in a live \r\n            event on Sunday 25 September, 14:00 – 19:00 AEST held both here at this URL and at Arts House - <a href=\"https://artshouse.sales.ticketsearch.com/sales/salesevent/76403\" target=\"_blank\" rel=\"noreferrer\">tickets\r\n              for the in person event can be found here</a>.\r\n            </p>\r\n            {creditsText}\r\n          </div>\r\n      </div>        \r\n      <button id=\"modal-continue-button\" onClick={() => props.toggleModal()}> Continue </button>\r\n    </div>\r\n  ]\r\n\r\n  return (\r\n    <div id=\"AOC-modal\"\r\n         className=\"ModalWrapper\"\r\n         aria-labelledby=\"modal-title\"\r\n         aria-hidden=\"false\" >\r\n\r\n      <div data-a11y-dialog-hide className=\"ModalOverlay\" ></div>\r\n\r\n      <div role=\"document\" className=\"ModalBox\">\r\n        {props.currentModalPage < 2\r\n          ? <>{modalPages[props.currentModalPage]}</>\r\n          : <>\r\n            <NineCycleBar currentCycle={props.currentCycle} />\r\n            {modalPages[props.currentModalPage]}\r\n            <CurrentCycleBar currentCycle={props.currentCycle} />\r\n            </>\r\n          }\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  function nextModalPage(){\r\n    props.setCurrentModalPage(props.currentModalPage + 1);\r\n    document.getElementById(\"modal-text-wrapper\").scrollTop = 0;\r\n  }\r\n}\r\n\r\nfunction NineCycleBar (props){\r\n\r\n  let moonSpheres = moonShapeArray.map((num, i) =>\r\n    {\r\n      if(i < props.currentCycle){\r\n        return <div className=\"MoonSphereWrapper\" key={i} style={{opacity: 0.4}}>{moonShapeArray[i]}</div>\r\n      } else if (i === props.currentCycle) {\r\n        return <div className=\"MoonSphereWrapper\" key={i} style={{opacity: 1}}>{moonShapeArray[i]}</div>\r\n      } else {\r\n        return <div className=\"MoonSphereWrapper\" key={i} style={{opacity: 0.6}}>{moonShapeArray[i]}</div>\r\n      }\r\n    }\r\n  );\r\n  \r\n  return(\r\n    <div id=\"nine-cycle-wrapper\">\r\n      {moonSpheres}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CurrentCycleBar(props){\r\n  let currentDate = Date.now();\r\n  var cycleDuration = cycleDates[props.currentCycle].endTime - cycleDates[props.currentCycle].endTime;\r\n  var currentPos = currentDate - cycleDates[props.currentCycle].endTime;\r\n  var cents = 80 / cycleDuration;\r\n  var percentage = cents * currentPos;\r\n  var marginstyle = {marginTop: percentage + \"vh\"}\r\n  if (percentage >= 76) { //this is approx 3 hours at the end of the cycle\r\n    percentage = 76; //so that the moon doesn't overshoot the modal box\r\n    marginstyle = {marginTop: percentage + \"vh\", animationName: \"pulse\"} //pulse to indicate changeover is soon\r\n  }\r\n  \r\n  return(\r\n    <>\r\n    <div id=\"current-cycle-wrapper\">\r\n      <div className=\"CurrentMoonWrapper\" style={marginstyle}>{currentMoonShape}</div>\r\n      <div id=\"timeline-gradient\"></div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction TrackUpdateMessage(){\r\n  return(\r\n    <p style={{marginBottom: \"1rem\"}}>\r\n      The selected track has been updated. Refresh the page to listen and respond to the new music and prompts.\r\n    </p>\r\n  )\r\n}\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport { Shaders, Node, GLSL, NearestCopy} from \"gl-react\";\r\nimport { Surface } from \"gl-react-dom\";\r\n\r\nexport const shaders = Shaders.create({\r\n  cycleOne: {\r\n    frag: GLSL`\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    uniform float tideUp;\r\n    uniform float tideHeight;\r\n    const vec3 rcol = vec3(0.8,0.,0.2);\r\n    const vec3 lcol = vec3(0.,0.502,0.376);\r\n    const vec3 ycol = vec3(0.1,0.,0.1);\r\n\r\n    float hash12(vec2 p){\r\n      return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);\r\n    }\r\n    float cubicPulse(float c, float w, float x){\r\n      x = abs(x - c);\r\n      if( x>w ) return 0.0;\r\n      x /= w;\r\n      return 1.0 - x*x*(3.0-2.0*x);\r\n    }\r\n\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      vec2 st = (gl_FragCoord.xy/res);\r\n      float stimer = timer/200.; \r\n      st.x -= sin(st.y*st.y*timer)*st.y*stimer;\r\n      vec3 noiseCol = ycol + hash12(st)*.04;\r\n      vec3 fadeCol = mix(noiseCol, rcol, ((sin(timer)/2.) +.5)*(sin(st.x-timer-2.5)*stimer)) ;\r\n      vec3 comp = mix(fadeCol, lcol, cubicPulse(.5,stimer*st.y,st.x));\r\n      gl_FragColor = vec4(comp, 1.0);\r\n    }`\r\n  },\r\n  cycleTwo: {\r\n    frag: GLSL`\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    uniform float tideUp;\r\n    uniform float tideHeight;\r\n    const vec3 rcol = vec3(0.925,0.878,0.878);\r\n    const vec3 lcol = vec3(0.176,0.251,0.278);\r\n    const float pi = 3.14159;\r\n\r\n    mat2 rotate2d(float _angle){\r\n      return mat2(cos(_angle),-sin(_angle),\r\n                  sin(_angle),cos(_angle));\r\n    }\r\n\r\n    float ring(vec2 uv, float radius, float stimer){\r\n      float width = 1.+radius;\r\n      float blurTime = abs(sin(timer+radius));\r\n      if (mod(radius, 2.0)==0.0){\r\n        uv *= rotate2d(-1.*stimer*(radius/10.));\r\n      } else {\r\n        uv *= rotate2d(stimer+(radius/10.));\r\n      }\r\n      radius *= radius;\r\n      float outerRadius = radius + width;\r\n      float theta = 1.001*(atan(uv.y,uv.x)/pi);\r\n      return  (smoothstep(radius-(radius*blurTime*.1),\r\n                        radius+(radius*blurTime*.1),\r\n                        dot(uv,uv)*3.5) -\r\n              smoothstep(outerRadius-(outerRadius*blurTime*.1),\r\n                        outerRadius+(outerRadius*blurTime*.1),\r\n                        dot(uv,uv)*3.5)) / \r\n              (1.5 - abs(mod(theta+1.0,45.0)-1.0));\r\n    }\r\n\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      vec2 st = (gl_FragCoord.xy/res)-.3;\r\n      float stimer = timer/20.;\r\n      st *= 40.*(rotate2d(stimer)*st.x)*stimer;\r\n      float col = 0.;\r\n      for (float i = 1.; i < 120. ; i++){\r\n        col += ring(st,i, stimer);\r\n      }\r\n      vec3 comp = mix(rcol,lcol,col*.5);\r\n      gl_FragColor = vec4(comp, 1.0);\r\n    }`\r\n  },\r\n  cycleThree: {\r\n    frag: GLSL`\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    uniform float tideUp;\r\n    uniform float tideHeight;\r\n    const vec3 rcol = vec3(0.8,0.,0.2);\r\n    const vec3 lcol = vec3(0.,0.502,0.376);\r\n    const vec3 ycol = vec3(0.1,0.,0.1);\r\n\r\n    float hash11(float p)\r\n    {\r\n        p = fract(p * .1031);\r\n        p *= p + 33.33;\r\n        p *= p + p;\r\n        return fract(p);\r\n    }\r\n    float random (in vec2 st) {\r\n        return fract(sin(dot(st.xy,\r\n                            vec2(12.9898,78.233)))\r\n                    * 43758.5453123);\r\n    }\r\n    mat2 rotate2d(float _angle){\r\n      return mat2(cos(_angle),-sin(_angle),\r\n                  sin(_angle),cos(_angle));\r\n    }\r\n\r\n    // 2D Noise based on Morgan McGuire @morgan3d\r\n    // https://www.shadertoy.com/view/4dS3Wd\r\n    float noise (in vec2 st) {\r\n        vec2 i = floor(st);\r\n        vec2 f = fract(st);\r\n\r\n        // Four corners in 2D of a tile\r\n        float a = random(i);\r\n        float b = random(i + vec2(1.0, 0.0));\r\n        float c = random(i + vec2(0.0, 1.0));\r\n        float d = random(i + vec2(1.0, 1.0));\r\n\r\n        // Smooth Interpolation\r\n\r\n        // Cubic Hermine Curve.  Same as SmoothStep()\r\n        vec2 u = f*f*(3.0-2.0*f);\r\n        // u = smoothstep(0.,1.,f);\r\n\r\n        // Mix 4 coorners percentages\r\n        return mix(a, b, u.x) +\r\n                (c - a)* u.y * (1.0 - u.x) +\r\n                (d - b) * u.x * u.y;\r\n    }\r\n\r\n    float cubicPulse(float c, float w, float x){\r\n      x = abs(x - c);\r\n      if( x>w ) return 0.0;\r\n      x /= w;\r\n      return 1.0 - x*x*(3.0-2.0*x);\r\n    }\r\n    float sleepers(vec2 st, float left, float right){\r\n      if(st.x<left) return 0.;\r\n      if(st.x>right) return 0.;\r\n      return (cubicPulse(.4,.5,sin(st.y*25.)))*.3;\r\n    }\r\n\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      float stimer = timer/5.;\r\n      vec2 st = (gl_FragCoord.xy/res)*200.;\r\n      vec2 rt = vec2(st.x * -1., st.y) - timer;\r\n      st += timer*2.;\r\n      float col = 0.;\r\n      float rails = 0.;\r\n      for (float i = 1.; i < 6. ; i++){\r\n        st *= rotate2d(.01);\r\n        rt *= rotate2d(.01);\r\n        if (mod(i, 2.0)==0.0){\r\n          col += noise(st*hash11(i)+i)*.1;\r\n          col -= sleepers(st/90., i, i+1.3);\r\n        } else {\r\n          col += noise(rt*hash11(i)+i)*.1;\r\n          col -= sleepers(rt/60., -1.*i-1.3, -1.*i);\r\n        }\r\n      }\r\n      vec3 comp = vec3(col);\r\n      gl_FragColor = vec4(comp, 1.0);\r\n    }`\r\n  },\r\n  cycleSeven: {\r\n    frag: GLSL`\r\n    #define pi 3.14159265359\r\n    #define twopi 6.28318530718\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    uniform float tideUp;\r\n    uniform float tideHeight;\r\n    const vec3 rcol = vec3(0.71,0.91,0.467);\r\n    const vec3 lcol = vec3(0.322,0.322,1.);\r\n    const vec3 ycol = vec3(0.937,0.592,0.439);\r\n\r\n    mat2 rotate2d(float _angle){\r\n      return mat2(cos(_angle),-sin(_angle),\r\n                  sin(_angle),cos(_angle));\r\n    }\r\n\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      vec2 st = ((gl_FragCoord.xy/res) - vec2(.5,.25));\r\n      float stimer = timer*.1;\r\n      float col = 0.;\r\n      for (float i = 1.; i < 9. ; i++){\r\n        vec2 rt = st*i*rotate2d(i);\r\n        float a = atan(rt.x-fract(stimer+i/5.), rt.y) + pi;\r\n        float r = twopi/3.;\r\n        float d = cos(floor(.5+a/r)*r-a)*length(rt);\r\n        col += (1.-smoothstep(.4,.45,d))*.2;\r\n      }\r\n      vec3 comp = vec3(col);\r\n      gl_FragColor = vec4(comp, 1.0);\r\n    }`\r\n  },\r\n  onecolour: {\r\n    frag: GLSL`\r\n    // based on Inigo Quilez noise shader https://www.shadertoy.com/view/XdXGW8\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    uniform float tideUp;\r\n    uniform float tideHeight;\r\n    const vec3 ycol = vec3(.824,.953,.91);\r\n    const vec3 lcol = vec3(.961,.652,.266);\r\n    const vec3 rcol = vec3(.184,.219,.297);\r\n    \r\n    vec2 hash( vec2 x ) {\r\n      const vec2 k = vec2( 0.3183099, 0.3678794 );\r\n      x = x*k + k.yx;\r\n      return -1.0 + 2.0*fract( 16.0 * k*fract( x.x*x.y*(x.x+x.y)) );\r\n    }\r\n\r\n    float noise( in vec2 p ) {\r\n      vec2 i = floor( p );\r\n      vec2 f = fract( p );\t\r\n\t    vec2 u = f*f*(3.0-2.0*f);\r\n      return mix( mix( dot( hash( i + vec2(0.0,0.0) ), f - vec2(0.0,0.0) ), \r\n                       dot( hash( i + vec2(1.0,0.0) ), f - vec2(1.0,0.0) ), u.x),\r\n                  mix( dot( hash( i + vec2(0.0,1.0) ), f - vec2(0.0,1.0) ), \r\n                       dot( hash( i + vec2(1.0,1.0) ), f - vec2(1.0,1.0) ), u.x), u.y);\r\n    }\r\n\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      vec2 st = gl_FragCoord.xy / res;\r\n      st.y += tideUp*timer/10.;\r\n      vec2 translate = vec2(0.,0.5*timer);\r\n      if (fract( st.y * 0.5) > 0.4  || fract( st.y * 0.5) < 0.2){\r\n        st.x += translate.y*0.35; }\r\n      else {\r\n        if (fract( st.x * 0.5) > 0.2 || fract( st.x * 0.5) < 0.3){\r\n          st.x -= timer*0.5; }\r\n        else {\r\n          st.x += timer*0.35; }\r\n      }\r\n      if (fract( st.y * 0.5) > 0.8 || fract( st.y * 0.5) < 0.6){\r\n        st.x += translate.y*0.35; }\r\n      else {\r\n        if (fract( st.x * 0.5) < 0.4 || fract( st.x * 0.5) > 0.3){\r\n          st.x -= timer*0.5; }\r\n        else {\r\n          st.x += timer*0.35; }\r\n      }      \r\n      float f = noise( 2.0*st );\r\n      f = 1.-(0.6 + 0.2*f);\r\n      vec3 ycol = ycol * (0.5 * sin(timer));\r\n\r\n      gl_FragColor = vec4(min(mix(ycol,mix(rcol,lcol,uv.x-0.2),uv.y+0.2), vec3(f,f,f)), 1.0);\r\n    }`\r\n}, \r\n  newvis: {\r\n    frag: GLSL`\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    //const float timer = 15.8;\r\n    uniform float tideUp;\r\n    uniform float tideHeight;\r\n    const float emtriy = 0.7;\r\n    const float emtrix = 1.5;\r\n    const vec3 rcol = vec3(0.71,0.91,0.467);\r\n    const vec3 lcol = vec3(0.322,0.322,1.);\r\n    const vec3 ycol = vec3(0.937,0.592,0.439);\r\n   // const vec3 rcol = vec3(0.902,0.733,0.271);\r\n   // const vec3 lcol = vec3(0.937,0.592,0.439);\r\n   // const vec3 ycol = vec3(0.835,0.867,0.565);\r\n\r\n    float hash( float x ) {\r\n      return fract(sin(x)*43758.5453);\r\n    }  \r\n    float rand(vec2 n) { \r\n      return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\r\n    }        \r\n    float noise(vec2 p){\r\n      vec2 ip = floor(p);\r\n      vec2 u = fract(p);\r\n      u = u*u*(3.0-2.0*u);          \r\n      float res = mix(\r\n        mix(rand(ip),rand(ip+vec2(1.0,0.0)),u.x),\r\n        mix(rand(ip+vec2(0.0,1.0)),rand(ip+vec2(1.0,1.0)),u.x),u.y);\r\n      return res*res;\r\n    }\r\n    mat2 rotate2d(float _angle){\r\n      return mat2(cos(_angle),-sin(_angle),\r\n                  sin(_angle),cos(_angle));\r\n    }\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      vec2 st = (gl_FragCoord.xy/res)- .5;\r\n      st.x += 0.45;\r\n      st.y *= st.x;\r\n      float stimer = timer*.2;\r\n      vec2 pos = (vec2(0.0)-st)*rotate2d(stimer+(emtrix*4.));\r\n      float r = length(pos)*2.0*emtriy;\r\n      float a = atan(pos.y,pos.x);\r\n      float f = abs(cos(a*2.5))*.3+(.3*emtrix);\r\n      vec3 flow = mix(vec3(0.), ycol, ((1.-smoothstep(f-0.,f+0.01,r))*1.2));\r\n      flow -= 1.-smoothstep(0.04,0.05,distance(st,vec2(0.0)));\r\n      float mixerx = timer + st.y;\r\n      st.y += stimer;\r\n      float noisecol = noise(st*8.);\r\n      if (noisecol < .6+(sin(timer)*.2))\r\n        noisecol = noisecol/2.;\r\n      else noisecol = 1.;\r\n      float bg = ((sin(timer)/2.)+.5)*noisecol;\r\n      vec3 bgcol = lcol-flow;\r\n      vec3 comp = mix(bgcol,flow,f);\r\n      gl_FragColor = vec4(comp, 1.0);\r\n    }`\r\n}, \r\n  \r\n  \r\n  cycleBlank: {\r\n    frag: GLSL`\r\n    precision highp float;\r\n    varying vec2 uv;\r\n    uniform float width;\r\n    uniform float height;\r\n    uniform float timer;\r\n    uniform float tideUp;\r\n    uniform float tideHeight;\r\n    const vec3 rcol = vec3(0.71,0.91,0.467);\r\n    const vec3 lcol = vec3(0.322,0.322,1.);\r\n    const vec3 ycol = vec3(0.937,0.592,0.439);\r\n\r\n    void main() {\r\n      vec2 res = vec2(width,height);\r\n      vec2 st = (gl_FragCoord.xy/res);\r\n      vec3 comp = vec3(1.,1.,1.);\r\n      gl_FragColor = vec4(comp, 1.0);\r\n    }`\r\n}, \r\n});\r\n\r\nexport class GLVis extends Component {\r\n  render() {\r\n    return <>\r\n    <Surface width={this.props.width} height={this.props.height}>\r\n\r\n      <NearestCopy>\r\n        <Node shader={shaders[this.props.shaderName]} ignoreUnusedUniforms uniforms={{\r\n          timer: this.props.timer, \r\n          width: this.props.width*0.75/this.props.graphicsSettings, \r\n          height: this.props.width*0.68/this.props.graphicsSettings, \r\n          tideUp: this.props.tideData.tideUp,\r\n          tideHeight: this.props.tideData.tideHeight,\r\n          }} width={this.props.width*0.75/this.props.graphicsSettings} height={this.props.height*0.68/this.props.graphicsSettings} /> \r\n      </NearestCopy>\r\n                              \r\n    </Surface>\r\n    </>;\r\n  }\r\n}\r\n\r\nexport default GLVis;\r\n","import React, { useEffect, useRef, useState } from 'react'\r\n\r\nexport default function ResponseDisplay(props) {\r\n\r\n  // time for fade in/out and for how long the response is visible in ms\r\n  const responseFadeTime = 1500;\r\n  const responseHangTime = 12000;\r\n\r\n  const [responsesToDisplay, setResponsesToDisplay] = useState([]);\r\n  const responsesToDisplayRef = useRef();\r\n  const responsesDisplaying = useRef(false);\r\n\r\n  const displaysOnScreen = 4;\r\n\r\n  // useeffect to run only after the first time responses to display is updated to contain responses, not the following times it's order is updated\r\n  useEffect(() => {\r\n    if(responsesToDisplay.length > 0 && !responsesDisplaying.current){\r\n      for(let i = 0; i < displaysOnScreen; i++){\r\n        setTimeout(displayNextResponse, responseFadeTime*i);\r\n      }      \r\n      responsesDisplaying.current = true;\r\n    }\r\n    responsesToDisplayRef.current = responsesToDisplay;\r\n  }, [responsesToDisplay]);\r\n\r\n  // run loop once new response data arrives\r\n  useEffect(() => {\r\n    console.log(props.responseData)\r\n    if(props.responseData.length > 0){\r\n      setResponsesToDisplay(props.responseData);\r\n      responsesToDisplayRef.current = props.responseData;\r\n    }\r\n  }, [props.responseData]);\r\n\r\n  return (\r\n    <div id=\"response-wrapper\"></div>\r\n  )\r\n\r\n  function displayNextResponse(){\r\n    let modOrderResponses = Array.from(responsesToDisplayRef.current);\r\n    let nextResponse = modOrderResponses.pop();\r\n    if(nextResponse[1] === 'image'){\r\n      createImageResponseDisplay(nextResponse[0]);\r\n    } else {\r\n      createTextResponseDisplay(nextResponse[0]);\r\n    }\r\n    setResponsesToDisplay([nextResponse].concat(modOrderResponses));\r\n  }\r\n\r\n  function createImageResponseDisplay(imageResponse){\r\n    let newResponseBox = document.createElement('img');\r\n    let collision = false;\r\n    newResponseBox.classList.add('ImageResponseBox');\r\n    let xRandom = Math.random();\r\n    let yRandom = Math.random();\r\n    newResponseBox.addEventListener(\"load\", (e) => {\r\n      // add to the page\r\n      document.getElementById('response-wrapper').appendChild(newResponseBox);\r\n      let responseBoxDimensions = newResponseBox.getBoundingClientRect();\r\n      newResponseBox.style.left = (80 * xRandom) + \"%\";\r\n      newResponseBox.style.top = ((100 - (props.height / responseBoxDimensions.height)) * yRandom) + \"%\";\r\n      let colliderArray = Array.from(document.getElementsByClassName(\"Collider\"));\r\n      for (let i = 0; i < colliderArray.length; i++) {\r\n        if(detect2DBoxCollision(newResponseBox.getBoundingClientRect(), colliderArray[i].getBoundingClientRect()) && !collision){\r\n          collision = true;\r\n        }\r\n      }\r\n      if(collision){\r\n        newResponseBox.remove();\r\n        window.requestAnimationFrame(() => createImageResponseDisplay(imageResponse));\r\n      } else {\r\n        newResponseBox.classList.add(\"Collider\");\r\n        responseFadeInOut(newResponseBox);\r\n      } \r\n    });\r\n    newResponseBox.src = 'https://humstore.thelongesthum.world/'+imageResponse;\r\n  }\r\n\r\n  function createTextResponseDisplay(textResponse){\r\n    let newResponseBox = document.createElement('p');\r\n    let collision = false;\r\n    newResponseBox.innerHTML = textResponse;\r\n    newResponseBox.classList.add('TextResponseBox');\r\n    let xRandom = Math.random();\r\n    let yRandom = Math.random();\r\n    document.getElementById('response-wrapper').appendChild(newResponseBox);\r\n    let responseBoxDimensions = newResponseBox.getBoundingClientRect();\r\n    newResponseBox.style.left = (80 * xRandom) + \"%\";\r\n    newResponseBox.style.top = ((100 - (props.height / responseBoxDimensions.height)) * yRandom) + \"%\";\r\n    let colliderArray = Array.from(document.getElementsByClassName(\"Collider\"));\r\n    for (let i = 0; i < colliderArray.length; i++) {\r\n      if(detect2DBoxCollision(newResponseBox.getBoundingClientRect(), colliderArray[i].getBoundingClientRect()) && !collision){\r\n        collision = true;\r\n      }\r\n    }\r\n    if(collision){\r\n      newResponseBox.remove();\r\n      window.requestAnimationFrame(() => createTextResponseDisplay(textResponse));\r\n    } else {\r\n      newResponseBox.classList.add(\"Collider\");\r\n      responseFadeInOut(newResponseBox);\r\n    } \r\n  }\r\n\r\n  function responseFadeInOut(responseElement){\r\n    responseElement.style.transition = responseFadeTime + \"ms\";\r\n    setTimeout(() =>{\r\n      // responseElement.classList.add('FadeIn');\r\n      responseElement.style.opacity = 1;\r\n      setTimeout(() => {responseElement.style.opacity = 0;}, responseHangTime);\r\n      setTimeout(() => {responseElement.remove(); displayNextResponse();}, responseFadeTime + responseHangTime + 100);\r\n    }, 100);\r\n  }\r\n}\r\n\r\nfunction detect2DBoxCollision(box1, box2){\r\n  let collision = false;\r\n  if(box1.left < box2.right &&\r\n     box1.right > box2.left &&\r\n     box1.top < box2.bottom &&\r\n     box1.bottom > box2.top) {\r\n      collision = true;\r\n    }\r\n  return collision;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\n\r\n/* set amount of volume notches on volume bar */\r\nvar notchNumber = 12;\r\n\r\nexport default function AudioTrackPlayer(props) {\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [responded, setResponded] = useState(false);\r\n  const [audioSource, setAudioSource] = useState(null);\r\n\r\n  useEffect(() => {\r\n    //set reference to audio\r\n    let audioSourceRef = document.getElementById(\"audio-source\");\r\n    setAudioSource(audioSourceRef);\r\n    props.setAudioSourceRef(audioSourceRef);\r\n    //set reference to timeline\r\n    let timeline = document.getElementById(\"timeline\");\r\n    //add waiting animation\r\n    audioSourceRef.addEventListener('waiting', () => {\r\n      timeline.className = \"\";\r\n      timeline.className = \"timelineloading\";\r\n    });\r\n    audioSourceRef.addEventListener('playing', () => {\r\n      timeline.className = \"\";\r\n      timeline.className = \"timelineloaded\";\r\n    });\r\n    //add animation when playing\r\n    audioSourceRef.addEventListener('timeupdate', () => {\r\n      timeline.firstChild.style.width = (100 * audioSourceRef.currentTime/audioSourceRef.duration) + \"%\";\r\n    });\r\n    //add timeline click\r\n    timeline.addEventListener(\"click\", (e) => {\r\n      //get percentage of where timeline clicked\r\n      let clickPercent = (e.clientX - timeline.getBoundingClientRect().left) / timeline.offsetWidth;\r\n      // set playhead\r\n      timeline.firstChild.style.width = (100 * clickPercent) + \"%\";\r\n      // set new track time\r\n      audioSourceRef.currentTime = audioSourceRef.duration * clickPercent;\r\n    })\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"audio-player-wrapper\" className=\"Collider\">\r\n      {/* audio source */}\r\n      <audio src={props.trackSrc} id=\"audio-source\" onEnded={() => {\r\n        setIsPlaying(false);\r\n        props.pauseTimer();\r\n        }} />\r\n      {/* play button */}\r\n      <button id=\"play-pause-button\" className=\"AudioPlayerButton\" onClick={playPauseAudio}>\r\n        {isPlaying\r\n            ? <PauseIcon />\r\n            : <PlayIcon /> }\r\n      </button>\r\n      {/* reset button */}\r\n      <button className=\"AudioPlayerButton\" onClick={() => {audioSource.currentTime = 0; props.restartTimer()}}>\r\n        <RewindIcon />\r\n      </button>\r\n      {/*Audio Timeline*/}\r\n      <div id=\"timeline\" className=\"timelineloaded\">\r\n        <div id=\"playhead\" />\r\n      </div>\r\n      {/* volume section */}\r\n      <div id=\"volume-section-wrapper\">\r\n        {/* mute button */}\r\n        <button className=\"AudioPlayerButton\" id=\"mute-button\" onClick={muteAudio}>\r\n          {isMuted\r\n            ? <MuteIconOff />\r\n            : <MuteIconOn /> }                    \r\n        </button>\r\n        {/* volume slider */}\r\n        <div id=\"volume-wrapper\">\r\n            {VolumeNotches}\r\n        </div>\r\n      </div>               \r\n    </div>\r\n  )\r\n  function playPauseAudio(){\r\n    if(audioSource.paused){\r\n      audioSource.play();\r\n      setIsPlaying(true);\r\n      props.startTimer();\r\n      if(!responded){\r\n        props.setAskResponse(true);\r\n        setResponded(true);\r\n      }\r\n    } else {\r\n      audioSource.pause();\r\n      setIsPlaying(false);\r\n      props.pauseTimer();\r\n    }\r\n  }  \r\n  function muteAudio(){\r\n    audioSource.muted = !audioSource.muted;\r\n    setIsMuted(!isMuted);\r\n  }\r\n}\r\n\r\nlet volNotchGen = Array(notchNumber).fill('');\r\n\r\n/* can this be changed to button? */\r\n\r\nconst VolumeNotches = volNotchGen.map((nothing, index) =>\r\n  <button className='VolumeNotch VolumeActive' id={index}\r\n       key={index+nothing} \r\n       onMouseDown={clickVolumeNotch}\r\n       onMouseEnter={(e) => {if(isMouseDown){clickVolumeNotch(e)}}}\r\n       style={{height: 100/volNotchGen.length + \"%\"}} />\r\n)\r\n\r\n/* keep track of mouse down for volume drag event */\r\nvar isMouseDown = false;\r\ndocument.addEventListener(\"mouseup\", () => {isMouseDown = false});\r\n\r\nfunction clickVolumeNotch(e){\r\n  e.stopPropagation();\r\n  isMouseDown = true;\r\n  let clickedID = parseInt(e.target.id);\r\n  /* set classes for active notch */\r\n  let notches = document.getElementsByClassName(\"VolumeNotch\");\r\n  for (let notch of notches){\r\n    if(notch.id < clickedID){\r\n      notch.classList.remove(\"VolumeActive\");\r\n    } else {\r\n      notch.classList.add(\"VolumeActive\");\r\n    }  \r\n  }\r\n  /* set new volume */\r\n  let newVolume = 1 - (1/notchNumber) * clickedID;\r\n  document.getElementById(\"audio-source\").volume = newVolume;\r\n}\r\n\r\nfunction PlayIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 110 110\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\">\r\n        <g transform=\"scale(.8) translate(15)\" style={{transformOrigin: \"center\"}} className=\"AudioPlayerIcon\">\r\n          <polygon points=\"10,10 73,55 10,100\"\r\n                   strokeLinejoin=\"round\"\r\n                   strokeWidth=\"20\"\r\n          />\r\n        </g>        \r\n    </svg>\r\n  )\r\n}\r\nfunction PauseIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 110 110\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\">\r\n        <g transform=\"scale(.8) translate(15)\" style={{transformOrigin: \"center\"}} className=\"AudioPlayerIcon\">\r\n          <path strokeLinecap=\"round\" strokeWidth=\"30\"\r\n              d=\" M 67.5,15\r\n                  L 67.5,95\" />\r\n          <path strokeLinecap=\"round\" strokeWidth=\"30\"\r\n              d=\" M 15,15\r\n                  L 15,95\" />\r\n        </g>        \r\n    </svg>\r\n  )\r\n}\r\nfunction RewindIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 110 110\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\">\r\n        <g transform=\"scale(.8)\" style={{transformOrigin: \"center\"}} className=\"AudioPlayerIcon\">\r\n          <polygon points=\"10,10 73,55 10,100\"\r\n                   strokeLinejoin=\"round\"\r\n                   strokeWidth=\"20\"\r\n                   transform=\"translate(-25) rotate(180, 55, 55)\"\r\n          />\r\n          <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"20\"\r\n              d=\" M 100,10\r\n                  L 100,100\" />\r\n        </g>\r\n               \r\n    </svg>\r\n  )\r\n}\r\nfunction MuteIconOn(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      transform=\"\"\r\n      className=\"AudioPlayerIcon\">\r\n        {/* Speaker */}\r\n        <path id=\"mute-speaker\"\r\n              d=\" M 10,42\r\n              A 2,2 90 0 1 12,40\r\n              L 15,40 30,15 35,15\r\n              Q 38,50 35,85 \r\n              L 30,85 15,60 12,60\r\n              A 2,2 90 0 1 10,58\r\n              Z              \r\n        \" />\r\n        {/* Volume Lines */}\r\n        <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 45,35\r\n                  Q 55,50 45,65\" />\r\n        <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 55,22.5\r\n                  Q 77.33,50 55,77.5\" />\r\n        <path fill=\"none\" strokeLinecap=\"round\" strokeWidth=\"6\" className=\"MuteLines active\"\r\n              d=\" M 65,10\r\n                  Q 101.66,50 65,90\" />\r\n    </svg>\r\n  )\r\n}\r\nfunction MuteIconOff(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      opacity=\"50%\"\r\n      className=\"AudioPlayerIcon\">\r\n        {/* Speaker */}\r\n        <path id=\"mute-speaker\"\r\n              d=\" M 10,42\r\n              A 2,2 90 0 1 12,40\r\n              L 15,40 30,15 35,15\r\n              Q 38,50 35,85 \r\n              L 30,85 15,60 12,60\r\n              A 2,2 90 0 1 10,58\r\n              Z              \r\n        \" />\r\n        <path fill=\"none\" strokeWidth=\"6\" \r\n              d=\" M 50, 35\r\n                  L 80, 65\r\n              \" />\r\n        <path fill=\"none\" strokeWidth=\"6\"\r\n              d=\" M 80, 35\r\n                  L 50, 65\r\n              \" />\r\n    </svg>\r\n  )\r\n}","import React, { useEffect } from 'react';\r\n\r\nexport default function DrawingTools(props){\r\n\r\n  useEffect(() => {\r\n    // increase brush size on click if within limit\r\n    document.getElementById(\"increase-brush-button\").addEventListener('click', () => {\r\n      if(props.brushSize < 20){ props.setBrushSize(props.brushSize + 2 ) }\r\n    });\r\n    // decrease brush size on click if within limit\r\n    document.getElementById(\"decrease-brush-button\").addEventListener('click', () => {\r\n      if(props.brushSize > 2){ props.setBrushSize(props.brushSize - 2 ) }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div id=\"drawing-buttons-wrapper\">\r\n        <button id=\"increase-brush-button\" className=\"DrawingUIButton\"> BRUSH + <div id=\"brush-up-icon\" /></button>\r\n        <button id=\"decrease-brush-button\" className=\"DrawingUIButton\"> BRUSH - <div id=\"brush-down-icon\" /></button>\r\n        <button id=\"erase-brush-button\" className=\"DrawingUIButton\" onClick={props.toggleEraser}> ERASER <div id=\"eraser-icon\" /></button>\r\n        <button id=\"undo-button\" className=\"DrawingUIButton\" onClick={props.undoDrawing}> UNDO <div id=\"undo-icon\" /></button>\r\n        <button id=\"redo-button\" className=\"DrawingUIButton\" onClick={props.redoDrawing}> REDO <div id=\"redo-icon\" /></button>              \r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nexport default function DrawingCanvas(props){\r\n\r\n  \r\n  const [canvas, setCanvas] = useState(null);\r\n  let canvasRef = useRef(null);\r\n  useEffect(() => {canvasRef.current = canvas}, [canvas]);\r\n\r\n  useEffect(() => {\r\n    let newCanvas = new fabric.Canvas('drawing-canvas', { isDrawingMode: true });\r\n    let canvasWrapper = document.getElementById(\"drawing-canvas-wrapper\"); \r\n    newCanvas.setWidth(canvasWrapper.offsetWidth);\r\n    newCanvas.setHeight(canvasWrapper.offsetHeight);\r\n    newCanvas.freeDrawingBrush.color = props.brushColour;    \r\n    newCanvas.freeDrawingBrush.width = props.brushSize;\r\n    newCanvas.freeDrawingCursor = getCustomCursor();\r\n    newCanvas.on('mouse:down', () => props.setIsDrawing(true));\r\n    setCanvas(newCanvas);\r\n    window.addEventListener('resize', updateCanvasDimensions);\r\n    props.setDrawingCanvas(newCanvas);\r\n    props.setCurrentCanvasState(newCanvas.toDatalessJSON());\r\n  }, [setCanvas]);\r\n\r\n  useEffect(() => {\r\n    if(canvasRef.current){\r\n      canvasRef.current.freeDrawingBrush.color = props.brushColour;\r\n      canvasRef.current.freeDrawingCursor = getCustomCursor();\r\n    }    \r\n  }, [props.brushColour]);\r\n\r\n  useEffect(() => {\r\n    if(canvasRef.current){\r\n      canvasRef.current.freeDrawingBrush.width = props.brushSize;\r\n      canvasRef.current.freeDrawingCursor = getCustomCursor();\r\n    }    \r\n  }, [props.brushSize]);\r\n\r\n  return (\r\n    <div id=\"drawing-canvas-wrapper\">\r\n      <canvas id=\"drawing-canvas\" />\r\n    </div>\r\n  )\r\n\r\n  function updateCanvasDimensions() {\r\n    if(document.getElementById(\"drawing-canvas-wrapper\")){\r\n      let canvasWrapper = document.getElementById(\"drawing-canvas-wrapper\");\r\n      canvasRef.current.setWidth(canvasWrapper.offsetWidth);\r\n      canvasRef.current.setHeight(canvasWrapper.offsetHeight); \r\n    }   \r\n  }\r\n\r\n  function getCustomCursor() {\r\n    const circle = \r\n      `<svg height=\"${props.brushSize}\"\r\n            fill=\"${props.brushColour}\"\r\n            viewBox=\"0 0 ${props.brushSize * 2} ${props.brushSize * 2}\"\r\n            width=\"${props.brushSize}\"\r\n            xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle cx=\"50%\"\r\n                cy=\"50%\"\r\n                r=\"${props.brushSize}\" />\r\n      </svg>`;      \r\n    return `url(data:image/svg+xml;base64,${window.btoa(circle)}) ${props.brushSize / 2} ${props.brushSize / 2}, move`;\r\n  }\r\n}\r\n","import React, { useEffect } from 'react';\r\n\r\nexport default function ColourPicker(props){\r\n\r\n  useEffect(() => {\r\n    document.getElementById('col1Select').addEventListener(\"input\", colourInputChange, false);\r\n    document.getElementById('col2Select').addEventListener(\"input\", colourInputChange, false);\r\n    document.getElementById('col3Select').addEventListener(\"input\", colourInputChange, false);\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"drawing-tools-wrapper\">\r\n      <button id=\"col-swap-button\" onClick={() => colourSwap()}>\r\n        <SwapIcon />\r\n      </button>\r\n      <span id=\"word-change\">CHANGE</span>\r\n      <span id=\"word-colour\">COLOUR</span>\r\n      <div id=\"col-select-wrapper\">\r\n        <input type=\"color\" id=\"col1Select\" className=\"col-select first\" name=\"col1Select\" defaultValue={props.colours[0]} />\r\n        <input type=\"color\" id=\"col2Select\" className=\"col-select second\" name=\"col23Select\" defaultValue={props.colours[1]} />\r\n        <input type=\"color\" id=\"col3Select\" className=\"col-select third\" name=\"col33Select\" defaultValue={props.colours[2]} />\r\n      </div>\r\n    </div>      \r\n  )\r\n\r\n  function colourSwap(e){\r\n    let selectors = document.getElementsByClassName(\"col-select\");\r\n    for (let i = 0; i < 3; i++){\r\n      let cl = selectors[i].classList;\r\n      switch(true){\r\n        case cl.contains('first'):\r\n        cl.remove('first');\r\n        cl.add('third');\r\n        break;\r\n        case cl.contains('second'):\r\n        cl.remove('second');\r\n        cl.add('first');\r\n        break;\r\n        case cl.contains('third'):\r\n        cl.remove('third');\r\n        cl.add('second');\r\n        break;\r\n        default:\r\n        break;\r\n      }\r\n    }\r\n    props.setCurrentColours([\r\n      props.colours[1],\r\n      props.colours[2],\r\n      props.colours[0]\r\n    ]);\r\n  }\r\n  function colourInputChange(e){\r\n    let colNum = parseInt(e.target.id.charAt(3));\r\n    document.documentElement.style.setProperty('--comp-col-0'+colNum, e.target.value);\r\n    let newColours = props.colours;\r\n    newColours[colNum - 1] = e.target.value;\r\n    props.setCurrentColours(newColours);\r\n  }\r\n}\r\n\r\n/* expecting a 5:1 aspect ratio */\r\nfunction SwapIcon(){\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 100 100\"\r\n      xmlns=\"http://www.w3.org/2000/svg\" >\r\n        {/* Arrow Head */}\r\n        <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"6\" refX=\"7\" refY=\"3\" orient=\"auto\">\r\n          <polygon points=\"0 0, 8 3.5, 0 6\" />\r\n        </marker>\r\n        {/* <rect width=\"100%\" height=\"100%\" fill=\"red\" /> */}\r\n        {/* <rect width=\"100%\" height=\"1%\" y=\"50%\" fill=\"blue\" />\r\n        <rect width=\"1%\" height=\"100%\" x=\"25%\" fill=\"blue\" /> */}\r\n        {/* Line */}\r\n        <path fill=\"none\" strokeWidth=\"8\" markerEnd=\"url(#arrowhead)\" \r\n              d=\" M 25, 50\r\n                  L 0,13.4 100,13.4 50,86.6\r\n                  \" />\r\n        {/* <path fill=\"none\" stroke=\"black\" strokeWidth=\"2\" marker-end=\"url(#arrowhead)\"\r\n              d=\" M 35,15\r\n                  L 17.5,15 17.5,5 82.5,5 82.5,15 65,15\" /> */}\r\n    </svg>\r\n  )\r\n}\r\n\r\n","import React, { useEffect } from 'react'\r\n\r\nexport default function SettingsMenu(props) {\r\n\r\n  useEffect(() => {\r\n    document.getElementById(\"graphics-dropdown-wrapper\").addEventListener(\"mouseleave\", () => {\r\n      setDisplay(\"graphics-dropdown\", \"none\");\r\n    });\r\n  },[]);\r\n\r\n  return (\r\n    <div id=\"settings-menu-wrapper\" className='Collider'>\r\n      <button className=\"SettingsMenuButton\" id=\"settings-info-button\" onClick={() => props.toggleModal()}>INFO</button>\r\n      <button className=\"SettingsMenuButton\" id=\"settings-focus-button\" onClick={() => props.toggleFocus}>FOCUS MODE</button>   \r\n      <div id=\"graphics-dropdown-wrapper\">\r\n        <button className=\"SettingsMenuButton\" id=\"settings-graphics-button\" onClick={() => {setDisplay(\"graphics-dropdown\", \"flex\")}}>GRAPHICS SETTINGS</button>    \r\n        <div id=\"graphics-dropdown\">\r\n          <button className=\"SettingsMenuButton Active\" onClick={e => \r\n            {changeActiveButton(e);\r\n            props.setGraphicsSettings(1);}}\r\n          >HIGH</button>\r\n          <button className=\"SettingsMenuButton\" onClick={e => \r\n            {changeActiveButton(e)\r\n            props.setGraphicsSettings(10);}}\r\n          >MEDIUM</button>\r\n          <button className=\"SettingsMenuButton\" onClick={e => \r\n            {changeActiveButton(e)\r\n            props.setGraphicsSettings(20);}}\r\n          >LOW</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n  function setDisplay(id, displayMode){\r\n    document.getElementById(id).style.display = displayMode;\r\n  }\r\n  function changeActiveButton(e){\r\n    Array.from(document.getElementsByClassName(\"SettingsMenuButton\")).forEach(button => {\r\n      button.classList.remove(\"Active\");\r\n    });\r\n    e.target.classList.add(\"Active\");\r\n    setDisplay(\"graphics-dropdown\", \"none\");\r\n  }\r\n}\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport IntroModal from './introModal';\r\nimport GLVis from './glVis';\r\nimport ResponseDisplay from './responseDisplay';\r\nimport AudioTrackPlayer from './audioTrackPlayer';\r\nimport DrawingTools from './drawingTools';\r\nimport DrawingCanvas from './drawingCanvas';\r\nimport ColourPicker from './colourPicker';\r\nimport SettingsMenu from './settingsMenu';\r\n\r\n/* set timer refresh rate in ms */\r\nconst timerRefreshRate = 15;\r\n\r\nexport default function DesktopApp(props) {\r\n\r\n  const [currentModalPage, setCurrentModalPage] = useState(0);\r\n\r\n  const[askResponse, setAskResponse] = useState(false);\r\n  const[readyToRespond, setReadyToRespond] = useState(false);  \r\n\r\n  const[timer, setTimer] = useState(0.);\r\n  const[timerInterval, setTimerInterval] = useState(null);\r\n  const[audioSourceRef, setAudioSourceRef] = useState(null);\r\n\r\n  // graphics settings  - 1 high 10 medium 20 low\r\n  const[graphicsSettings, setGraphicsSettings] = useState(1);\r\n\r\n  return (\r\n    <div id=\"desktop-wrapper\">\r\n      {props.modalIsOpen\r\n        /* if true show modal */\r\n        ? <IntroModal\r\n            currentModalPage={currentModalPage}\r\n            setCurrentModalPage={setCurrentModalPage}\r\n            trackHasUpdated={props.trackHasUpdated}\r\n            toggleModal={props.toggleModal}\r\n            currentCycle={props.currentCycle}\r\n            setCurrentCycle={props.setCurrentCycle}\r\n            cyclePreset={props.cyclePreset} />\r\n        /* else show the desktop app */\r\n        : <>\r\n          {/* Settings Menu */}\r\n          <SettingsMenu\r\n            toggleModal={props.toggleModal}\r\n            setGraphicsSettings={setGraphicsSettings}\r\n            toggleFocus={props.toggleFocus} />\r\n          {/* Daily Prompt */}\r\n          <div id=\"current-prompt-wrapper\" className=\"Collider\">\r\n            <div id=\"current-prompt\">\r\n              {props.cyclePreset.prompt}\r\n            </div>\r\n          </div>\r\n          {/* Audio Player */}\r\n          <AudioTrackPlayer\r\n            trackSrc={props.cyclePreset.trackSrc}\r\n            setAudioSourceRef={setAudioSourceRef}\r\n            startTimer={startTimer}\r\n            pauseTimer={pauseTimer}\r\n            restartTimer={restartTimer}\r\n            setAskResponse={setAskResponse}\r\n            />\r\n          {/* Ask if ready to respond */} \r\n          {askResponse &&\r\n            <button id=\"ready-submission-button\" onClick={() => {setReadyToRespond(true); setAskResponse(false);}}> i'm ready to respond </button>\r\n          }\r\n          {/* Show response input */}\r\n          {readyToRespond &&\r\n            <>                           \r\n              <div id=\"input-wrapper\">\r\n                <div id=\"input-select-wrapper\">\r\n                  <span id=\"input-select\">\r\n                    I would like to&nbsp;\r\n                    <button id=\"draw-input-select\" className=\"InputSelectButton\" onClick={() => props.setInput(true)}>draw</button>\r\n                    &nbsp;/&nbsp;\r\n                    <button id=\"text-input-select\" className=\"InputSelectButton ActiveInputButton\" onClick={() => props.setInput(false)}>write</button>\r\n                    &nbsp;a response\r\n                  </span>\r\n                </div>\r\n                <div id=\"input-area\">\r\n                  <textarea id=\"text-input\" name=\"text based prompt response\" placeholder=\"Please type your response here...\" />\r\n                  <DrawingTools\r\n                    undoDrawing={props.undoDrawing}\r\n                    redoDrawing={props.redoDrawing}\r\n                    toggleEraser={props.toggleEraser}\r\n                    colours={props.colours}\r\n                    brushSize={props.brushSize}\r\n                    setBrushSize={props.setBrushSize} />\r\n                  <DrawingCanvas \r\n                    brushColour={props.colours[0]}\r\n                    brushSize={props.brushSize}\r\n                    setDrawingCanvas={props.setDrawingCanvas}\r\n                    setCurrentCanvasState={props.setCurrentCanvasState}\r\n                    setIsDrawing={props.setIsDrawing} />\r\n                  <ColourPicker \r\n                    colours={props.colours}\r\n                    setCurrentColours={props.setCurrentColours} />\r\n                </div>\r\n              </div>\r\n              <button id=\"response-submit-button\" \r\n                    onClick={() => {\r\n                      props.submitResponse();\r\n                      setReadyToRespond(false);\r\n                  }}>submit my response</button>\r\n            </>            \r\n          }\r\n          {/* External Response Overlay */}\r\n          <ResponseDisplay \r\n            responseData={props.responseData}\r\n            height={props.height}\r\n            width={props.width} />\r\n          {/* Background Visuals */}\r\n          <div id=\"bg-vis-wrapper\">              \r\n            <GLVis\r\n              shaderName={props.cyclePreset.shaderName}\r\n              graphicsSettings={graphicsSettings}\r\n              timer={timer}\r\n              height={props.height}\r\n              width={props.width}\r\n              tideData={props.tideData} />          \r\n          </div> \r\n          </>\r\n      }\r\n    </div>\r\n  )\r\n  /* update timer value (based on track position) */\r\n  function startTimer() {\r\n    if(timerInterval !== null){\r\n      clearInterval(timerInterval); \r\n      setTimerInterval(setInterval(() => {\r\n        setTimer(100 * audioSourceRef.currentTime/audioSourceRef.duration)\r\n      }, timerRefreshRate+graphicsSettings));\r\n    } else {\r\n      setTimerInterval(setInterval(() => {\r\n        setTimer(100 * audioSourceRef.currentTime/audioSourceRef.duration)\r\n      }, timerRefreshRate+graphicsSettings));\r\n    }\r\n  }\r\n  function pauseTimer() {\r\n    clearInterval(timerInterval);    \r\n  }\r\n  function restartTimer() {\r\n    setTimer(0.);    \r\n  }  \r\n}\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nimport './App.css';\r\n\r\nimport DesktopApp from './components/desktopApp';\r\nimport { cyclePresets, cycleDates } from './content/cyclePresets';\r\n\r\nexport default function App() {\r\n  // is accessed on mobile\r\n  const onMobile = window.matchMedia('all and (any-hover: none)').matches;\r\n  // current window size\r\n  const [windowSize, setWindowSize] = useState([window.innerWidth, window.innerHeight]);\r\n  // is the intro modal open\r\n  const [modalIsOpen, setModalIsOpen] = useState(true);\r\n  // has the track updated\r\n  const [trackHasUpdated, setTrackHasUpdated] = useState(false);\r\n  // check update interval\r\n  let checkEndInterval;\r\n  // current cycle - gets updated on page load\r\n  const [currentCycle, setCurrentCycle] = useState(0);\r\n  // tide data - gets updated on page load\r\n  const [tideData, setTideData] = useState({\r\n    tideUp: -1.0,\r\n    tideHeight: 0.8\r\n  });\r\n  // get current position in cycle\r\n  const cyclePos = 0;\r\n  /* const cyclePos = asyncCycleCalc(); */\r\n  /* if false it's assumed to be text instead */\r\n  const[inputIsDraw, setInputIsDraw] = useState(false);\r\n  // other responses from database\r\n  const [responseData, setResponseData] = useState([]);\r\n  // current drawing colours\r\n  const [currentColours, setCurrentColours] = useState(cyclePresets[currentCycle].colours);\r\n  // drawing settings\r\n  const [brushSize, setBrushSize] = useState(8);\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  var isDrawingRef = useRef(isDrawing);\r\n  useEffect(() => {isDrawingRef.current = isDrawing}, [isDrawing]);\r\n  const [isEraser, setIsEraser] = useState(false);\r\n  const [savedBrush, setSavedBrush] = useState(null);\r\n  // undo/redo settings\r\n  const maxUndo = 10;\r\n  const [drawingCanvas, setDrawingCanvas] = useState(null);\r\n  var drawingCanvasRef = useRef(drawingCanvas);\r\n  useEffect(() => {drawingCanvasRef.current = drawingCanvas}, [drawingCanvas]);\r\n  const [currentCanvasState, setCurrentCanvasState] = useState(null);\r\n  var currentCanvasStateRef = useRef(currentCanvasState);\r\n  useEffect(() => {currentCanvasStateRef.current = currentCanvasState}, [currentCanvasState]);\r\n  const [undoStack, setUndoStack] = useState([]);\r\n  const [redoStack, setRedoStack] = useState([]);\r\n  var undoStackRef = useRef(undoStack);\r\n  var redoStackRef = useRef(redoStack);\r\n  useEffect(() => {undoStackRef.current = undoStack}, [undoStack]);\r\n  useEffect(() => {redoStackRef.current = redoStack}, [redoStack]);\r\n  // is focus mode active\r\n  const [focusMode, setFocusMode] = useState(false);\r\n\r\n  // my init function to run on app load\r\n  useEffect(() => {\r\n    // set up to update window dimensions on resize event\r\n    setWindowSize([window.innerWidth, window.innerHeight]);\r\n    window.addEventListener('resize', () => {\r\n      setWindowSize([window.innerWidth, window.innerHeight])});\r\n    updateCyclePosition();\r\n  }, []);\r\n\r\n  \r\n  useEffect(() => {\r\n    setCurrentColours(cyclePresets[currentCycle].colours);\r\n  }, [currentCycle])\r\n\r\n  return (\r\n    <div id=\"global-wrapper\">\r\n      {onMobile\r\n      ?\r\n        <div id=\"mobile-wrapper\">\r\n          <span id=\"mobile-text\">\r\n            Unfortunately room2.fm is currently not able to operate on mobile devices due to technical restrictions. \r\n            Please try again on a desktop or laptop computer if you are able to.\r\n          </span>\r\n        </div>\r\n      :\r\n        <DesktopApp      \r\n          width={windowSize[0]}\r\n          height={windowSize[1]}\r\n          modalIsOpen={modalIsOpen}\r\n          trackHasUpdated={trackHasUpdated}\r\n          toggleModal={toggleModal}\r\n          setIsDrawing={setIsDrawing}\r\n          cyclePreset={cyclePresets[currentCycle]}\r\n          currentCycle={currentCycle}\r\n          setCurrentCycle={setCurrentCycle}\r\n          tideData={tideData}\r\n          setInput={setInput}\r\n          colours={currentColours}\r\n          setCurrentColours={setCurrentColours}\r\n          brushSize={brushSize}\r\n          setBrushSize={setBrushSize}\r\n          toggleEraser={toggleEraser}\r\n          setDrawingCanvas={setDrawingCanvas}\r\n          setCurrentCanvasState={setCurrentCanvasState}\r\n          undoDrawing={undoDrawing}\r\n          redoDrawing={redoDrawing}\r\n          submitResponse={submitResponse}\r\n          responseData={responseData}\r\n          toggleFocus={toggleFocus}\r\n          />\r\n      }\r\n    </div>\r\n  )\r\n  \r\n  // gets triggered when either the intro or info modal are brought up\r\n  function toggleModal(){\r\n    // add and remove event listener that triggers after drawing to save canvas to undo stack\r\n    if(modalIsOpen){\r\n      document.addEventListener('mouseup', saveCanvasState);\r\n    } else {\r\n      document.removeEventListener('mouseup', saveCanvasState);\r\n    }\r\n    // toggle state\r\n    setModalIsOpen(!modalIsOpen);\r\n  }\r\n  // to change between draw and write - true = draw - false = text\r\n  function setInput(changeToDraw){\r\n    if(changeToDraw){\r\n      setInputIsDraw(true);\r\n      document.getElementById(\"drawing-canvas-wrapper\").style.zIndex = \"6\";\r\n      document.getElementById(\"draw-input-select\").classList.add(\"ActiveInputButton\");\r\n      document.getElementById(\"drawing-tools-wrapper\").style.right = \"-25vh\";\r\n      document.getElementById(\"drawing-buttons-wrapper\").style.left = \"-15vh\";\r\n      document.getElementById(\"text-input-select\").classList.remove(\"ActiveInputButton\");\r\n    } else {\r\n      setInputIsDraw(false);\r\n      document.getElementById(\"drawing-canvas-wrapper\").style.zIndex = \"4\";\r\n      document.getElementById(\"draw-input-select\").classList.remove(\"ActiveInputButton\");\r\n      document.getElementById(\"drawing-tools-wrapper\").style.right = \"\";\r\n      document.getElementById(\"drawing-buttons-wrapper\").style.left = \"\";\r\n      document.getElementById(\"text-input-select\").classList.add(\"ActiveInputButton\");\r\n    }\r\n  }\r\n\r\n  // toggle eraser on/off - save brush if toggled on - reset old brush if toggled off\r\n  function toggleEraser(){\r\n    if(isEraser){\r\n      drawingCanvas.freeDrawingBrush = savedBrush;\r\n      document.getElementById(\"erase-brush-button\").classList.remove(\"Active\");\r\n    } else {\r\n      setSavedBrush(drawingCanvas.freeDrawingBrush);\r\n      drawingCanvas.freeDrawingBrush = new fabric.EraserBrush(drawingCanvas);\r\n      drawingCanvas.freeDrawingBrush.width = brushSize;\r\n      document.getElementById(\"erase-brush-button\").classList.add(\"Active\");\r\n    }\r\n    setIsEraser(!isEraser);\r\n  }\r\n  // undo/redo functions\r\n  // run on mouse up to save current canvas state to undo stack and then toggle isDrawing off\r\n  function saveCanvasState(){\r\n    // only run if mouse up is occuring after a drawing action\r\n    if(isDrawingRef.current){\r\n      // get version of undo stack to change\r\n      let newUndoStack = undoStackRef.current;\r\n      // drop oldest undo if over max undo count\r\n      if(newUndoStack.length === maxUndo){ newUndoStack.shift(); }\r\n      // add last current state stored before updating it to store the new state\r\n      newUndoStack.push(currentCanvasStateRef.current);\r\n      setCurrentCanvasState(drawingCanvasRef.current.toDatalessJSON());\r\n      // update undo stack into state, remove redo stack and then toggle isDrawing off\r\n      setUndoStack(newUndoStack);\r\n      setRedoStack([]);\r\n      setIsDrawing(false);\r\n    }\r\n  }\r\n  function undoDrawing(){\r\n    // if states left to undo\r\n    if(undoStack.length > 0){\r\n      // store state to come back to\r\n      let newCanvasState = currentCanvasState;\r\n      // push current state to redo stack\r\n      let newRedoStack = redoStackRef.current;\r\n      newRedoStack.splice(newRedoStack.length, 0, drawingCanvasRef.current.toDatalessJSON());\r\n      setRedoStack(newRedoStack);\r\n      // pop previous state from state stack\r\n      let newUndoStack = undoStackRef.current;\r\n      let newState = newUndoStack.pop();\r\n      // update to previous states and both stacks\r\n      setCurrentCanvasState(newState);\r\n      setUndoStack(newUndoStack);\r\n      // update actual canvas\r\n      drawingCanvas.loadFromJSON(newCanvasState);\r\n    }\r\n  }\r\n  function redoDrawing(){\r\n    // if states left to redo\r\n    if(redoStack.length > 0){\r\n      // pop new state from redo stack\r\n      let newRedoStack = redoStackRef.current;\r\n      let newCanvasState = newRedoStack.pop();\r\n      // push current state to undo stack\r\n      let newUndoStack = undoStackRef.current;\r\n      newUndoStack.push(currentCanvasStateRef.current);\r\n      setUndoStack(newUndoStack);\r\n      // update current state\r\n      setCurrentCanvasState(drawingCanvas.toDatalessJSON());\r\n      setRedoStack(newRedoStack);\r\n      // update actual canvas\r\n      drawingCanvas.loadFromJSON(newCanvasState);      \r\n    }\r\n  }\r\n  \r\n  // if it overshoots it won't return anything\r\n  //checking if it's within half an hour of sunset - write a function in here\r\n  function updateCyclePosition(){\r\n    // first grab current UTC\r\n    let currentDate = Date.now();\r\n    var halfHour = 30 * 60 * 1000; \r\n    // then compare to list of changeover times\r\n    for(let i = 0; i < cycleDates.length; i++){\r\n      // check current time vs the end of the cycle, if before the end time then set the cycle int and break the for loop\r\n      if(currentDate < cycleDates[i].endTime){\r\n        setCurrentCycle(i); \r\n        if (cycleDates[i].endTime - currentDate < halfHour) {\r\n          checkEndInterval = setInterval(checkEnd(cycleDates[i].endTime), 300000);\r\n        } \r\n        for(let k = 0; k < cycleDates[i].tidalData.length; k++){\r\n          if(currentDate < cycleDates[i].tidalData[k].tideEnd){\r\n            setTideData({\r\n              tideUp: cycleDates[i].tidalData[k].tideUp,\r\n              tideHeight: cycleDates[i].tidalData[k].tideHieght\r\n            })\r\n            break; \r\n          }\r\n        }\r\n        break; \r\n      }\r\n    }\r\n  }\r\n\r\n  function checkEnd(end) {\r\n    var updatedTime = Date.now();\r\n    if (updatedTime >= end) {\r\n      clearInterval(checkEndInterval);\r\n      setTrackHasUpdated(true);\r\n    }\r\n\r\n  }\r\n  function submitResponse(){\r\n    // set up array to push other responses to\r\n    let returnedResponses = [];\r\n    // check if a text or an image response\r\n    if(inputIsDraw){\r\n      //image input\r\n      let imageInput = document.getElementById('drawing-canvas');\r\n      var dataURL = imageInput.toDataURL({\r\n        format: 'png',\r\n        left: 0,\r\n        top: 0,\r\n        width: imageInput.width,\r\n        height: imageInput.height\r\n      });\r\n      const formData = new FormData();\r\n      let imageFile = dataURLtoFile(dataURL, 'response.png');\r\n      drawingCanvas.clear();\r\n      // we add one to cycle pos to keep start from 1\r\n      formData.append('upload', imageFile, 'cycle_'+ (currentCycle) +'_response.png');\r\n      fetch(`https://room2.fm/api/insertImageReflectionGetResponses`, {\r\n        method: 'PUT',\r\n        body: formData\r\n      })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        try{\r\n          for(const response of res.data[0]) {\r\n            console.log(response);\r\n            returnedResponses.push([response.RESPONSE, response.RESPONSE_TYPE]);\r\n          }\r\n          setResponseData(returnedResponses);\r\n        } catch(e) {\r\n          // if response not the data\r\n          console.log(e);\r\n        }\r\n        });\r\n    } else {\r\n      // text input\r\n      let textInput = document.getElementById('text-input');\r\n      let responseText = textInput.value;\r\n      if(responseText.length > 0){\r\n        textInput.value = '';\r\n        fetch(`https://room2.fm/api/insertTextReflectionGetResponses`, {\r\n          headers: { 'Content-type': 'application/json' },\r\n          method: 'POST',\r\n          mode: 'cors',\r\n          // we add one to cycle pos to keep start from 1\r\n          body: JSON.stringify({reflection: responseText, cycleTable: currentCycle})\r\n        })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        try{\r\n          for(const response of res.data[0]) {\r\n            console.log(response);\r\n            returnedResponses.push([response.RESPONSE, response.RESPONSE_TYPE]);         \r\n          }\r\n          setResponseData(returnedResponses);\r\n        } catch(e) {\r\n          // if response not the data\r\n          console.log(e);\r\n        }\r\n        });      \r\n      }\r\n    }\r\n  }\r\n\r\n  function toggleFocus(){\r\n    let textResponseRule = getCSSRule('.TextResponseBox');\r\n    let imageResponseRule = getCSSRule('.ImageResponseBox');\r\n    if(!focusMode){\r\n      setFocusMode(true);\r\n      textResponseRule.style.backgroundColor = \"rgb(31, 33, 28)\";\r\n      textResponseRule.style.border = \"solid white 1px\";\r\n      imageResponseRule.style.backgroundColor = \"white\";\r\n      imageResponseRule.style.border = \"solid rgb(31, 33, 28) 1px\";\r\n    } else {\r\n      setFocusMode(false);\r\n      textResponseRule.style.backgroundColor = \"\";\r\n      textResponseRule.style.border = \"\";\r\n      imageResponseRule.style.backgroundColor = \"\";\r\n      imageResponseRule.style.border = \"\";\r\n    }\r\n  }\r\n\r\n  function dataURLtoFile(dataurl, filename){\r\n    var arr = dataurl.split(','),\r\n      mime = arr[0].match(/:(.*?);/)[1],\r\n      bstr = atob(arr[1]),\r\n      n = bstr.length,\r\n      u8arr = new Uint8Array(n);\r\n    while (n--) {\r\n      u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new File([u8arr], filename, {\r\n      type: mime\r\n    });\r\n  }\r\n\r\n  function getCSSRule(ruleName) {\r\n    ruleName = ruleName.toLowerCase();\r\n    var result = null;\r\n    var find = Array.prototype.find;\r\n\r\n    find.call(document.styleSheets, styleSheet => {\r\n        result = find.call(styleSheet.cssRules, cssRule => {\r\n            return cssRule instanceof CSSStyleRule \r\n                && cssRule.selectorText.toLowerCase() === ruleName;\r\n        });\r\n        return result != null;\r\n    });\r\n    return result;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}